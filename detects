
 NX   Running target test for 56 projects and 24 tasks they depend on:

- cortex-code
- @cortex-os/mcp-marketplace
- @cortex-os/marketplace-api
- cortex-os
- @cortex-os/evidence
- @cortex-os/ingest
- @cortex-os/planner
- cortex-webui
- cortex-webui-backend
- cortex-webui-frontend
- @cortex-os/asbr-schemas
- asbr
- @cortex-os/contracts
- @cortex-os/cortex-structure-github
- @cortex-os/cortex-semgrep-github
- @cortex-os/a2a-contracts
- @cortex-os/a2a-transport
- @cortex-os/model-gateway
- @cortex-os/rag
- @cortex-os/gateway
- @cortex-os/observability
- @cortex-os/service-orchestration
- @cortex-os/mvp-group
- @cortex-os/orchestration
- @cortex-os/tdd-coach
- @cortex-os/memories
- security
- @cortex-os/evals
- @cortex-os/a2a-core
- @cortex-os/a2a-schema-registry
- @cortex-os/a2a-observability
- @cortex-os/a2a-handlers
- @cortex-os/cortex-ai-github
- @cortex-os/agents
- a2a
- @cortex-os/agent-toolkit
- @cortex-os/prp-runner
- @cortex-os/telemetry
- @cortex-os/types
- @cortex-os/utils
- @cortex-os/a2a-common
- a2a-events
- @cortex-os/agui
- @cortex-os/logging
- github
- @cortex-os/kernel
- @cortex-os/mcp-bridge
- @cortex-os/mcp-core
- @cortex-os/mcp-registry
- @cortex-os/mvp-core
- @cortex-os/mvp-server
- mvp
- @cortex-os/policy
- @cortex-os/registry
- @cortex-os/service-model-gateway
- cortex-os-docs



> nx run @cortex-os/a2a-core:build  [local cache]


> @cortex-os/a2a-core@0.2.0 build /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-core
> tsup

[34mCLI[39m Building entry: {"index":"src/index.ts","bus":"src/bus.ts","send":"src/send.ts","schema-registry":"src/schema-registry.ts","trace-context-manager":"src/trace-context-manager.ts","transport":"src/transport.ts","dlq":"src/dlq.ts","outbox":"src/outbox.ts","router":"src/router.ts","saga":"src/saga.ts","metrics":"src/metrics.ts"}
[34mCLI[39m Using tsconfig: tsconfig.json
[34mCLI[39m tsup v8.5.0
[34mCLI[39m Using tsup config: /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-core/tsup.config.ts
[34mCLI[39m Target: es2022
[34mCLI[39m Cleaning output folder
[34mESM[39m Build start
[34mDTS[39m Build start
Generated an empty chunk: "transport".
"evidenceArraySchema" is imported from external module "@cortex-os/contracts" but never used in "dist/chunk-47ALIPPQ.js".
dist/chunk-4L4G4DGO.js (14643:18): Use of eval in "dist/chunk-4L4G4DGO.js" is strongly discouraged as it poses security risks and may cause issues with minification.
[32mESM[39m [1mdist/getMachineId-darwin-M6HHI5WB.js          [22m[32m1.24 KB[39m
[32mESM[39m [1mdist/getMachineId-linux-5CKKZJZH.js           [22m[32m892.00 B[39m
[32mESM[39m [1mdist/router.js                                [22m[32m145.00 B[39m
[32mESM[39m [1mdist/getMachineId-bsd-5JEINADD.js             [22m[32m1.02 KB[39m
[32mESM[39m [1mdist/getMachineId-win-VF4HFLBO.js             [22m[32m1.19 KB[39m
[32mESM[39m [1mdist/chunk-VW32GU2E.js                        [22m[32m12.50 KB[39m
[32mESM[39m [1mdist/chunk-ZWLBSOCK.js                        [22m[32m540.00 B[39m
[32mESM[39m [1mdist/index.js                                 [22m[32m12.65 KB[39m
[32mESM[39m [1mdist/getMachineId-unsupported-V6ALG3AN.js     [22m[32m867.00 B[39m
[32mESM[39m [1mdist/chunk-4URQII65.js                        [22m[32m295.00 B[39m
[32mESM[39m [1mdist/bus.js                                   [22m[32m3.54 KB[39m
[32mESM[39m [1mdist/metrics.js                               [22m[32m609.00 B[39m
[32mESM[39m [1mdist/saga.js                                  [22m[32m247.00 B[39m
[32mESM[39m [1mdist/send.js                                  [22m[32m2.22 KB[39m
[32mESM[39m [1mdist/trace-context-manager.js                 [22m[32m1.04 KB[39m
[32mESM[39m [1mdist/transport.js                             [22m[32m76.00 B[39m
[32mESM[39m [1mdist/dlq.js                                   [22m[32m346.00 B[39m
[32mESM[39m [1mdist/schema-registry.js                       [22m[32m8.33 KB[39m
[32mESM[39m [1mdist/chunk-47ALIPPQ.js                        [22m[32m2.67 KB[39m
[32mESM[39m [1mdist/outbox.js                                [22m[32m345.00 B[39m
[32mESM[39m [1mdist/chunk-VRCXN3LF.js                        [22m[32m16.16 KB[39m
[32mESM[39m [1mdist/chunk-PZR2T5RI.js                        [22m[32m596.00 B[39m
[32mESM[39m [1mdist/chunk-6RKTLTD3.js                        [22m[32m1017.00 B[39m
[32mESM[39m [1mdist/chunk-4V64RRPQ.js                        [22m[32m9.24 KB[39m
[32mESM[39m [1mdist/chunk-L5M5EZ7M.js                        [22m[32m1.04 KB[39m
[32mESM[39m [1mdist/chunk-PLDDJCW6.js                        [22m[32m2.13 KB[39m
[32mESM[39m [1mdist/chunk-KBSASRXH.js                        [22m[32m60.07 KB[39m
[32mESM[39m [1mdist/getMachineId-linux-5CKKZJZH.js.map       [22m[32m1.77 KB[39m
[32mESM[39m [1mdist/getMachineId-darwin-M6HHI5WB.js.map      [22m[32m2.15 KB[39m
[32mESM[39m [1mdist/router.js.map                            [22m[32m70.00 B[39m
[32mESM[39m [1mdist/getMachineId-bsd-5JEINADD.js.map         [22m[32m2.00 KB[39m
[32mESM[39m [1mdist/chunk-ZWLBSOCK.js.map                    [22m[32m1.12 KB[39m
[32mESM[39m [1mdist/chunk-VW32GU2E.js.map                    [22m[32m27.91 KB[39m
[32mESM[39m [1mdist/getMachineId-unsupported-V6ALG3AN.js.map [22m[32m1.26 KB[39m
[32mESM[39m [1mdist/chunk-4URQII65.js.map                    [22m[32m739.00 B[39m
[32mESM[39m [1mdist/getMachineId-win-VF4HFLBO.js.map         [22m[32m2.30 KB[39m
[32mESM[39m [1mdist/index.js.map                             [22m[32m28.10 KB[39m
[32mESM[39m [1mdist/bus.js.map                               [22m[32m8.32 KB[39m
[32mESM[39m [1mdist/metrics.js.map                           [22m[32m1.36 KB[39m
[32mESM[39m [1mdist/saga.js.map                              [22m[32m68.00 B[39m
[32mESM[39m [1mdist/transport.js.map                         [22m[32m73.00 B[39m
[32mESM[39m [1mdist/send.js.map                              [22m[32m5.45 KB[39m
[32mESM[39m [1mdist/dlq.js.map                               [22m[32m67.00 B[39m
[32mESM[39m [1mdist/schema-registry.js.map                   [22m[32m19.46 KB[39m
[32mESM[39m [1mdist/trace-context-manager.js.map             [22m[32m2.43 KB[39m
[32mESM[39m [1mdist/outbox.js.map                            [22m[32m70.00 B[39m
[32mESM[39m [1mdist/chunk-47ALIPPQ.js.map                    [22m[32m6.59 KB[39m
[32mESM[39m [1mdist/chunk-VRCXN3LF.js.map                    [22m[32m35.79 KB[39m
[32mESM[39m [1mdist/chunk-PZR2T5RI.js.map                    [22m[32m1.34 KB[39m
[32mESM[39m [1mdist/chunk-4V64RRPQ.js.map                    [22m[32m24.45 KB[39m
[32mESM[39m [1mdist/chunk-6RKTLTD3.js.map                    [22m[32m2.42 KB[39m
[32mESM[39m [1mdist/chunk-L5M5EZ7M.js.map                    [22m[32m6.57 KB[39m
[32mESM[39m [1mdist/chunk-PLDDJCW6.js.map                    [22m[32m78.00 B[39m
[32mESM[39m [1mdist/chunk-KBSASRXH.js.map                    [22m[32m146.98 KB[39m
[32mESM[39m [1mdist/chunk-4L4G4DGO.js                        [22m[32m2.51 MB[39m
[32mESM[39m [1mdist/chunk-4L4G4DGO.js.map                    [22m[32m5.82 MB[39m
[32mESM[39m ⚡️ Build success in 1420ms
[32mDTS[39m ⚡️ Build success in 2391ms
[32mDTS[39m [1mdist/index.d.ts                 [22m[32m1.26 KB[39m
[32mDTS[39m [1mdist/bus.d.ts                   [22m[32m1.17 KB[39m
[32mDTS[39m [1mdist/send.d.ts                  [22m[32m255.00 B[39m
[32mDTS[39m [1mdist/schema-registry.d.ts       [22m[32m5.19 KB[39m
[32mDTS[39m [1mdist/trace-context-manager.d.ts [22m[32m1019.00 B[39m
[32mDTS[39m [1mdist/transport.d.ts             [22m[32m332.00 B[39m
[32mDTS[39m [1mdist/dlq.d.ts                   [22m[32m7.08 KB[39m
[32mDTS[39m [1mdist/outbox.d.ts                [22m[32m8.74 KB[39m
[32mDTS[39m [1mdist/router.d.ts                [22m[32m323.00 B[39m
[32mDTS[39m [1mdist/saga.d.ts                  [22m[32m3.48 KB[39m
[32mDTS[39m [1mdist/metrics.d.ts               [22m[32m406.00 B[39m
[32mDTS[39m [1mdist/envelope-CsqjfDZW.d.ts     [22m[32m2.78 KB[39m

> nx run @cortex-os/a2a-contracts:build  [local cache]


> @cortex-os/a2a-contracts@0.2.0 build /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-contracts
> tsup src/**/*.ts --dts --format esm

[34mCLI[39m Building entry: src/agents.ts, src/commands.ts, src/envelope.d.ts, src/envelope.ts, src/events.ts, src/index.ts, src/outbox-types.ts, src/schema-registry-types.d.ts, src/schema-registry-types.ts, src/schema-validation-utils.ts, src/topic-acl.d.ts, src/topic-acl.ts, src/trace-context.d.ts, src/trace-context.ts
[34mCLI[39m Using tsconfig: tsconfig.json
[34mCLI[39m tsup v8.5.0
[34mCLI[39m Target: es2022
[34mESM[39m Build start
[32mESM[39m [1mdist/topic-acl.d.js             [22m[32m0 B[39m
[32mESM[39m [1mdist/trace-context.d.js         [22m[32m0 B[39m
[32mESM[39m [1mdist/envelope.d.js              [22m[32m0 B[39m
[32mESM[39m [1mdist/topic-acl.js               [22m[32m0 B[39m
[32mESM[39m [1mdist/schema-registry-types.d.js [22m[32m0 B[39m
[32mESM[39m [1mdist/trace-context.js           [22m[32m3.50 KB[39m
[32mESM[39m [1mdist/schema-registry-types.js   [22m[32m377.00 B[39m
[32mESM[39m [1mdist/schema-validation-utils.js [22m[32m8.45 KB[39m
[32mESM[39m [1mdist/agents.js                  [22m[32m91.00 B[39m
[32mESM[39m [1mdist/commands.js                [22m[32m73.00 B[39m
[32mESM[39m [1mdist/events.js                  [22m[32m69.00 B[39m
[32mESM[39m [1mdist/envelope.js                [22m[32m2.93 KB[39m
[32mESM[39m [1mdist/index.js                   [22m[32m3.23 KB[39m
[32mESM[39m [1mdist/chunk-ZMFV4LJB.js          [22m[32m382.00 B[39m
[32mESM[39m [1mdist/chunk-ASYUHO2J.js          [22m[32m62.00 B[39m
[32mESM[39m [1mdist/outbox-types.js            [22m[32m141.00 B[39m
[32mESM[39m [1mdist/chunk-DQ5W767O.js          [22m[32m1.70 KB[39m
[32mESM[39m [1mdist/chunk-F7TNKHYX.js          [22m[32m85.00 B[39m
[32mESM[39m ⚡️ Build success in 14ms
[34mDTS[39m Build start
[32mDTS[39m ⚡️ Build success in 1252ms
[32mDTS[39m [1mdist/index.d.ts                   [22m[32m637.00 B[39m
[32mDTS[39m [1mdist/envelope.d.d.ts              [22m[32m3.68 KB[39m
[32mDTS[39m [1mdist/agents.d.ts                  [22m[32m2.88 KB[39m
[32mDTS[39m [1mdist/commands.d.ts                [22m[32m120.00 B[39m
[32mDTS[39m [1mdist/envelope.d.ts                [22m[32m3.68 KB[39m
[32mDTS[39m [1mdist/events.d.ts                  [22m[32m111.00 B[39m
[32mDTS[39m [1mdist/outbox-types.d.ts            [22m[32m6.10 KB[39m
[32mDTS[39m [1mdist/schema-registry-types.d.d.ts [22m[32m3.71 KB[39m
[32mDTS[39m [1mdist/schema-registry-types.d.ts   [22m[32m3.71 KB[39m
[32mDTS[39m [1mdist/schema-validation-utils.d.ts [22m[32m32.00 KB[39m
[32mDTS[39m [1mdist/topic-acl.d.d.ts             [22m[32m338.00 B[39m
[32mDTS[39m [1mdist/topic-acl.d.ts               [22m[32m338.00 B[39m
[32mDTS[39m [1mdist/trace-context.d.d.ts         [22m[32m2.99 KB[39m
[32mDTS[39m [1mdist/trace-context.d.ts           [22m[32m2.99 KB[39m

> nx run @cortex-os/contracts:build  [local cache]


> @cortex-os/contracts@1.0.0 build /Users/jamiecraik/.Cortex-OS/libs/typescript/contracts
> tsc -p tsconfig.json && node scripts/fix-dts-extensions.mjs

Fixed .d.ts file extensions

> nx run @cortex-os/a2a-transport:build


> @cortex-os/a2a-transport@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-transport
> tsup src/index.ts src/fsq.ts src/inproc.ts src/stdio.ts --dts --format esm

[34mCLI[39m Building entry: src/fsq.ts, src/index.ts, src/inproc.ts, src/stdio.ts
[34mCLI[39m Using tsconfig: tsconfig.json
[34mCLI[39m tsup v8.5.0
[34mCLI[39m Target: es2022
[34mESM[39m Build start
[32mESM[39m [1mdist/fsq.js            [22m[32m71.00 B[39m
[32mESM[39m [1mdist/stdio.js          [22m[32m67.00 B[39m
[32mESM[39m [1mdist/index.js          [22m[32m838.00 B[39m
[32mESM[39m [1mdist/chunk-TU5E5RMH.js [22m[32m1.91 KB[39m
[32mESM[39m [1mdist/inproc.js         [22m[32m739.00 B[39m
[32mESM[39m [1mdist/chunk-GPSKLMBI.js [22m[32m885.00 B[39m
[32mESM[39m ⚡️ Build success in 10ms
[34mDTS[39m Build start
[32mDTS[39m ⚡️ Build success in 992ms
[32mDTS[39m [1mdist/index.d.ts  [22m[32m150.00 B[39m
[32mDTS[39m [1mdist/fsq.d.ts    [22m[32m138.00 B[39m
[32mDTS[39m [1mdist/inproc.d.ts [22m[32m118.00 B[39m
[32mDTS[39m [1mdist/stdio.d.ts  [22m[32m220.00 B[39m

> nx run a2a:build

[1m[33mrollup-plugin-typescript2 usage is deprecated and will be removed in Nx 23. Set 'useLegacyTypescriptPlugin: false' to use the official @rollup/plugin-typescript.[39m[22m
Bundling a2a...
  [1mindex.esm.js[22m [36m78.762 KB[39m
⚡ Done in 0.70s

> nx run @cortex-os/observability:build


> @cortex-os/observability@1.0.0 build /Users/jamiecraik/.Cortex-OS/packages/observability
> tsc


> nx run @cortex-os/mcp-core:build


> @cortex-os/mcp-core@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/mcp-core
> tsc -p tsconfig.json


> nx run @cortex-os/orchestration:build


> @cortex-os/orchestration@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/orchestration
> echo "No build step required for this package"

No build step required for this package

> nx run asbr:build

[1m[33mrollup-plugin-typescript2 usage is deprecated and will be removed in Nx 23. Set 'useLegacyTypescriptPlugin: false' to use the official @rollup/plugin-typescript.[39m[22m
Bundling asbr...
"@cortex-os/utils" is imported by "packages/asbr/src/sdk/index.ts", but could not be resolved – treating it as an external dependency.
  [1mindex.esm.js[22m [36m159.866 KB[39m
⚡ Done in 0.77s

> nx run @cortex-os/telemetry:build  [local cache]


> @cortex-os/telemetry@1.0.0 build /Users/jamiecraik/.Cortex-OS/libs/typescript/telemetry
> tsc -p tsconfig.json


> nx run @cortex-os/memories:build


> @cortex-os/memories@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/memories
> tsc


> nx run @cortex-os/types:build


> @cortex-os/types@1.0.0 build /Users/jamiecraik/.Cortex-OS/libs/typescript/types
> tsc -p tsconfig.json


> nx run @cortex-os/policy:build


> @cortex-os/policy@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/policy
> echo "No build step required for this package"

No build step required for this package

> nx run @cortex-os/kernel:build


> @cortex-os/kernel@1.0.0 build /Users/jamiecraik/.Cortex-OS/packages/kernel
> tsc


> nx run @cortex-os/registry:build


> @cortex-os/registry@1.0.0 build /Users/jamiecraik/.Cortex-OS/packages/registry
> tsc


> nx run @cortex-os/mcp-registry:build


> @cortex-os/mcp-registry@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/mcp-registry
> tsc -p tsconfig.json


> nx run @cortex-os/asbr-schemas:build


> @cortex-os/asbr-schemas@0.1.0 build /Users/jamiecraik/.Cortex-OS/libs/typescript/asbr-schemas
> tsc -p tsconfig.json


> nx run @cortex-os/agent-toolkit:build


> @cortex-os/agent-toolkit@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/agent-toolkit
> tsc

../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(5,14): error TS2300: Duplicate identifier 'Message'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(6,14): error TS2300: Duplicate identifier 'ObjectProperty'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(79,14): error TS2300: Duplicate identifier 'ChaiPlugin'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(106,14): error TS2300: Duplicate identifier 'AssertionArgs'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(146,21): error TS2300: Duplicate identifier 'Operator'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(148,21): error TS2300: Duplicate identifier 'OperatorComparable'.
../../node_modules/.pnpm/@types+chai@5.2.2/node_modules/@types/chai/index.d.ts(2131,22): error TS2300: Duplicate identifier 'AssertionError'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(17,10): error TS2300: Duplicate identifier 'Message'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(18,10): error TS2300: Duplicate identifier 'ObjectProperty'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(85,10): error TS2300: Duplicate identifier 'ChaiPlugin'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(112,10): error TS2300: Duplicate identifier 'AssertionArgs'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(156,17): error TS2300: Duplicate identifier 'Operator'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(158,17): error TS2300: Duplicate identifier 'OperatorComparable'.
../../node_modules/.pnpm/@vitest+expect@1.6.1/node_modules/@vitest/expect/dist/chai.d.cts(1951,18): error TS2300: Duplicate identifier 'AssertionError'.
src/__tests__/integration-clean.test.ts(69,33): error TS2345: Argument of type 'Record<string, unknown>' is not assignable to parameter of type '{ path: string; pattern: string; } | { path: string; find: string; replace: string; } | { files: string[]; }'.
  Type 'Record<string, unknown>' is missing the following properties from type '{ path: string; find: string; replace: string; }': path, find, replace
src/__tests__/integration.test.ts(69,33): error TS2345: Argument of type 'Record<string, unknown>' is not assignable to parameter of type '{ path: string; pattern: string; } | { path: string; find: string; replace: string; } | { files: string[]; }'.
  Type 'Record<string, unknown>' is missing the following properties from type '{ path: string; find: string; replace: string; }': path, find, replace
[41m[30m ELIFECYCLE [39m[49m [31mCommand failed with exit code 2.[39m

> nx run @cortex-os/agents:build


> @cortex-os/agents@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/agents
> tsc


> nx run @cortex-os/model-gateway:build


> @cortex-os/model-gateway@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/model-gateway
> tsc -p tsconfig.json


> nx run @cortex-os/rag:build


> @cortex-os/rag@0.0.1 build /Users/jamiecraik/.Cortex-OS/packages/rag
> tsc -p tsconfig.json

src/integrations/archon-mcp.ts(472,15): error TS2339: Property 'taskId' does not exist on type '{}'.
src/integrations/archon-mcp.ts(474,13): error TS2339: Property 'taskId' does not exist on type '{}'.
src/integrations/archon-mcp.ts(486,13): error TS2339: Property 'taskId' does not exist on type '{}'.
src/integrations/archon-mcp.ts(488,11): error TS2339: Property 'taskId' does not exist on type '{}'.
src/integrations/archon-mcp.ts(495,18): error TS2339: Property 'taskId' does not exist on type '{}'.
[41m[30m ELIFECYCLE [39m[49m [31mCommand failed with exit code 2.[39m

> nx run @cortex-os/simlab:build


> @cortex-os/simlab@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/simlab
> tsc -p tsconfig.json

src/a2a.ts(1,37): error TS2307: Cannot find module '@cortex-os/a2a-contracts/schema-registry-types' or its corresponding type declarations.
src/a2a.ts(2,31): error TS2307: Cannot find module '@cortex-os/a2a-contracts/topic-acl' or its corresponding type declarations.
src/a2a.ts(3,44): error TS2307: Cannot find module '@cortex-os/a2a-core/bus' or its corresponding type declarations.
src/a2a.ts(4,32): error TS2307: Cannot find module '@cortex-os/a2a-core/schema-registry' or its corresponding type declarations.
src/a2a.ts(5,32): error TS2307: Cannot find module '@cortex-os/a2a-core/transport' or its corresponding type declarations.
src/a2a.ts(6,24): error TS2307: Cannot find module '@cortex-os/a2a-transport/inproc' or its corresponding type declarations.
src/events/simlab-events.ts(1,32): error TS2307: Cannot find module '@cortex-os/a2a-contracts/envelope' or its corresponding type declarations.
[41m[30m ELIFECYCLE [39m[49m [31mCommand failed with exit code 2.[39m

> nx run @cortex-os/mvp-core:build


> @cortex-os/mvp-core@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-core
> tsup src/index.ts --dts --format esm --clean

[34mCLI[39m Building entry: src/index.ts
[34mCLI[39m Using tsconfig: tsconfig.json
[34mCLI[39m tsup v8.5.0
[34mCLI[39m Target: es2022
[34mCLI[39m Cleaning output folder
[34mESM[39m Build start
[32mESM[39m [1mdist/index.js [22m[32m3.24 KB[39m
[32mESM[39m ⚡️ Build success in 11ms
[34mDTS[39m Build start
[32mDTS[39m ⚡️ Build success in 494ms
[32mDTS[39m [1mdist/index.d.ts [22m[32m4.01 KB[39m

> nx run @cortex-os/lib:build


> @cortex-os/lib@1.0.0 build /Users/jamiecraik/.Cortex-OS/libs/typescript/lib
> tsc -p tsconfig.json


> nx run @cortex-os/contracts:test


> @cortex-os/contracts@1.0.0 test /Users/jamiecraik/.Cortex-OS/libs/typescript/contracts
> vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/libs/typescript/contracts[39m

 [32m✓[39m tests/sandbox-audit-events.contract.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.telemetry.contract.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/evidence.contract.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.subagents.contract.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/diagnostics.contract.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.tool-layer.contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.agent-network.contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.intelligence-scheduler.contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/rag-events.evidence.contract.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.events.contract.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/model-gateway-events.evidence.contract.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/orchestration-no.master-agent-loop.contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/cloudevents-validation.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 22[2mms[22m[39m

[2m Test Files [22m [1m[32m13 passed[39m[22m[90m (13)[39m
[2m      Tests [22m [1m[32m52 passed[39m[22m[90m (52)[39m
[2m   Start at [22m 00:27:20
[2m   Duration [22m 363ms[2m (transform 214ms, setup 0ms, collect 560ms, tests 50ms, environment 1ms, prepare 885ms)[22m


> nx run @cortex-os/a2a-contracts:test


> @cortex-os/a2a-contracts@0.2.0 test /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-contracts
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:21.002Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:21.009Z] [VITEST-SAFE] [WARN] Low system memory: 175MB free. Consider running memory cleanup first.
[2025-09-18T23:27:21.009Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:21.026Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:21.026Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-contracts[39m

 [31m❯[39m envelope.evidence.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 4[2mms[22m[39m
[31m   [31m×[31m withEvidence helper[2m > [22mattaches evidence array immutably[39m[32m 3[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'parse')[39m
[31m   [31m×[31m withEvidence helper[2m > [22mreplaces existing evidence when called again[39m[32m 0[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'parse')[39m
   [32m✓[39m withEvidence helper[2m > [22mrejects invalid evidence (empty item)[32m 0[2mms[22m[39m
 [32m✓[39m tests/negative/envelope.malformed.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/envelope.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m envelope.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/topic-acl.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 2 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m envelope.evidence.test.ts[2m > [22mwithEvidence helper[2m > [22mattaches evidence array immutably
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'parse')[39m
[90m [2m❯[22m withEvidence src/envelope.ts:[2m106:37[22m[39m
[36m [2m❯[22m envelope.evidence.test.ts:[2m15:20[22m[39m
    [90m 13| [39m   { id[33m:[39m [32m'e2'[39m[33m,[39m uri[33m:[39m [32m'https://example.com/doc'[39m }[33m,[39m
    [90m 14| [39m  ][33m;[39m
    [90m 15| [39m  [35mconst[39m enriched [33m=[39m [34mwithEvidence[39m(base[33m,[39m evidence)[33m;[39m
    [90m   | [39m                   [31m^[39m
    [90m 16| [39m  [34mexpect[39m(enriched)[33m.[39mnot[33m.[39m[34mtoBe[39m(base)[33m;[39m
    [90m 17| [39m  [34mexpect[39m(enriched[33m.[39mdata[33m.[39mevidence[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/2]⎯[22m[39m

[41m[1m FAIL [22m[49m envelope.evidence.test.ts[2m > [22mwithEvidence helper[2m > [22mreplaces existing evidence when called again
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'parse')[39m
[90m [2m❯[22m withEvidence src/envelope.ts:[2m106:37[22m[39m
[36m [2m❯[22m envelope.evidence.test.ts:[2m29:21[22m[39m
    [90m 27| [39m   data[33m:[39m {}[33m,[39m
    [90m 28| [39m  })[33m;[39m
    [90m 29| [39m  [35mconst[39m enriched1 [33m=[39m [34mwithEvidence[39m(base[33m,[39m [{ text[33m:[39m [32m'first'[39m }])[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m 30| [39m  [35mconst[39m enriched2 [33m=[39m [34mwithEvidence[39m(enriched1[33m,[39m [{ text[33m:[39m [32m'second'[39m }])[33m;[39m
    [90m 31| [39m  [34mexpect[39m(enriched2[33m.[39mdata[33m.[39mevidence[[34m0[39m][33m.[39mtext)[33m.[39m[34mtoBe[39m([32m'second'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/2]⎯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 00:27:21
[2m   Duration [22m 169ms[2m (transform 29ms, setup 0ms, collect 43ms, tests 6ms, environment 0ms, prepare 25ms)[22m

[2025-09-18T23:27:21.818Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:21.818Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:21.818Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/a2a-core:test


> @cortex-os/a2a-core@0.2.0 test /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-core
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:22.053Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:22.060Z] [VITEST-SAFE] [WARN] Low system memory: 183MB free. Consider running memory cleanup first.
[2025-09-18T23:27:22.060Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:22.077Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:22.077Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-core[39m

 [31m❯[39m tests/bus.idempotency.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[90m 5[2mms[22m[39m
[31m   [31m×[31m bus idempotency & correlation edge cases[2m > [22mdrops duplicate events with same id when idempotency enabled[90m 4[2mms[22m[31m[39m
[31m     → [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[31m   [31m×[31m bus idempotency & correlation edge cases[2m > [22mprocesses duplicates when idempotency disabled[90m 0[2mms[22m[31m[39m
[31m     → [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[31m   [31m×[31m bus idempotency & correlation edge cases[2m > [22mauto-generates correlationId when missing[90m 0[2mms[22m[31m[39m
[31m     → [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[31m   [31m×[31m bus idempotency & correlation edge cases[2m > [22mpreserves provided correlationId[90m 0[2mms[22m[31m[39m
[31m     → [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  },
  {
    "validation": "uuid",
    "code": "invalid_string",
    "message": "Invalid uuid",
    "path": [
      "correlationId"
    ]
  }
][39m
 [32m✓[39m tests/outbox-processor.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m✓[39m src/__tests__/telemetry.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m✓[39m src/send.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32m✓[39m test/trace-context-manager.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [32m✓[39m src/__tests__/bus.acl.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m tests/outbox-publisher.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m src/__tests__/redaction.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m tests/outbox-envelope.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/transport.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 4 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/bus.idempotency.test.ts[2m > [22mbus idempotency & correlation edge cases[2m > [22mdrops duplicate events with same id when idempotency enabled
[31m[1mZodError[22m: [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[90m [2m❯[22m Object.get error [as error] ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m39:31[22m[39m
[90m [2m❯[22m ZodEffects.parse ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m114:22[22m[39m
[90m [2m❯[22m Module.createEnvelope ../a2a-contracts/src/envelope.ts:[2m77:18[22m[39m
[36m [2m❯[22m tests/bus.idempotency.test.ts:[2m40:15[22m[39m
    [90m 38| [39m  ])[33m;[39m
    [90m 39| [39m
    [90m 40| [39m  [35mconst[39m env [33m=[39m [34mcreateEnvelope[39m({
    [90m   | [39m              [31m^[39m
    [90m 41| [39m   type[33m:[39m [32m'evt.test'[39m[33m,[39m
    [90m 42| [39m   source[33m:[39m [32m'test'[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/4]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/bus.idempotency.test.ts[2m > [22mbus idempotency & correlation edge cases[2m > [22mprocesses duplicates when idempotency disabled
[31m[1mZodError[22m: [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[90m [2m❯[22m Object.get error [as error] ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m39:31[22m[39m
[90m [2m❯[22m ZodEffects.parse ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m114:22[22m[39m
[90m [2m❯[22m Module.createEnvelope ../a2a-contracts/src/envelope.ts:[2m77:18[22m[39m
[36m [2m❯[22m tests/bus.idempotency.test.ts:[2m70:15[22m[39m
    [90m 68| [39m   }[33m,[39m
    [90m 69| [39m  ])[33m;[39m
    [90m 70| [39m  [35mconst[39m env [33m=[39m [34mcreateEnvelope[39m({
    [90m   | [39m              [31m^[39m
    [90m 71| [39m   type[33m:[39m [32m'evt.test2'[39m[33m,[39m
    [90m 72| [39m   source[33m:[39m [32m'test'[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/4]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/bus.idempotency.test.ts[2m > [22mbus idempotency & correlation edge cases[2m > [22mauto-generates correlationId when missing
[31m[1mZodError[22m: [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  }
][39m
[90m [2m❯[22m Object.get error [as error] ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m39:31[22m[39m
[90m [2m❯[22m ZodEffects.parse ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m114:22[22m[39m
[90m [2m❯[22m Module.createEnvelope ../a2a-contracts/src/envelope.ts:[2m77:18[22m[39m
[36m [2m❯[22m tests/bus.idempotency.test.ts:[2m95:15[22m[39m
    [90m 93| [39m   }[33m,[39m
    [90m 94| [39m  ])[33m;[39m
    [90m 95| [39m  [35mconst[39m env [33m=[39m [34mcreateEnvelope[39m({ type[33m:[39m [32m'evt.corr'[39m[33m,[39m source[33m:[39m [32m'test'[39m[33m,[39m data[33m:[39m…
    [90m   | [39m              [31m^[39m
    [90m 96| [39m  [35mawait[39m bus[33m.[39m[34mpublish[39m(env)[33m;[39m
    [90m 97| [39m  [34mexpect[39m(observed[33m?.[39mcorrelationId)[33m.[39m[34mtoBe[39m(observed[33m?.[39mid)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/4]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/bus.idempotency.test.ts[2m > [22mbus idempotency & correlation edge cases[2m > [22mpreserves provided correlationId
[31m[1mZodError[22m: [
  {
    "code": "custom",
    "message": "Source must be a valid URI",
    "path": [
      "source"
    ]
  },
  {
    "validation": "uuid",
    "code": "invalid_string",
    "message": "Invalid uuid",
    "path": [
      "correlationId"
    ]
  }
][39m
[90m [2m❯[22m Object.get error [as error] ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m39:31[22m[39m
[90m [2m❯[22m ZodEffects.parse ../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js:[2m114:22[22m[39m
[90m [2m❯[22m Module.createEnvelope ../a2a-contracts/src/envelope.ts:[2m77:18[22m[39m
[36m [2m❯[22m tests/bus.idempotency.test.ts:[2m114:15[22m[39m
    [90m112| [39m   }[33m,[39m
    [90m113| [39m  ])[33m;[39m
    [90m114| [39m  [35mconst[39m env [33m=[39m [34mcreateEnvelope[39m({
    [90m   | [39m              [31m^[39m
    [90m115| [39m   type[33m:[39m [32m'evt.corr2'[39m[33m,[39m
    [90m116| [39m   source[33m:[39m [32m'test'[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/4]⎯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[90m (10)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[90m (19)[39m
[2m   Start at [22m 00:27:22
[2m   Duration [22m 230ms[2m (transform 63ms, setup 0ms, collect 87ms, tests 20ms, environment 0ms, prepare 26ms)[22m

[2025-09-18T23:27:22.671Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:22.671Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:22.671Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/telemetry:test


> nx run @cortex-os/observability:test


> @cortex-os/observability@1.0.0 test /Users/jamiecraik/.Cortex-OS/packages/observability
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:23.615Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:23.620Z] [VITEST-SAFE] [WARN] Low system memory: 163MB free. Consider running memory cleanup first.
[2025-09-18T23:27:23.620Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:23.635Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:23.635Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90m/Users/jamiecraik/.Cortex-OS/packages/observability[39m

 [33m❯[39m tests/mcp-runtime.test.ts [2m ([22m[2m5 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 7[2mms[22m[39m
[31m   [33m❯[31m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22msearchLogs redacts sensitive metadata and respects limits[39m
[31m     → expected undefined to be '[REDACTED]' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22mevaluateAlert triggers rule and emits alert event[39m
[31m     → expected undefined to be 'observability.alert.triggered' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22mgenerateDashboard produces holistic telemetry summary[39m
[31m     → expected false to be true // Object.is equality[39m
 [33m❯[39m tests/mcp-integration.test.ts [2m ([22m[2m5 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[90m 2[2mms[22m[39m
[31m   [33m❯[31m tests/mcp-integration.test.ts[2m > [22mobservability MCP integration[2m > [22mvalidates cross-package communication via alert events[39m
[31m     → expected undefined to be 'observability.alert.triggered' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp-integration.test.ts[2m > [22mobservability MCP integration[2m > [22mmaintains security compliance for log search results[39m
[31m     → expected undefined to be '[REDACTED]' // Object.is equality[39m
 [33m❯[39m tests/mcp.tools.test.ts [2m ([22m[2m5 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 1[2mms[22m[39m
[31m   [33m❯[31m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mvalidates and sanitizes create_trace input[39m
[31m     → validateObservabilityToolInput is not a function[39m
[31m   [33m❯[31m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mthrows ObservabilityToolError for invalid trace ID[39m
[31m     → expected undefined to be 'validation_error' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mrejects unsafe tag keys[39m
[31m     → expected undefined to be 'security_error' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mrejects time ranges where start is after end[39m
[31m     → expected undefined to be 'validation_error' // Object.is equality[39m
[31m   [33m❯[31m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mcreates structured error responses and logs validation issues[39m
[31m     → ObservabilityToolError is not a constructor[39m
 [32m✓[39m tests/initialize.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m tests/a2a-bus.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m✓[39m tests/logging.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m tests/metrics.test.ts [2m ([22m[2m2 tests[22m[2m)[22m
 [32m✓[39m tests/index.exports.test.ts [2m ([22m[2m2 tests[22m[2m)[22m
 [32m✓[39m tests/tracing.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m tests/flamegraph.test.ts [2m ([22m[2m1 test[22m[2m)[22m
 [32m✓[39m tests/ulids.test.ts [2m ([22m[2m2 tests[22m[2m)[22m

[31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 10 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp-integration.test.ts[2m > [22mobservability MCP integration[2m > [22mvalidates cross-package communication via alert events
[31m[1mAssertionError[22m: expected undefined to be 'observability.alert.triggered' // Object.is equality[39m

[32m- Expected:[39m 
"observability.alert.triggered"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp-integration.test.ts:[2m166:27[22m[39m
    [90m164| [39m  [34mexpect[39m(result[33m.[39mtriggered)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m165| [39m  [34mexpect[39m(events)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m166| [39m  [34mexpect[39m(events[[34m0[39m][33m?.[39mtype)[33m.[39m[34mtoBe[39m([32m'observability.alert.triggered'[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m167| [39m })[33m;[39m
    [90m168| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp-integration.test.ts[2m > [22mobservability MCP integration[2m > [22mmaintains security compliance for log search results
[31m[1mAssertionError[22m: expected undefined to be '[REDACTED]' // Object.is equality[39m

[32m- Expected:[39m 
"[REDACTED]"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp-integration.test.ts:[2m220:27[22m[39m
    [90m218| [39m
    [90m219| [39m  [35mconst[39m metadata [33m=[39m response[33m.[39mlogs[[34m0[39m][33m?.[39mmetadata[33m;[39m
    [90m220| [39m  [34mexpect[39m(metadata[33m?.[39mtoken)[33m.[39m[34mtoBe[39m([32m'[REDACTED]'[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m221| [39m })[33m;[39m
    [90m222| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22msearchLogs redacts sensitive metadata and respects limits
[31m[1mAssertionError[22m: expected undefined to be '[REDACTED]' // Object.is equality[39m

[32m- Expected:[39m 
"[REDACTED]"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp-runtime.test.ts:[2m177:27[22m[39m
    [90m175| [39m  [34mexpect[39m(result[33m.[39mlogs)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m176| [39m  [35mconst[39m metadata [33m=[39m result[33m.[39mlogs[[34m0[39m][33m?.[39mmetadata [35mas[39m [33mRecord[39m[33m<[39mstring[33m,[39m unknown[33m>[39m[33m;[39m
    [90m177| [39m  [34mexpect[39m(metadata[33m?.[39mtoken)[33m.[39m[34mtoBe[39m([32m'[REDACTED]'[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m178| [39m  [35mconst[39m request [33m=[39m metadata[33m?.[39mrequest [35mas[39m [33mRecord[39m[33m<[39mstring[33m,[39m unknown[33m>[39m[33m;[39m
    [90m179| [39m  [35mconst[39m details [33m=[39m request[33m?.[39mdetails [35mas[39m [33mRecord[39m[33m<[39mstring[33m,[39m unknown[33m>[39m[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22mevaluateAlert triggers rule and emits alert event
[31m[1mAssertionError[22m: expected undefined to be 'observability.alert.triggered' // Object.is equality[39m

[32m- Expected:[39m 
"observability.alert.triggered"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp-runtime.test.ts:[2m209:27[22m[39m
    [90m207| [39m  [34mexpect[39m(outcome[33m.[39mcurrentValue)[33m.[39m[34mtoBeGreaterThan[39m([34m200[39m)[33m;[39m
    [90m208| [39m  [34mexpect[39m(events)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m209| [39m  [34mexpect[39m(events[[34m0[39m][33m?.[39mtype)[33m.[39m[34mtoBe[39m([32m'observability.alert.triggered'[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m210| [39m  [34mexpect[39m(events[[34m0[39m][33m?.[39mdata[33m.[39mseverity)[33m.[39m[34mtoBe[39m([32m'high'[39m)[33m;[39m
    [90m211| [39m })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp-runtime.test.ts[2m > [22mobservability MCP runtime[2m > [22mgenerateDashboard produces holistic telemetry summary
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m❯[22m tests/mcp-runtime.test.ts:[2m233:25[22m[39m
    [90m231| [39m   (metadata) [33m=>[39m (metadata [35mas[39m [33mRecord[39m[33m<[39mstring[33m,[39m unknown[33m>[39m)[33m?.[39mtoken [33m===[39m [32m'[RE[39m…
    [90m232| [39m  )[33m;[39m
    [90m233| [39m  [34mexpect[39m(redactedToken)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                        [31m^[39m
    [90m234| [39m })[33m;[39m
    [90m235| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mvalidates and sanitizes create_trace input
[31m[1mTypeError[22m: validateObservabilityToolInput is not a function[39m
[36m [2m❯[22m tests/mcp.tools.test.ts:[2m36:18[22m[39m
    [90m 34| [39m
    [90m 35| [39m [34mit[39m([32m'validates and sanitizes create_trace input'[39m[33m,[39m () [33m=>[39m {
    [90m 36| [39m  [35mconst[39m result [33m=[39m [34mvalidateObservabilityToolInput[39m([32m'create_trace'[39m[33m,[39m {
    [90m   | [39m                 [31m^[39m
    [90m 37| [39m   traceId[33m:[39m [32m'0123456789abcdef0123456789abcdef'[39m[33m,[39m
    [90m 38| [39m   operationName[33m:[39m [32m' fetch-users '[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mthrows ObservabilityToolError for invalid trace ID
[31m[1mAssertionError[22m: expected undefined to be 'validation_error' // Object.is equality[39m

[32m- Expected:[39m 
"validation_error"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp.tools.test.ts:[2m81:22[22m[39m
    [90m 79| [39m  })()[33m;[39m
    [90m 80| [39m
    [90m 81| [39m  [34mexpect[39m(error[33m.[39mcode)[33m.[39m[34mtoBe[39m([32m'validation_error'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 82| [39m  [34mexpect[39m(error[33m.[39mdetails)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34marrayContaining[39m([expect[33m.[39m[34mstringC[39m…
    [90m 83| [39m  [34mexpect[39m(loggerSpies[33m.[39mwarn)[33m.[39m[34mtoHaveBeenCalledWith[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mrejects unsafe tag keys
[31m[1mAssertionError[22m: expected undefined to be 'security_error' // Object.is equality[39m

[32m- Expected:[39m 
"security_error"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp.tools.test.ts:[2m114:22[22m[39m
    [90m112| [39m  })()[33m;[39m
    [90m113| [39m
    [90m114| [39m  [34mexpect[39m(error[33m.[39mcode)[33m.[39m[34mtoBe[39m([32m'security_error'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m115| [39m  [34mexpect[39m(loggerSpies[33m.[39mwarn)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m116| [39m   expect[33m.[39m[34mobjectContaining[39m({ tool[33m:[39m [32m'record_metric'[39m })[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mrejects time ranges where start is after end
[31m[1mAssertionError[22m: expected undefined to be 'validation_error' // Object.is equality[39m

[32m- Expected:[39m 
"validation_error"

[31m+ Received:[39m 
undefined

[36m [2m❯[22m tests/mcp.tools.test.ts:[2m141:22[22m[39m
    [90m139| [39m  })()[33m;[39m
    [90m140| [39m
    [90m141| [39m  [34mexpect[39m(error[33m.[39mcode)[33m.[39m[34mtoBe[39m([32m'validation_error'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m142| [39m  [34mexpect[39m(error[33m.[39mmessage)[33m.[39m[34mtoContain[39m([32m'startTime'[39m)[33m;[39m
    [90m143| [39m })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/10]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/mcp.tools.test.ts[2m > [22mobservability MCP tools validation[2m > [22mcreates structured error responses and logs validation issues
[31m[1mTypeError[22m: ObservabilityToolError is not a constructor[39m
[36m [2m❯[22m tests/mcp.tools.test.ts:[2m146:15[22m[39m
    [90m144| [39m
    [90m145| [39m [34mit[39m([32m'creates structured error responses and logs validation issues'[39m[33m,[39m (…
    [90m146| [39m  [35mconst[39m err [33m=[39m [35mnew[39m [33mObservabilityToolError[39m([32m'validation_error'[39m[33m,[39m [32m'bad inpu[39m…
    [90m   | [39m              [31m^[39m
    [90m147| [39m
    [90m148| [39m  [35mconst[39m response [33m=[39m [34mcreateObservabilityErrorResponse[39m([32m'get_metrics'[39m[33m,[39m err…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/10]⎯[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m10 failed[39m[22m[2m | [22m[1m[32m20 passed[39m[22m[90m (30)[39m
[2m   Start at [22m 00:27:24
[2m   Duration [22m 1.65s[2m (transform 171ms, setup 0ms, collect 506ms, tests 15ms, environment 0ms, prepare 35ms)[22m

[2025-09-18T23:27:25.699Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:25.699Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:25.699Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/a2a-transport:test


> @cortex-os/a2a-transport@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-transport
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:25.940Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:25.947Z] [VITEST-SAFE] [WARN] Low system memory: 129MB free. Consider running memory cleanup first.
[2025-09-18T23:27:25.947Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:25.965Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:25.965Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-transport[39m

 [32m✓[39m src/__tests__/stdio.test.ts [2m([22m[2m9 tests[22m[2m)[22m[90m 14[2mms[22m[39m
 [32m✓[39m tests/stdio.integration.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 412[2mms[22m[39m
   [33m[2m✓[22m[39m stdio transport[2m > [22mterminates child and cleans subscriptions on unsubscribe [33m412[2mms[22m[39m
 [32m✓[39m test/type.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m

[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[32m11 passed[39m[22m[90m (11)[39m
[2m   Start at [22m 00:27:26
[2m   Duration [22m 884ms[2m (transform 117ms, setup 0ms, collect 336ms, tests 426ms, environment 0ms, prepare 23ms)[22m

[2025-09-18T23:27:27.194Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:27.194Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:27:27.194Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run a2a:test


> nx run @cortex-os/policy:test


> @cortex-os/policy@0.1.0 pretest /Users/jamiecraik/.Cortex-OS/packages/policy
> pnpm build


> @cortex-os/policy@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/policy
> echo "No build step required for this package"

No build step required for this package

> @cortex-os/policy@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/policy
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:29.286Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:29.293Z] [VITEST-SAFE] [WARN] Low system memory: 22MB free. Consider running memory cleanup first.
[2025-09-18T23:27:29.293Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:29.310Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:29.310Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/policy[39m

 [31m❯[39m __tests__/policy-engine.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 5[2mms[22m[39m
   [32m✓[39m policy engine[2m > [22mvalidates allowed action and fsScope[32m 1[2mms[22m[39m
[31m   [31m×[31m policy engine[2m > [22menforces simple rate limit[39m[32m 3[2mms[22m[39m
[31m     → expected [Function] to not throw an error but 'Error: rate limit exceeded' was thrown[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 1 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m __tests__/policy-engine.test.ts[2m > [22mpolicy engine[2m > [22menforces simple rate limit
[31m[1mAssertionError[22m: expected [Function] to not throw an error but 'Error: rate limit exceeded' was thrown[39m

[32m- Expected:[39m 
undefined

[31m+ Received:[39m 
"Error: rate limit exceeded"

[36m [2m❯[22m __tests__/policy-engine.test.ts:[2m31:48[22m[39m
    [90m 29| [39m  })[33m;[39m
    [90m 30| [39m
    [90m 31| [39m  [34mexpect[39m(() [33m=>[39m [34menforce[39m(grant[33m,[39m [32m'read'[39m[33m,[39m {}))[33m.[39mnot[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m   | [39m                                               [31m^[39m
    [90m 32| [39m  [34mexpect[39m(() [33m=>[39m [34menforce[39m(grant[33m,[39m [32m'read'[39m[33m,[39m {}))[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m 33| [39m })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m   Start at [22m 00:27:29
[2m   Duration [22m 144ms[2m (transform 15ms, setup 0ms, collect 18ms, tests 5ms, environment 0ms, prepare 26ms)[22m

[2025-09-18T23:27:29.886Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:29.886Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:29.886Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/memories:test


> @cortex-os/memories@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/memories
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:30.132Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:30.139Z] [VITEST-SAFE] [WARN] Low system memory: 52MB free. Consider running memory cleanup first.
[2025-09-18T23:27:30.139Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:30.156Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:30.156Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/memories[39m

Sourcemap for "/Users/jamiecraik/.Cortex-OS/libs/python/exec.js" points to missing source files
 [32m✓[39m tests/mlx-env.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 53[2mms[22m[39m
[90mstdout[2m | tests/mcp/memory.integration.spec.ts[2m > [22m[2mmemories MCP integration[2m > [22m[2mexecutes memories.store via MCP client and sanitizes sensitive output
[22m[39m[memories:mcp:memories.store] completed {
  correlationId: [32m'39a5584f-8c5f-4dcc-91c6-caa2afb77086'[39m,
  durationMs: [33m1[39m
}

[90mstdout[2m | tests/mcp/memory.integration.spec.ts[2m > [22m[2mmemories MCP integration[2m > [22m[2mcompletes maximum length memories.store payload within performance budget
[22m[39m[memories:mcp:memories.store] completed {
  correlationId: [32m'bc87c00a-abd3-4b2d-af39-d8bf99e1a48a'[39m,
  durationMs: [33m0[39m
}

[90mstderr[2m | tests/mcp/memory.integration.spec.ts[2m > [22m[2mmemories MCP integration[2m > [22m[2msurfaces validation errors for invalid memories.search requests
[22m[39m[memories:mcp:memories.search] validation_error: Invalid input provided {
  correlationId: [32m'2d2d876b-c944-4994-b7ce-5bd294467875'[39m,
  details: [ [32m'limit: Number must be greater than 0'[39m ],
  durationMs: [33m0[39m
}

[90mstderr[2m | tests/mcp/memory.integration.spec.ts[2m > [22m[2mmemories MCP integration[2m > [22m[2menforces metadata security guards when invoked over MCP
[22m[39m[memories:mcp:memories.store] security_error: Unsafe metadata key "constructor" detected {
  correlationId: [32m'dd6efacd-9dd7-403f-8503-8c61c954cb84'[39m,
  details: [ [32m'Metadata key "constructor" is not allowed'[39m ],
  durationMs: [33m0[39m
}

 [32m✓[39m tests/mcp/memory.integration.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m✓[39m tests/memory-cache.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 122[2mms[22m[39m
 [32m✓[39m tests/load-recall.enhanced.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/mcp.tools.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/service.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/integ-mlx-sqlite.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/embedder-factory.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/mcp/tools.contract.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/encryption.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/store-factory.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/purge-expired-verification.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/pending-queue.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/policy.encryption.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/store-from-env.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/ttl.expiration.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/privacy.redaction.enhanced.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/persistence.prisma.roundtrip.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/embedders.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/mlx-service.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/compaction.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/short-long-store.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/contract.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/consolidation.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/decay.heuristics.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/in-memory-store.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/namespace-isolation.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/load-recall.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/queries.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/persistence.roundtrip.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [2m[90m↓[39m[22m tests/sqlite-store.spec.ts [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
 [2m[90m↓[39m[22m tests/vector-search-verification.spec.ts [2m([22m[2m4 tests[22m[2m | [22m[33m4 skipped[39m[2m)[22m

[2m Test Files [22m [1m[32m30 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (32)[39m
[2m      Tests [22m [1m[32m84 passed[39m[22m[2m | [22m[33m7 skipped[39m[90m (91)[39m
[2m   Start at [22m 00:27:30
[2m   Duration [22m 708ms[2m (transform 167ms, setup 0ms, collect 337ms, tests 214ms, environment 0ms, prepare 26ms)[22m

[2025-09-18T23:27:31.314Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:31.315Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:27:31.315Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run @cortex-os/orchestration:test


> @cortex-os/orchestration@0.1.0 pretest /Users/jamiecraik/.Cortex-OS/packages/orchestration
> pnpm build


> @cortex-os/orchestration@0.1.0 build /Users/jamiecraik/.Cortex-OS/packages/orchestration
> echo "No build step required for this package"

No build step required for this package

> @cortex-os/orchestration@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/orchestration
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:31.671Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:31.678Z] [VITEST-SAFE] [WARN] Low system memory: 30MB free. Consider running memory cleanup first.
[2025-09-18T23:27:31.678Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:31.697Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:31.697Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/orchestration[39m

[90mstdout[2m | tests/mcp-tools.test.ts[2m > [22m[2mworkflow orchestration handler[2m > [22m[2msanitizes input and formats orchestration summary
[22m[39m[orchestration:mcp:orchestration.workflow.execute] completed {
  correlationId: [32m'3919ce8c-02b5-4e80-ad87-305cb739d024'[39m,
  timestamp: [32m'2025-09-18T23:27:32.496Z'[39m
}

[90mstderr[2m | tests/mcp-tools.test.ts[2m > [22m[2mworkflow orchestration handler[2m > [22m[2mreturns structured validation errors
[22m[39m[orchestration:mcp:orchestration.workflow.execute] validation_error: Invalid input provided {
  correlationId: [32m'64c9b96c-7900-425f-bb68-28e6ec601e6e'[39m,
  details: [
    [32m'workflowName: String must contain at least 1 character(s)'[39m,
    [32m'steps: Array must contain at least 1 element(s)'[39m,
    [32m'agents: Required'[39m
  ]
}

[90mstdout[2m | tests/mcp-tools.test.ts[2m > [22m[2mtask management handler[2m > [22m[2mcomputes progress percentages and normalizes fields
[22m[39m[orchestration:mcp:orchestration.task.manage] completed {
  correlationId: [32m'cc58ce50-9ce0-4408-b3b0-2622a44c1b1d'[39m,
  timestamp: [32m'2025-09-18T23:27:32.505Z'[39m
}

[90mstdout[2m | tests/mcp-tools.test.ts[2m > [22m[2mprocess monitoring handler[2m > [22m[2mflags processes that exceed thresholds and records utilization metrics
[22m[39m[orchestration:mcp:orchestration.process.monitor] completed {
  correlationId: [32m'4f2085d6-db66-43f6-a142-96e62f026a8b'[39m,
  timestamp: [32m'2025-09-18T23:27:32.505Z'[39m
}

[90mstderr[2m | tests/mcp-tools.test.ts[2m > [22m[2mprocess monitoring handler[2m > [22m[2msurfaces validation errors for invalid process payloads
[22m[39m[orchestration:mcp:orchestration.process.monitor] validation_error: Invalid input provided {
  correlationId: [32m'afe9036a-a744-49a4-b7cc-9032854f0f44'[39m,
  details: [
    [32m'processes.0.pid: Number must be greater than 0'[39m,
    [32m'processes.0.name: String must contain at least 1 character(s)'[39m,
    [32m'processes.0.cpu: Number must be less than or equal to 100'[39m,
    [32m'processes.0.memoryMb: Number must be greater than or equal to 0'[39m
  ]
}

 [32m✓[39m tests/mcp-tools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 337[2mms[22m[39m
 [32m✓[39m tests/model-selection.integration.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m✓[39m tests/policy-guards.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould track cache hit rate accurately
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}

[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould expire cache entries after TTL
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould enforce cache size limits with LRU eviction
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}

[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould provide accurate memory usage estimates
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould handle validation metrics correctly
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.hits","value":1}

[90mstdout[2m | tests/cache-ttl-bounds.test.ts[2m > [22m[2mCache TTL & Bounds Tests[2m > [22m[2mshould use structured logging for unreachable steps
[22m[39m{"cache_key":"fd05ceb4e2176587af55858540308742","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":3,"unit":"ms","value":0}
{"cache_key":"fd05ceb4e2176587af55858540308742","level":"info","message":"counter.validation.cache.sets","value":1}

 [32m✓[39m tests/cache-ttl-bounds.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m✓[39m tests/execution-harness.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstderr[2m | src/lib/outbox/outbox/tests/service.test.ts[2m > [22m[2mOutbox Service[2m > [22m[2mshould send a message and update its status
[22m[39mSending message 40a4cd6b-dcfc-43f3-8a49-bdde85806b0b to http://example.com/test

[90mstderr[2m | src/lib/outbox/outbox/tests/service.test.ts[2m > [22m[2mOutbox Service[2m > [22m[2mshould move a message to the poison queue after multiple failures
[22m[39mSending message 10e6f724-051b-4af5-b3ec-6312f11dc9ca to http://example.com/test

[90mstderr[2m | src/lib/outbox/outbox/tests/service.test.ts[2m > [22m[2mOutbox Service[2m > [22m[2mshould move a message to the poison queue after multiple failures
[22m[39mSending message 10e6f724-051b-4af5-b3ec-6312f11dc9ca to http://example.com/test

[90mstderr[2m | src/lib/outbox/outbox/tests/service.test.ts[2m > [22m[2mOutbox Service[2m > [22m[2mshould move a message to the poison queue after multiple failures
[22m[39mSending message 10e6f724-051b-4af5-b3ec-6312f11dc9ca to http://example.com/test

 [32m✓[39m src/lib/outbox/outbox/tests/service.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m✓[39m tests/langgraph-foundation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | tests/mcp-tools-core-integration.test.ts[2m > [22m[2morchestration MCP tools integration with core service[2m > [22m[2mpasses sanitized workflow requests to orchestration service and records audit logs
[22m[39m[orchestration:mcp:orchestration.workflow.execute] completed {
  correlationId: [32m'f568c6b6-eb60-43de-b134-d163ae251cac'[39m,
  timestamp: [32m'2025-09-18T23:27:33.088Z'[39m
}

[90mstdout[2m | tests/mcp-tools-core-integration.test.ts[2m > [22m[2morchestration MCP tools integration with core service[2m > [22m[2mreuses cached orchestration result for identical sanitized requests
[22m[39m[orchestration:mcp:orchestration.workflow.execute] completed {
  correlationId: [32m'ff9102d6-fc57-4326-b311-a43b7ff13b90'[39m,
  timestamp: [32m'2025-09-18T23:27:33.088Z'[39m
}

[90mstdout[2m | tests/mcp-tools-core-integration.test.ts[2m > [22m[2morchestration MCP tools integration with core service[2m > [22m[2mreuses cached orchestration result for identical sanitized requests
[22m[39m[orchestration:mcp:orchestration.workflow.execute] completed {
  correlationId: [32m'ff811e6f-9583-4cbe-9e32-e01c57a32a20'[39m,
  timestamp: [32m'2025-09-18T23:27:33.089Z'[39m
}

[90mstderr[2m | tests/mcp-tools-core-integration.test.ts[2m > [22m[2morchestration MCP tools integration with core service[2m > [22m[2mreturns rate limited error when concurrent executions exceed threshold
[22m[39m[orchestration:mcp:orchestration.workflow.execute] rate_limited: Orchestration service is busy {
  correlationId: [32m'7d24d8e3-179a-473f-8f9a-ba02ec56bb61'[39m,
  details: [ [32m'retry_in_ms=10000'[39m ]
}

[90mstdout[2m | tests/mcp-tools-core-integration.test.ts[2m > [22m[2morchestration MCP tools integration with core service[2m > [22m[2mreturns rate limited error when concurrent executions exceed threshold
[22m[39m[orchestration:mcp:orchestration.workflow.execute] completed {
  correlationId: [32m'7aac179e-53df-4a6b-896e-eec84fc17989'[39m,
  timestamp: [32m'2025-09-18T23:27:33.089Z'[39m
}

 [32m✓[39m tests/mcp-tools-core-integration.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/policy-guards-negative.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m __tests__/public-exports.snapshot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/mcp-connector.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | tests/workflow-validator.test.ts[2m > [22m[2mvalidateWorkflow[2m > [22m[2maccepts acyclic workflows
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/workflow-validator.test.ts[2m > [22m[2mvalidateWorkflow[2m > [22m[2mproduces deterministic topological order
[22m[39m{"cache_key":"a8522226668aea986ad6fdc893746194","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":4,"unit":"ms","value":0}
{"cache_key":"a8522226668aea986ad6fdc893746194","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/workflow-validator.test.ts[2m > [22m[2mvalidateWorkflow[2m > [22m[2mrejects cyclic workflows
[22m[39m{"cache_key":"595a9187df721ff66cc76060692550cb","level":"info","message":"counter.validation.cache.misses","value":1}

 [32m✓[39m tests/workflow-validator.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/telemetry.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstdout[2m | tests/execution-planner.test.ts[2m > [22m[2mExecutionPlanner[2m > [22m[2mbuilds a contract-valid plan from an acyclic workflow with correct dependencies
[22m[39m{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"aa853b1cc4f05ebc3fd8a3f99a5aa04c","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/execution-planner.test.ts[2m > [22m[2mExecutionPlanner[2m > [22m[2mhandles branching workflows and computes immediate dependencies
[22m[39m{"cache_key":"a8522226668aea986ad6fdc893746194","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":4,"unit":"ms","value":0}
{"cache_key":"a8522226668aea986ad6fdc893746194","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/execution-planner.test.ts[2m > [22m[2mExecutionPlanner[2m > [22m[2mthrows on cyclic workflows
[22m[39m{"cache_key":"595a9187df721ff66cc76060692550cb","level":"info","message":"counter.validation.cache.misses","value":1}

 [32m✓[39m tests/execution-planner.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstdout[2m | tests/validation-cache-eviction.test.ts[2m > [22m[2mValidationCache eviction[2m > [22m[2mevicts least recently used entry when maxSize exceeded
[22m[39m{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":1,"unit":"ms","value":0}
{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"f26fd1734cebbf81ecbe45c4bcfecbc5","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":2,"unit":"ms","value":0}
{"cache_key":"f26fd1734cebbf81ecbe45c4bcfecbc5","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.hits","value":1}
{"cache_key":"43f8abd50df7434fa17963bc9122eec3","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":3,"unit":"ms","value":0}
{"cache_key":"43f8abd50df7434fa17963bc9122eec3","level":"info","message":"counter.validation.cache.sets","value":1}

[90mstdout[2m | tests/validation-cache-eviction.test.ts[2m > [22m[2mValidationCache eviction[2m > [22m[2mevicts expired entries by TTL during cleanup interval
[22m[39m{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.misses","value":1}
{"has_budget":false,"level":"info","message":"timing.validation.latency.ms","step_count":1,"unit":"ms","value":0}
{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.sets","value":1}
{"cache_key":"2fb99b34878486d3523407354564340f","level":"info","message":"counter.validation.cache.hits","value":1}

 [32m✓[39m tests/validation-cache-eviction.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/basic-scheduler.contract.integration.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/mcp-tool-definitions.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/a2a-bus.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/persona-middleware.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/audit-a2a-adapter.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/branch-executor.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/adaptive-decision-engine.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/execution-plan-serialization.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/error-classifier.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/hitl.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m src/lib/outbox/outbox/tests/debug.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/cloudevents.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/dsp-util.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/resource-manager.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/strategy-selector.contract.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m

[2m Test Files [22m [1m[32m30 passed[39m[22m[90m (30)[39m
[2m      Tests [22m [1m[32m75 passed[39m[22m[90m (75)[39m
[2m   Start at [22m 00:27:32
[2m   Duration [22m 1.24s[2m (transform 229ms, setup 0ms, collect 518ms, tests 559ms, environment 0ms, prepare 30ms)[22m

[2025-09-18T23:27:33.374Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:33.374Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:27:33.374Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run @cortex-os/mcp-core:test


> @cortex-os/mcp-core@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/mcp-core
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:33.616Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:33.622Z] [VITEST-SAFE] [WARN] Low system memory: 101MB free. Consider running memory cleanup first.
[2025-09-18T23:27:33.623Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:33.638Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:33.638Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/mcp-core[39m

 [32m✓[39m tests/request-timeout.client.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32m✓[39m tests/integration.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32m✓[39m tests/client.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32m✓[39m tests/client-stdio.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m✓[39m tests/ping-close.client.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/ws.client.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/testing-utils.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m tests/echo-tool.integration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/tool-contracts.schema.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/tool-registry.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/transport-kind.contract.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m

[2m Test Files [22m [1m[32m11 passed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[32m39 passed[39m[22m[90m (39)[39m
[2m   Start at [22m 00:27:33
[2m   Duration [22m 444ms[2m (transform 50ms, setup 0ms, collect 120ms, tests 195ms, environment 0ms, prepare 26ms)[22m

[2025-09-18T23:27:34.518Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:34.518Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:27:34.518Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run @cortex-os/asbr-schemas:test


> @cortex-os/asbr-schemas@0.1.0 test /Users/jamiecraik/.Cortex-OS/libs/typescript/asbr-schemas
> vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/libs/typescript/asbr-schemas[39m

 [32m✓[39m tests/schemas.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 00:27:34
[2m   Duration [22m 247ms[2m (transform 20ms, setup 0ms, collect 23ms, tests 4ms, environment 0ms, prepare 38ms)[22m


> nx run @cortex-os/kernel:test


> @cortex-os/kernel@1.0.0 test /Users/jamiecraik/.Cortex-OS/packages/kernel
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:35.477Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:35.483Z] [VITEST-SAFE] [WARN] Low system memory: 102MB free. Consider running memory cleanup first.
[2025-09-18T23:27:35.483Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:35.501Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:35.501Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/kernel[39m

 [31m❯[39m tests/nodes.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 10004[2mms[22m[39m
[31m   [31m×[31m PRP nodes[2m > [22mruns strategy, build and evaluation phases[39m[33m 10004[2mms[22m[39m
[31m     → Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[2025-09-18T23:27:46.533Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:46.551Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 143
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run asbr:test


> nx run @cortex-os/types:test


> @cortex-os/types@1.0.0 test /Users/jamiecraik/.Cortex-OS/libs/typescript/types
> vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/libs/typescript/types[39m

No test files found, exiting with code 0

[2minclude: [22m[33m**/*.{test,spec}.?(c|m)[jt]s?(x)[39m
[2mexclude:  [22m[33m**/node_modules/**[2m, [22m**/dist/**[2m, [22m**/cypress/**[2m, [22m**/.{idea,git,cache,output,temp}/**[2m, [22m**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*[39m


> nx run @cortex-os/agui:test


> @cortex-os/agui@0.0.1 test /Users/jamiecraik/.Cortex-OS/packages/agui
> node ../../scripts/vitest-safe.mjs run --config ./vitest.config.ts

[2025-09-18T23:27:47.712Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:47.720Z] [VITEST-SAFE] [WARN] Low system memory: 1758MB free. Consider running memory cleanup first.
[2025-09-18T23:27:47.720Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:47.738Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run --config ./vitest.config.ts
[2025-09-18T23:27:47.738Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/agui[39m

 [31m❯[39m tests/adapter.test.ts [2m([22m[2m0 test[22m[2m)[22m

[31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Suites 1 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/adapter.test.ts[2m [ tests/adapter.test.ts ][22m
[31m[1mError[22m: Failed to load url @cortex-os/contracts/agui (resolved id: @cortex-os/contracts/agui) in /Users/jamiecraik/.Cortex-OS/packages/agui/src/index.ts. Does the file exist?[39m
[90m [2m❯[22m loadAndTransform ../../node_modules/.pnpm/vite@5.4.20_@types+node@22.18.1_less@4.4.1_lightningcss@1.30.1_sass-embedded@1.92.1_sass@1.92.1_terser@5.44.0/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51968:17[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 00:27:48
[2m   Duration [22m 152ms[2m (transform 17ms, setup 0ms, collect 0ms, tests 0ms, environment 0ms, prepare 31ms)[22m

[2025-09-18T23:27:48.457Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:48.457Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:48.457Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/agent-toolkit:test


> @cortex-os/agent-toolkit@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/agent-toolkit
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:48.718Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:48.741Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:48.741Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90m/Users/jamiecraik/.Cortex-OS/packages/agent-toolkit[39m


> nx run @cortex-os/registry:test


> @cortex-os/registry@1.0.0 test /Users/jamiecraik/.Cortex-OS/packages/registry
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:50.246Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:50.255Z] [VITEST-SAFE] [WARN] Low system memory: 1880MB free. Consider running memory cleanup first.
[2025-09-18T23:27:50.255Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:50.278Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:50.278Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/registry[39m

 [31m❯[39m test/schema-registry.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 42[2mms[22m[39m
   [32m✓[39m SchemaRegistry[2m > [22mregisters and retrieves schema with version and hash[32m 32[2mms[22m[39m
[31m   [31m×[31m SchemaRegistry[2m > [22mvalidates event against versioned schema[39m[32m 5[2mms[22m[39m
[31m     → expected { valid: false, …(3) } to match object { valid: true, …(2) }
(1 matching property omitted from actual)[39m
 [32m✓[39m test/unit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 1 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m test/schema-registry.test.ts[2m > [22mSchemaRegistry[2m > [22mvalidates event against versioned schema
[31m[1mAssertionError[22m: expected { valid: false, …(3) } to match object { valid: true, …(2) }
(1 matching property omitted from actual)[39m

[32m- Expected[39m
[31m+ Received[39m

[2m  {[22m
[2m    "schemaId": "runtime-test",[22m
[32m-   "valid": true,[39m
[31m+   "valid": false,[39m
[2m    "version": "1.0.0",[22m
[2m  }[22m

[36m [2m❯[22m test/schema-registry.test.ts:[2m69:20[22m[39m
    [90m 67| [39m   [33m.[39m[34msend[39m(event)
    [90m 68| [39m   [33m.[39m[34mexpect[39m([34m200[39m)[33m;[39m
    [90m 69| [39m  [34mexpect[39m(res[33m.[39mbody)[33m.[39m[34mtoMatchObject[39m({
    [90m   | [39m                   [31m^[39m
    [90m 70| [39m   valid[33m:[39m [35mtrue[39m[33m,[39m
    [90m 71| [39m   schemaId[33m:[39m [32m'runtime-test'[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[2m   Start at [22m 00:27:50
[2m   Duration [22m 587ms[2m (transform 62ms, setup 0ms, collect 326ms, tests 44ms, environment 0ms, prepare 46ms)[22m

[2025-09-18T23:27:51.576Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:51.576Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:51.576Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/mcp-registry:test


> @cortex-os/mcp-registry@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/mcp-registry
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:51.931Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:51.940Z] [VITEST-SAFE] [WARN] Low system memory: 1293MB free. Consider running memory cleanup first.
[2025-09-18T23:27:51.940Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:51.966Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:51.966Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/mcp-registry[39m

 [32m✓[39m tests/fs-store.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32m✓[39m tests/mcp-integration.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32m✓[39m tests/mcp-tools.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/integration.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 98[2mms[22m[39m
 [32m✓[39m tests/mcp-core-integration.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/remove-edge.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m

[2m Test Files [22m [1m[32m6 passed[39m[22m[90m (6)[39m
[2m      Tests [22m [1m[32m59 passed[39m[22m[90m (59)[39m
[2m   Start at [22m 00:27:52
[2m   Duration [22m 936ms[2m (transform 242ms, setup 0ms, collect 554ms, tests 218ms, environment 0ms, prepare 33ms)[22m

[2025-09-18T23:27:53.575Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:53.576Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:27:53.576Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run @cortex-os/model-gateway:test


> @cortex-os/model-gateway@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/model-gateway
> node ../../scripts/vitest-safe.mjs run -c vitest.config.ts

[2025-09-18T23:27:54.138Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:54.151Z] [VITEST-SAFE] [WARN] Low system memory: 1087MB free. Consider running memory cleanup first.
[2025-09-18T23:27:54.151Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:54.173Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run -c vitest.config.ts
[2025-09-18T23:27:54.173Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway[39m

Sourcemap for "/Users/jamiecraik/.Cortex-OS/libs/python/exec.js" points to missing source files
[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2minitialization[2m > [22m[2mshould initialize with available models
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2minitialization[2m > [22m[2mshould handle MLX unavailable gracefully
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould generate embeddings with MLX as primary
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:74:65
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:74:65
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:85:65
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:85:65
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mFallback embedding model nomic-embed-text also failed: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:86:68
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould handle batch embeddings
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould generate chat with Ollama as primary
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when Ollama fails
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when Ollama fails
[22m[39mPrimary chat model llama2 failed, attempting fallback: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:131:63
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when all chat models fail
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when all chat models fail
[22m[39mPrimary chat model llama2 failed, attempting fallback: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:141:63
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mmodel selection[2m > [22m[2mshould select highest priority model
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mmodel selection[2m > [22m[2mshould respect user-specified model if available
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2merror handling[2m > [22m[2mshould provide detailed error information
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX connection timeout
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:206:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2merror handling[2m > [22m[2mshould provide detailed error information
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX connection timeout
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:206:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

[90mstderr[2m | tests/model-router.test.ts[2m > [22m[2mModelRouter[2m > [22m[2mreranking[2m > [22m[2mshould rerank documents using Ollama
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

 [31m❯[39m tests/model-router.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 27[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22minitialization[2m > [22mshould initialize with available models[32m 16[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22minitialization[2m > [22mshould handle MLX unavailable gracefully[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould generate embeddings with MLX as primary[32m 1[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould fallback to Ollama when MLX fails[32m 3[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould throw error when all local models fail[32m 1[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould handle batch embeddings[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould generate chat with Ollama as primary[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould throw error when Ollama fails[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould throw error when all chat models fail[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mmodel selection[2m > [22mshould select highest priority model[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mmodel selection[2m > [22mshould respect user-specified model if available[32m 0[2mms[22m[39m
[31m   [31m×[31m ModelRouter[2m > [22merror handling[2m > [22mshould throw appropriate error when no models available[39m[32m 3[2mms[22m[39m
[31m     → promise resolved "{ …(2) }" instead of rejecting[39m
   [32m✓[39m ModelRouter[2m > [22merror handling[2m > [22mshould provide detailed error information[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mreranking[2m > [22mshould rerank documents using Ollama[32m 0[2mms[22m[39m
[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2minitialization[2m > [22m[2mshould initialize with available models
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2minitialization[2m > [22m[2mshould handle MLX unavailable gracefully
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould generate embeddings with MLX as primary
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:76:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould fallback to Ollama when MLX fails
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:76:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:91:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:91:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould throw error when all local models fail
[22m[39mFallback embedding model nomic-embed-text also failed: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:93:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2membedding generation[2m > [22m[2mshould handle batch embeddings
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould generate chat with Ollama as primary
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when Ollama fails
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when Ollama fails
[22m[39mPrimary chat model llama2 failed, attempting fallback: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:145:40
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when all chat models fail
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mchat generation[2m > [22m[2mshould throw error when all chat models fail
[22m[39mPrimary chat model llama2 failed, attempting fallback: Error: Ollama failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:160:6
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mmodel selection[2m > [22m[2mshould select highest priority model
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mmodel selection[2m > [22m[2mshould respect user-specified model if available
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2merror handling[2m > [22m[2mshould provide detailed error information
[22m[39mPrimary embedding model qwen3-embedding-4b-mlx failed, attempting fallback: Error: MLX connection timeout
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:238:6
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2merror handling[2m > [22m[2mshould provide detailed error information
[22m[39mFallback embedding model qwen3-embedding-8b-mlx also failed: Error: MLX connection timeout
    at [90m/Users/jamiecraik/.Cortex-OS/packages/model-gateway/[39mtests/model-router.test.ts:238:6
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

[90mstderr[2m | tests/model-router.test.js[2m > [22m[2mModelRouter[2m > [22m[2mreranking[2m > [22m[2mshould rerank documents using Ollama
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

 [31m❯[39m tests/model-router.test.js [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 7[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22minitialization[2m > [22mshould initialize with available models[32m 3[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22minitialization[2m > [22mshould handle MLX unavailable gracefully[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould generate embeddings with MLX as primary[32m 1[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould fallback to Ollama when MLX fails[32m 1[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould throw error when all local models fail[32m 1[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22membedding generation[2m > [22mshould handle batch embeddings[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould generate chat with Ollama as primary[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould throw error when Ollama fails[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mchat generation[2m > [22mshould throw error when all chat models fail[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mmodel selection[2m > [22mshould select highest priority model[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mmodel selection[2m > [22mshould respect user-specified model if available[32m 0[2mms[22m[39m
[31m   [31m×[31m ModelRouter[2m > [22merror handling[2m > [22mshould throw appropriate error when no models available[39m[32m 1[2mms[22m[39m
[31m     → promise resolved "{ …(2) }" instead of rejecting[39m
   [32m✓[39m ModelRouter[2m > [22merror handling[2m > [22mshould provide detailed error information[32m 0[2mms[22m[39m
   [32m✓[39m ModelRouter[2m > [22mreranking[2m > [22mshould rerank documents using Ollama[32m 0[2mms[22m[39m
{"level":30,"time":1758238075626,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075633,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075630,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":3.2651249766349792,"msg":"request completed"}
{"level":30,"time":1758238075635,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075634,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.8473339974880219,"msg":"request completed"}
{"level":30,"time":1758238075639,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075636,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.40891599655151367,"msg":"request completed"}
[90mstderr[2m | tests/comprehensive-fixes.test.ts[2m > [22m[2mMCP Ecosystem Fixes Verification[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle complete workflow without errors
[22m[39maudit {"service":"model-gateway","operation":"embeddings","context":{"runId":"unknown"},"data":{"texts":["hello world"]},"timestamp":"2025-09-18T23:27:55.640Z"}

[90mstderr[2m | tests/comprehensive-fixes.test.ts[2m > [22m[2mMCP Ecosystem Fixes Verification[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle complete workflow without errors
[22m[39maudit {"service":"model-gateway","operation":"rerank","context":{"runId":"unknown"},"data":{"query":"test query","docs":["doc1","doc2"],"topK":1},"timestamp":"2025-09-18T23:27:55.641Z"}

{"level":30,"time":1758238075640,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.9295839965343475,"msg":"request completed"}
{"level":30,"time":1758238075641,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075641,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","res":{"statusCode":200},"responseTime":0.2952499985694885,"msg":"request completed"}
 [32m✓[39m tests/comprehensive-fixes.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 35[2mms[22m[39m
{"level":30,"time":1758238075670,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075671,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075670,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.23891699314117432,"msg":"request completed"}
{"level":30,"time":1758238075674,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075673,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":1.5432089865207672,"msg":"request completed"}
{"level":30,"time":1758238075675,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.3509169816970825,"msg":"request completed"}
{"level":30,"time":1758238075678,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
[90mstderr[2m | tests/comprehensive-fixes.test.js[2m > [22m[2mMCP Ecosystem Fixes Verification[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle complete workflow without errors
[22m[39maudit {"service":"model-gateway","operation":"embeddings","context":{"runId":"unknown"},"data":{"texts":["hello world"]},"timestamp":"2025-09-18T23:27:55.678Z"}

{"level":30,"time":1758238075679,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.5410839915275574,"msg":"request completed"}
{"level":30,"time":1758238075679,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
[90mstderr[2m | tests/comprehensive-fixes.test.js[2m > [22m[2mMCP Ecosystem Fixes Verification[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle complete workflow without errors
[22m[39maudit {"service":"model-gateway","operation":"rerank","context":{"runId":"unknown"},"data":{"query":"test query","docs":["doc1","doc2"],"topK":1},"timestamp":"2025-09-18T23:27:55.679Z"}

{"level":30,"time":1758238075679,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","res":{"statusCode":200},"responseTime":0.3269999921321869,"msg":"request completed"}
 [32m✓[39m tests/comprehensive-fixes.test.js [2m([22m[2m10 tests[22m[2m)[22m[32m 13[2mms[22m[39m
{"level":30,"time":1758238075692,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075694,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075692,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.23133301734924316,"msg":"request completed"}
{"level":30,"time":1758238075694,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.17316597700119019,"msg":"request completed"}
{"level":30,"time":1758238075695,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075695,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.1279579997062683,"msg":"request completed"}
 [32m✓[39m src/server.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
{"level":30,"time":1758238075706,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075707,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075706,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.1628749966621399,"msg":"request completed"}
{"level":30,"time":1758238075707,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.11737501621246338,"msg":"request completed"}
{"level":30,"time":1758238075708,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075708,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.1324169933795929,"msg":"request completed"}
 [32m✓[39m tests/validation.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
{"level":30,"time":1758238075718,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075719,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075718,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.14354199171066284,"msg":"request completed"}
{"level":30,"time":1758238075719,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.12141600251197815,"msg":"request completed"}
{"level":30,"time":1758238075720,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1758238075720,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":400},"responseTime":0.09654200077056885,"msg":"request completed"}
 [32m✓[39m tests/validation.test.js [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
{"level":30,"time":1758238075733,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","req":{"method":"POST","url":"/embeddings","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
[90mstderr[2m | tests/server.evidence.test.ts[2m > [22m[2mmodel-gateway evidence auto-attachment[2m > [22m[2membeddings response includes evidence array
[22m[39maudit {"service":"model-gateway","operation":"embeddings","context":{"runId":"unknown"},"data":{"texts":["alpha","beta"]},"timestamp":"2025-09-18T23:27:55.733Z"}

{"level":30,"time":1758238075733,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-1","res":{"statusCode":200},"responseTime":0.23774999380111694,"msg":"request completed"}
{"level":30,"time":1758238075733,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","req":{"method":"POST","url":"/rerank","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
[90mstderr[2m | tests/server.evidence.test.ts[2m > [22m[2mmodel-gateway evidence auto-attachment[2m > [22m[2mrerank response includes evidence array
[22m[39maudit {"service":"model-gateway","operation":"rerank","context":{"runId":"unknown"},"data":{"query":"q","docs":["d1","d2","d3"]},"timestamp":"2025-09-18T23:27:55.734Z"}

{"level":30,"time":1758238075734,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-2","res":{"statusCode":200},"responseTime":1.2468750178813934,"msg":"request completed"}
{"level":30,"time":1758238075735,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-3","req":{"method":"POST","url":"/chat","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
[90mstderr[2m | tests/server.evidence.test.ts[2m > [22m[2mmodel-gateway evidence auto-attachment[2m > [22m[2mchat response includes evidence array
[22m[39maudit {"service":"model-gateway","operation":"chat","context":{"runId":"unknown"},"data":{"msgs":[{"role":"user","content":"Explain recursion"}]},"timestamp":"2025-09-18T23:27:55.735Z"}

{"level":30,"time":1758238075735,"pid":56740,"hostname":"Mac-Studio.local","reqId":"req-3","res":{"statusCode":200},"responseTime":0.26787498593330383,"msg":"request completed"}
 [32m✓[39m tests/server.evidence.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
[90mstderr[2m | tests/chat.spec.ts[2m > [22m[2mModelRouter - Chat Generation[2m > [22m[2mshould generate chat response with proper type safety
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/chat.spec.ts[2m > [22m[2mModelRouter - Chat Generation[2m > [22m[2mshould handle minimal chat request
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

[90mstderr[2m | tests/chat.spec.ts[2m > [22m[2mModelRouter - Chat Generation[2m > [22m[2mshould handle system and assistant messages
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

 [32m✓[39m tests/chat.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/frontier-adapter.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstderr[2m | tests/router-init.spec.ts[2m > [22m[2mModelRouter initialization[2m > [22m[2mregisters models based on adapter availability
[22m[39m[model-router] Ollama model gpt-oss:20b not installed; skipping
[model-router] Ollama model qwen3-coder:30b not installed; skipping
[model-router] Ollama model phi4-mini-reasoning not installed; skipping
[model-router] Ollama model gemma3n:e4b not installed; skipping
[model-router] Ollama model deepseek-coder:6.7b not installed; skipping

 [32m✓[39m tests/router-init.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/available-models.exposure.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/available-models.exposure.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/policy.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/policy.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/embeddings-handler.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/chat-handler.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/embeddings-handler.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/chat-handler.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/rerank-handler.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/rerank-handler.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 2 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m tests/model-router.test.js[2m > [22mModelRouter[2m > [22merror handling[2m > [22mshould throw appropriate error when no models available
[31m[1mAssertionError[22m: promise resolved "{ …(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Error {[39m
[32m-   "message": "rejected promise",[39m
[31m+ {[39m
[31m+   "embedding": [[39m
[31m+     0,[39m
[31m+     1,[39m
[31m+     2,[39m
[31m+     3,[39m
[31m+     4,[39m
[31m+     5,[39m
[31m+     6,[39m
[31m+     7,[39m
[31m+   ],[39m
[31m+   "model": "frontier-embedding",[39m
[2m  }[22m

[36m [2m❯[22m tests/model-router.test.ts:[2m221:6[22m[39m
    [90m219| [39m   (mockOllamaAdapter.listModels as Mock).mockResolvedValue(['llama2']…
    [90m220| [39m
    [90m221| [39m   [35mawait[39m modelRouter[33m.[39m[34minitialize[39m()[33m;[39m
    [90m   | [39m     [31m^[39m
    [90m222| [39m  })[33m;[39m
    [90m223| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/2]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/model-router.test.ts[2m > [22mModelRouter[2m > [22merror handling[2m > [22mshould throw appropriate error when no models available
[31m[1mAssertionError[22m: promise resolved "{ …(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Error {[39m
[32m-   "message": "rejected promise",[39m
[31m+ {[39m
[31m+   "embedding": [[39m
[31m+     0,[39m
[31m+     1,[39m
[31m+     2,[39m
[31m+     3,[39m
[31m+     4,[39m
[31m+     5,[39m
[31m+     6,[39m
[31m+     7,[39m
[31m+   ],[39m
[31m+   "model": "frontier-embedding",[39m
[2m  }[22m

[36m [2m❯[22m tests/model-router.test.ts:[2m194:64[22m[39m
    [90m192| [39m   [35mawait[39m modelRouter[33m.[39m[34minitialize[39m()[33m;[39m
    [90m193| [39m
    [90m194| [39m   await expect(modelRouter.generateEmbedding({ text: 'test' })).rejec…
    [90m   | [39m                                                               [31m^[39m
    [90m195| [39m    [32m'No embedding models available'[39m[33m,[39m
    [90m196| [39m   )[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/2]⎯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (21)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m79 passed[39m[22m[90m (81)[39m
[2m   Start at [22m 00:27:54
[2m   Duration [22m 843ms[2m (transform 165ms, setup 0ms, collect 520ms, tests 107ms, environment 0ms, prepare 58ms)[22m

[2025-09-18T23:27:56.032Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:27:56.032Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:27:56.032Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/prp-runner:test


> @cortex-os/prp-runner@1.0.0 test /Users/jamiecraik/.Cortex-OS/packages/prp-runner
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:27:56.678Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:27:56.702Z] [VITEST-SAFE] [WARN] Low system memory: 992MB free. Consider running memory cleanup first.
[2025-09-18T23:27:56.702Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:27:56.739Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:27:56.739Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner[39m

[90mstdout[2m | src/__tests__/a2a-ai-integration.test.ts[2m > [22m[2m📋 A2A Protocol Compatibility Checklist[2m > [22m[2mshould verify A2A protocol compliance
[22m[39m✅ A2A Protocol Compatibility: PASSED
   - Agent: ASBR AI Agent v1.0.0
   - Skills: 5 AI capabilities exposed
   - Transport: HTTP
   - Endpoint: http://127.0.0.1:8081/a2a

 [31m❯[39m src/__tests__/a2a-ai-integration.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 19[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould create A2A AI agent with valid configuration[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould export singleton agent instance[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould initialize without compatibility checks[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould create agent card with valid A2A structure[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould include all expected AI skills in agent card[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🏗️ Agent Construction and Setup[2m > [22mshould validate A2A skills constants[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle ai_generate_text A2A message[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle ai_search_knowledge A2A message[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle ai_rag_query A2A message[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle ai_calculate_similarity A2A message[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle asbr_collect_enhanced_evidence A2A message[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle get_capabilities A2A message[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🎯 A2A Message Handling[2m > [22mshould handle unknown action gracefully[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🧭 Agent Capability Detection[2m > [22mshould correctly identify supported actions[32m 0[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🧭 Agent Capability Detection[2m > [22mshould provide agent status information[32m 0[2mms[22m[39m
[31m   [31m×[31m 🤖 A2A AI Agent Integration Tests[2m > [22m🔧 Integration Quality Gates[2m > [22mshould handle AI capabilities failure gracefully[39m[32m 4[2mms[22m[39m
[31m     → expected { agent_id: 'failing-agent', …(5) } to have property "status" with value 'degraded'[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🔧 Integration Quality Gates[2m > [22mshould validate all skill schemas have required properties[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🔧 Integration Quality Gates[2m > [22mshould ensure agent card meets A2A specification requirements[32m 1[2mms[22m[39m
   [32m✓[39m 🤖 A2A AI Agent Integration Tests[2m > [22m🔧 Integration Quality Gates[2m > [22mshould verify all A2A skills are testable[32m 2[2mms[22m[39m
   [32m✓[39m 📋 A2A Protocol Compatibility Checklist[2m > [22mshould verify A2A protocol compliance[32m 1[2mms[22m[39m
 [31m❯[39m __tests__/public-exports.snapshot.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 8[2mms[22m[39m
[31m   [31m×[31m @cortex-os/prp-runner public API[2m > [22mmatches the expected export keys (snapshot baseline)[39m[32m 8[2mms[22m[39m
[31m     → Snapshot `@cortex-os/prp-runner public API > matches the expected export keys (snapshot baseline) 1` mismatched[39m
[90mstderr[2m | src/__tests__/asbr-ai-integration.test.ts[2m > [22m[2m🟢 TDD GREEN PHASE: ASBR AI Integration Tests[2m > [22m[2m🚨 Critical Integration Issues (Should FAIL)[2m > [22m[2mshould handle graceful degradation - semantic search without embeddings
[22m[39maddKnowledge failed (continuing): Error: Embedding model not available
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-integration.test.ts:95:54
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | src/__tests__/asbr-ai-integration.test.ts[2m > [22m[2m🟢 TDD GREEN PHASE: ASBR AI Integration Tests[2m > [22m[2m🚨 Critical Integration Issues (Should FAIL)[2m > [22m[2mshould fail - error handling and graceful degradation
[22m[39mMLX enhancement failed: Error: MLX model unavailable
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-integration.test.ts:258:50
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | src/__tests__/asbr-ai-integration.test.ts[2m > [22m[2m🟢 TDD GREEN PHASE: ASBR AI Integration Tests[2m > [22m[2m🚨 Critical Integration Issues (Should FAIL)[2m > [22m[2mshould fail - error handling and graceful degradation
[22m[39msearchKnowledge failed, defaulting to empty results: Error: Embedding service down
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-integration.test.ts:259:57
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | src/__tests__/asbr-ai-integration.test.ts[2m > [22m[2m🟢 TDD GREEN PHASE: ASBR AI Integration Tests[2m > [22m[2m🚨 Critical Integration Issues (Should FAIL)[2m > [22m[2mshould fail - error handling and graceful degradation
[22m[39mragQuery for additional evidence failed (continuing): Error: RAG pipeline failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-integration.test.ts:260:50
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

 [32m✓[39m src/__tests__/asbr-ai-integration.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 108[2mms[22m[39m
[90mstdout[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m🏗️ MCP Server Initialization[2m > [22m[2mshould initialize MCP server successfully
[22m[39m✅ ASBR AI MCP server initialized successfully
   - Status: healthy
   - Available tools: 10
   - AI features: mcp-tools-only

[90mstdout[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m🏗️ MCP Server Initialization[2m > [22m[2mshould throw when capabilities fail to load
[22m[39m✅ ASBR AI MCP server initialized successfully
   - Status: healthy
   - Available tools: 10
   - AI features: mcp-tools-only

[90mstderr[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m🏗️ MCP Server Initialization[2m > [22m[2mshould throw when capabilities fail to load
[22m[39m❌ Error loading AI capabilities during auto-register: Error: AI service unavailable
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-mcp-integration.test.ts:360:58
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
❌ Error during ASBR AI MCP auto-registration: Error: AI service unavailable
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-mcp-integration.test.ts:360:58
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstdout[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m🌐 HTTP Server Integration[2m > [22m[2mshould provide HTTP endpoints for MCP tools
[22m[39m🛑 ASBR AI MCP server stopped

[90mstderr[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m🔗 Helper Functions[2m > [22m[2mshould handle callASBRAITool errors
[22m[39mASBR AI MCP tool call failed for invalid_tool_name: Error: Unknown tool: invalid_tool_name
    at Module.callASBRAITool [90m(/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/asbr-ai-mcp-integration.ts:352:10[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstderr[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m📊 Integration Health Monitoring[2m > [22m[2mshould handle health check failures
[22m[39m⚠️ ASBR AI MCP server health check failed (non-fatal): Error: Health check failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/asbr-ai-mcp-integration.test.ts:844:52
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstdout[2m | src/__tests__/asbr-ai-mcp-integration.test.ts[2m > [22m[2m🔧 ASBR AI MCP Integration Tests[2m > [22m[2m📊 Integration Health Monitoring[2m > [22m[2mshould monitor integration health status
[22m[39m✅ ASBR AI MCP server initialized successfully
   - Status: healthy
   - Available tools: 10
   - AI features: ai, embeddings

 [32m✓[39m src/__tests__/asbr-ai-mcp-integration.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstdout[2m | src/__tests__/memory-embedding-integration.test.ts[2m > [22m[2m🧠 Memory Service Embedding Integration Tests[2m > [22m[2m📊 Memory-Embedding Integration Checklist[2m > [22m[2mshould verify memory-embedding integration compliance
[22m[39m✅ Memory-Embedding Integration: PASSED
   - Embedding Adapter: Initialized with 1024 dimensions
   - Memory Service: Connected with vector storage

[90mstdout[2m | src/__tests__/memory-embedding-integration.test.ts[2m > [22m[2m🧠 Memory Service Embedding Integration Tests[2m > [22m[2m📊 Integration Metrics and Monitoring[2m > [22m[2mshould generate comprehensive memory-embedding metrics
[22m[39m✅ Memory-Embedding Integration Metrics
   - Embedding Operations: 25 completed
   - Memory Records: 25 stored
   - Search Performance: 45ms average
   - Tenant Security: 0 violations

 [32m✓[39m src/__tests__/memory-embedding-integration.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m✓[39m src/__tests__/ai-capabilities.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | src/__tests__/orchestration-ai-integration.test.ts[2m > [22m[2m📋 Orchestration-AI Integration Compliance Checklist[2m > [22m[2mshould verify orchestration-AI integration compliance
[22m[39m✅ Orchestration-AI Integration Compliance: PASSED
   - AI Capabilities: Integrated with full feature set
   - ASBR Evidence: Integrated with balanced configuration
   - PRP Orchestration: Neural framework integration complete
   - Enhancement Features: Strategic analysis, optimal selection, AI planning

 [32m✓[39m src/__tests__/orchestration-ai-integration.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstderr[2m | src/__tests__/prp-runner-workflow.test.ts[2m > [22m[2mPRP Runner workflow (G0→G1)[2m > [22m[2mruns gates, records approvals, and writes prp.md
[22m[39mNo initial.md found, using default enforcement profile

 [32m✓[39m src/__tests__/prp-runner-workflow.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstdout[2m | src/__tests__/ai-policy-compliance.test.ts[2m > [22m[2m🔒 AI Policy Compliance Tests[2m > [22m[2m📋 Policy Compliance Checklist[2m > [22m[2mshould verify AI policy compliance requirements
[22m[39m✅ AI Policy Compliance: PASSED
   - Security Policy: Zero tolerance for injection/PII
   - Security Guards: OWASP LLM + Enhanced ML validation

[90mstdout[2m | src/__tests__/ai-policy-compliance.test.ts[2m > [22m[2m🔒 AI Policy Compliance Tests[2m > [22m[2m📊 Policy Compliance Reporting[2m > [22m[2mshould generate comprehensive compliance status report
[22m[39m✅ Policy Compliance Report Generated
   - OWASP LLM Top 10: Fully Compliant
   - Security Guards: Local validation active
   - Performance: Sub-millisecond validation
   - Access Control: Permission-based enforcement

 [32m✓[39m src/__tests__/ai-policy-compliance.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [31m❯[39m src/__tests__/integration/prp-langgraph-workflow.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 7[2mms[22m[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould execute complete PRP workflow[39m[32m 3[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould handle gate failures gracefully[39m[32m 1[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould collect evidence when gates pass[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould select optimal model for execution[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould track execution time[39m[32m 1[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mgate execution[2m > [22mshould execute gates in sequence[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mgate execution[2m > [22mshould mark gates with appropriate status[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22merror handling[2m > [22mshould handle model selection failure[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22merror handling[2m > [22mshould handle evidence collection failure[39m[32m 0[2mms[22m[39m
[31m     → workflow.execute is not a function[39m
[31m   [31m×[31m PRPLangGraphWorkflow Integration[2m > [22mworkflow visualization[2m > [22mshould return graph visualization[39m[32m 0[2mms[22m[39m
[31m     → workflow.getGraphVisualization is not a function[39m
[90mstderr[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould handle operation errors
[22m[39mError in test: Error: Operation failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/lib/error-boundary.test.ts:29:27
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould retry on retryable errors
[22m[39mError in test: Error: ECONNRESET
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/lib/error-boundary.test.ts:43:18
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstdout[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould retry on retryable errors
[22m[39mRetrying test (attempt 1/3)

[90mstdout[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould retry on retryable errors
[22m[39mRetrying test (attempt 2/3)

[90mstderr[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould retry on retryable errors
[22m[39mError in test: Error: ECONNRESET
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/lib/error-boundary.test.ts:43:18
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstdout[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould use fallback when provided
[22m[39mUsing fallback for test

[90mstderr[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould use fallback when provided
[22m[39mError in test: Error: Operation failed
    at [90m/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/__tests__/lib/error-boundary.test.ts:60:27
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

[90mstderr[2m | src/__tests__/lib/error-boundary.test.ts[2m > [22m[2mErrorBoundary[2m > [22m[2mexecute[2m > [22m[2mshould respect timeout
[22m[39mError in test: Error: Operation timed out after 100ms
    at Timeout._onTimeout [90m(/Users/jamiecraik/.Cortex-OS/packages/prp-runner/[39msrc/lib/error-boundary.ts:80:28[90m)[39m
[90m    at listOnTimeout (node:internal/timers:608:17)[39m
[90m    at processTimers (node:internal/timers:543:7)[39m

 [31m❯[39m src/__tests__/lib/error-boundary.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 5107[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mexecute[2m > [22mshould execute successful operation[32m 0[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mexecute[2m > [22mshould handle operation errors[32m 0[2mms[22m[39m
[31m   [31m×[31m ErrorBoundary[2m > [22mexecute[2m > [22mshould retry on retryable errors[39m[33m 5002[2mms[22m[39m
[31m     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32m✓[39m ErrorBoundary[2m > [22mexecute[2m > [22mshould use fallback when provided[32m 0[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mexecute[2m > [22mshould respect timeout[32m 103[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mshouldRetry[2m > [22mshould retry on network errors[32m 0[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mshouldRetry[2m > [22mshould retry on timeout errors[32m 0[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mshouldRetry[2m > [22mshould retry on rate limit errors[32m 0[2mms[22m[39m
   [32m✓[39m ErrorBoundary[2m > [22mshouldRetry[2m > [22mshould not retry on validation errors[32m 0[2mms[22m[39m
   [32m✓[39m CategorizedError[2m > [22mshould create categorized error with context[32m 0[2mms[22m[39m
   [32m✓[39m ValidationError[2m > [22mshould create validation error[32m 0[2mms[22m[39m
   [32m✓[39m ResourceError[2m > [22mshould create resource error[32m 0[2mms[22m[39m
   [32m✓[39m NetworkError[2m > [22mshould create network error[32m 0[2mms[22m[39m
   [32m✓[39m TimeoutError[2m > [22mshould create timeout error[32m 0[2mms[22m[39m
   [32m✓[39m PermissionError[2m > [22mshould create permission error[32m 0[2mms[22m[39m
 [31m❯[39m src/__tests__/lib/model-selector.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 13[2mms[22m[39m
   [32m✓[39m ModelSelector[2m > [22mconstructor[2m > [22mshould create a ModelSelector instance[32m 7[2mms[22m[39m
[31m   [31m×[31m ModelSelector[2m > [22mselectOptimalModel[2m > [22mshould select MLX model when available[39m[32m 1[2mms[22m[39m
[31m     → vi.spyOn(...).returnValue is not a function[39m
[31m   [31m×[31m ModelSelector[2m > [22mselectOptimalModel[2m > [22mshould fallback to Ollama when MLX is unavailable[39m[32m 0[2mms[22m[39m
[31m     → vi.spyOn(...).returnValue is not a function[39m
   [32m✓[39m ModelSelector[2m > [22mselectOptimalModel[2m > [22mshould select preferred model when specified[32m 0[2mms[22m[39m
[31m   [31m×[31m ModelSelector[2m > [22mselectOptimalModel[2m > [22mshould return null when no models meet requirements[39m[32m 0[2mms[22m[39m
[31m     → vi.spyOn(...).returnValue is not a function[39m
   [32m✓[39m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect code analysis task[32m 0[2mms[22m[39m
   [32m✓[39m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect test generation task[32m 0[2mms[22m[39m
   [32m✓[39m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect documentation task[32m 0[2mms[22m[39m
   [32m✓[39m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect security analysis task[32m 0[2mms[22m[39m
[31m   [31m×[31m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect multimodal task[39m[32m 1[2mms[22m[39m
[31m     → expected 'code-analysis' to be 'multimodal' // Object.is equality[39m
   [32m✓[39m ModelSelector[2m > [22mdetectTaskType[2m > [22mshould default to general task type[32m 1[2mms[22m[39m
   [32m✓[39m ModelSelector[2m > [22mgetAvailableModels[2m > [22mshould return available models for task type[32m 0[2mms[22m[39m
[31m   [31m×[31m ModelSelector[2m > [22mgetProviderStatus[2m > [22mshould return provider availability status[39m[32m 0[2mms[22m[39m
[31m     → vi.spyOn(...).returnValue is not a function[39m
[90mstdout[2m | src/__tests__/asbr-http-server.test.ts[2m > [22m[2mASBR HTTP server[2m > [22m[2mstarts Express server without dynamic import
[22m[39m🚀 ASBR AI MCP server running on http://127.0.0.1:0
   - Tools list: GET /mcp/tools/list
   - Tool call: POST /mcp/tools/call
   - Capabilities: GET /mcp/capabilities
   - Knowledge stats: GET /mcp/knowledge/stats
   - Health: GET /health

[90mstdout[2m | src/__tests__/asbr-http-server.test.ts[2m > [22m[2mASBR HTTP server[2m > [22m[2mstarts Express server without dynamic import
[22m[39m🛑 ASBR AI MCP server stopped

 [32m✓[39m src/__tests__/asbr-http-server.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m src/__tests__/embedding-integration.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | src/__tests__/asbr-ai-mcp-server-start.test.ts[2m > [22m[2mASBR AI MCP HTTP server[2m > [22m[2mstarts without dynamic import
[22m[39m🚀 ASBR AI MCP server running on http://127.0.0.1:1234
   - Tools list: GET /mcp/tools/list
   - Tool call: POST /mcp/tools/call
   - Capabilities: GET /mcp/capabilities
   - Knowledge stats: GET /mcp/knowledge/stats
   - Health: GET /health

[90mstdout[2m | src/__tests__/asbr-ai-mcp-server-start.test.ts[2m > [22m[2mASBR AI MCP HTTP server[2m > [22m[2mstarts without dynamic import
[22m[39m🛑 ASBR AI MCP server stopped

 [32m✓[39m src/__tests__/asbr-ai-mcp-server-start.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m src/__tests__/llm-integration.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m src/__tests__/mlx-integration.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m src/__tests__/orchestrator.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m src/__tests__/insights-error.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m src/__tests__/helpers.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m src/__tests__/ollama-generation.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m src/__tests__/unified-ai-evidence-workflow.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m src/__tests__/reranker.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m src/__tests__/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [2m[90m↓[39m[22m src/__tests__/qwen-embedding-real.test.ts [2m([22m[2m2 tests[22m[2m | [22m[33m2 skipped[39m[2m)[22m

[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 18 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m __tests__/public-exports.snapshot.test.ts[2m > [22m@cortex-os/prp-runner public API[2m > [22mmatches the expected export keys (snapshot baseline)
[31m[1mError[22m: Snapshot `@cortex-os/prp-runner public API > matches the expected export keys (snapshot baseline) 1` mismatched[39m

[32m- Expected[39m
[31m+ Received[39m

[2m  [[22m
[2m    "BaseGate",[22m
[31m+   "CategorizedError",[39m
[31m+   "ConcurrentExecutor",[39m
[31m+   "ErrorBoundary",[39m
[31m+   "ErrorType",[39m
[2m    "G0IdeationGate",[22m
[2m    "G1ArchitectureGate",[22m
[2m    "G2TestPlanGate",[22m
[2m    "G3CodeReviewGate",[22m
[2m    "G4VerificationGate",[22m
[2m    "G5TriageGate",[22m
[2m    "G6ReleaseReadinessGate",[22m
[2m    "G7ReleaseGate",[22m
[2m    "LLMBridge",[22m
[31m+   "LangGraphWorkflow",[39m
[31m+   "MLXModelAdapter",[39m
[31m+   "ModelSelector",[39m
[31m+   "NetworkError",[39m
[31m+   "PRPLangGraphWorkflow",[39m
[31m+   "PermissionError",[39m
[31m+   "ResourceError",[39m
[31m+   "TimeoutError",[39m
[31m+   "ValidationError",[39m
[2m    "compileEnforcementProfile",[22m
[2m    "createExecutionContext",[22m
[2m    "createPRPOrchestrator",[22m
[31m+   "createPrpRunnerEvent",[39m
[2m    "executeNeuron",[22m
[2m    "generatePRPMarkdown",[22m
[2m    "generateReviewJSON",[22m
[31m+   "globalErrorBoundary",[39m
[2m    "loadInitialMd",[22m
[2m    "parseInitialMd",[22m
[31m+   "prpRunnerMcpTools",[39m
[2m    "runPRPWorkflow",[22m
[2m    "writePRPDocument",[22m
[2m  ][22m

[36m [2m❯[22m __tests__/public-exports.snapshot.test.ts:[2m7:16[22m[39m
    [90m  5| [39m [34mit[39m([32m'matches the expected export keys (snapshot baseline)'[39m[33m,[39m () [33m=>[39m {
    [90m  6| [39m  [35mconst[39m keys [33m=[39m [33mObject[39m[33m.[39m[34mkeys[39m(prpRunner)[33m.[39m[34msort[39m()[33m;[39m
    [90m  7| [39m  [34mexpect[39m(keys)[33m.[39m[34mtoMatchInlineSnapshot[39m([32m`
    [90m   | [39m               [31m^[39m
    [90m  8| [39m      [
    [90m  9| [39m        "BaseGate",

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/a2a-ai-integration.test.ts[2m > [22m🤖 A2A AI Agent Integration Tests[2m > [22m🔧 Integration Quality Gates[2m > [22mshould handle AI capabilities failure gracefully
[31m[1mAssertionError[22m: expected { agent_id: 'failing-agent', …(5) } to have property "status" with value 'degraded'[39m

Expected: [32m"degraded"[39m
Received: [31m"operational"[39m

[36m [2m❯[22m src/__tests__/a2a-ai-integration.test.ts:[2m321:19[22m[39m
    [90m319| [39m   })[33m;[39m
    [90m320| [39m
    [90m321| [39m   [34mexpect[39m(result)[33m.[39m[34mtoHaveProperty[39m([32m'status'[39m[33m,[39m [32m'degraded'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m322| [39m   [34mexpect[39m(result)[33m.[39m[34mtoHaveProperty[39m([32m'error'[39m)[33m;[39m
    [90m323| [39m   [34mexpect[39m(result[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'AI capabilities unavailable'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/error-boundary.test.ts[2m > [22mErrorBoundary[2m > [22mexecute[2m > [22mshould retry on retryable errors
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2m❯[22m src/__tests__/lib/error-boundary.test.ts:[2m41:3[22m[39m
    [90m 39| [39m  })[33m;[39m
    [90m 40| [39m
    [90m 41| [39m  [34mit[39m([32m'should retry on retryable errors'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m 42| [39m   [35mlet[39m attemptCount [33m=[39m [34m0[39m[33m;[39m
    [90m 43| [39m   [35mconst[39m error [33m=[39m [35mnew[39m [33mError[39m([32m'ECONNRESET'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/model-selector.test.ts[2m > [22mModelSelector[2m > [22mselectOptimalModel[2m > [22mshould select MLX model when available
[31m[1mTypeError[22m: vi.spyOn(...).returnValue is not a function[39m
[36m [2m❯[22m src/__tests__/lib/model-selector.test.ts:[2m26:58[22m[39m
    [90m 24| [39m  [34mit[39m([32m'should select MLX model when available'[39m[33m,[39m () [33m=>[39m {
    [90m 25| [39m   [90m// Mock MLX as available[39m
    [90m 26| [39m   vi.spyOn(modelSelector as any, 'mlxAvailable', 'get').returnValue(t…
    [90m   | [39m                                                         [31m^[39m
    [90m 27| [39m
    [90m 28| [39m   [35mconst[39m model [33m=[39m modelSelector[33m.[39m[34mselectOptimalModel[39m([32m'code-analysis'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/model-selector.test.ts[2m > [22mModelSelector[2m > [22mselectOptimalModel[2m > [22mshould fallback to Ollama when MLX is unavailable
[31m[1mTypeError[22m: vi.spyOn(...).returnValue is not a function[39m
[36m [2m❯[22m src/__tests__/lib/model-selector.test.ts:[2m37:58[22m[39m
    [90m 35| [39m  [34mit[39m([32m'should fallback to Ollama when MLX is unavailable'[39m[33m,[39m () [33m=>[39m {
    [90m 36| [39m   [90m// Mock MLX as unavailable, Ollama as available[39m
    [90m 37| [39m   vi.spyOn(modelSelector as any, 'mlxAvailable', 'get').returnValue(f…
    [90m   | [39m                                                         [31m^[39m
    [90m 38| [39m   vi.spyOn(modelSelector as any, 'ollamaAvailable', 'get').returnValu…
    [90m 39| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/model-selector.test.ts[2m > [22mModelSelector[2m > [22mselectOptimalModel[2m > [22mshould return null when no models meet requirements
[31m[1mTypeError[22m: vi.spyOn(...).returnValue is not a function[39m
[36m [2m❯[22m src/__tests__/lib/model-selector.test.ts:[2m54:58[22m[39m
    [90m 52| [39m  [34mit[39m([32m'should return null when no models meet requirements'[39m[33m,[39m () [33m=>[39m {
    [90m 53| [39m   [90m// Mock all providers as unavailable[39m
    [90m 54| [39m   vi.spyOn(modelSelector as any, 'mlxAvailable', 'get').returnValue(f…
    [90m   | [39m                                                         [31m^[39m
    [90m 55| [39m   vi.spyOn(modelSelector as any, 'ollamaAvailable', 'get').returnValu…
    [90m 56| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/model-selector.test.ts[2m > [22mModelSelector[2m > [22mdetectTaskType[2m > [22mshould detect multimodal task
[31m[1mAssertionError[22m: expected 'code-analysis' to be 'multimodal' // Object.is equality[39m

Expected: [32m"multimodal"[39m
Received: [31m"code-analysis"[39m

[36m [2m❯[22m src/__tests__/lib/model-selector.test.ts:[2m90:21[22m[39m
    [90m 88| [39m  [34mit[39m([32m'should detect multimodal task'[39m[33m,[39m () [33m=>[39m {
    [90m 89| [39m   const taskType = modelSelector.detectTaskType('Analyze this screens…
    [90m 90| [39m   [34mexpect[39m(taskType)[33m.[39m[34mtoBe[39m([32m'multimodal'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m 91| [39m  })[33m;[39m
    [90m 92| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/lib/model-selector.test.ts[2m > [22mModelSelector[2m > [22mgetProviderStatus[2m > [22mshould return provider availability status
[31m[1mTypeError[22m: vi.spyOn(...).returnValue is not a function[39m
[36m [2m❯[22m src/__tests__/lib/model-selector.test.ts:[2m111:58[22m[39m
    [90m109| [39m [34mdescribe[39m([32m'getProviderStatus'[39m[33m,[39m () [33m=>[39m {
    [90m110| [39m  [34mit[39m([32m'should return provider availability status'[39m[33m,[39m () [33m=>[39m {
    [90m111| [39m   vi.spyOn(modelSelector as any, 'mlxAvailable', 'get').returnValue(t…
    [90m   | [39m                                                         [31m^[39m
    [90m112| [39m   vi.spyOn(modelSelector as any, 'ollamaAvailable', 'get').returnValu…
    [90m113| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould execute complete PRP workflow
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m49:34[22m[39m
    [90m 47| [39m   }[33m;[39m
    [90m 48| [39m
    [90m 49| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m 50| [39m
    [90m 51| [39m   [34mexpect[39m(result[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'completed'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould handle gate failures gracefully
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m69:34[22m[39m
    [90m 67| [39m
    [90m 68| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m 69| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m 70| [39m
    [90m 71| [39m   [34mexpect[39m(result[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'failed'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould collect evidence when gates pass
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m77:34[22m[39m
    [90m 75| [39m  [34mit[39m([32m'should collect evidence when gates pass'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m 76| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m 77| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m 78| [39m
    [90m 79| [39m   expect(mockAIIntegration.collectEnhancedEvidence).toHaveBeenCalled(…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould select optimal model for execution
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m85:19[22m[39m
    [90m 83| [39m  [34mit[39m([32m'should select optimal model for execution'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m 84| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m 85| [39m   [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 86| [39m
    [90m 87| [39m   expect(mockModelSelector.selectOptimalModel).toHaveBeenCalledWith('…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mexecute[2m > [22mshould track execution time
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m95:34[22m[39m
    [90m 93| [39m  [34mit[39m([32m'should track execution time'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m 94| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m 95| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m 96| [39m
    [90m 97| [39m   [34mexpect[39m(result[33m.[39mstartTime)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mgate execution[2m > [22mshould execute gates in sequence
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m106:34[22m[39m
    [90m104| [39m  [34mit[39m([32m'should execute gates in sequence'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m105| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m106| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m107| [39m
    [90m108| [39m   [90m// Check that all gates were executed[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mgate execution[2m > [22mshould mark gates with appropriate status
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m117:34[22m[39m
    [90m115| [39m  [34mit[39m([32m'should mark gates with appropriate status'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m116| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m117| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m118| [39m
    [90m119| [39m   [90m// Check gate statuses[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22merror handling[2m > [22mshould handle model selection failure
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m131:34[22m[39m
    [90m129| [39m
    [90m130| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m131| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m132| [39m
    [90m133| [39m   [34mexpect[39m(result[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'failed'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22merror handling[2m > [22mshould handle evidence collection failure
[31m[1mTypeError[22m: workflow.execute is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m141:34[22m[39m
    [90m139| [39m
    [90m140| [39m   [35mconst[39m prp [33m=[39m { goal[33m:[39m [32m'Test PRP'[39m }[33m;[39m
    [90m141| [39m   [35mconst[39m result [33m=[39m [35mawait[39m workflow[33m.[39m[34mexecute[39m(prp)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m142| [39m
    [90m143| [39m   [90m// Should complete without evidence[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/18]⎯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/integration/prp-langgraph-workflow.test.ts[2m > [22mPRPLangGraphWorkflow Integration[2m > [22mworkflow visualization[2m > [22mshould return graph visualization
[31m[1mTypeError[22m: workflow.getGraphVisualization is not a function[39m
[36m [2m❯[22m src/__tests__/integration/prp-langgraph-workflow.test.ts:[2m151:35[22m[39m
    [90m149| [39m [34mdescribe[39m([32m'workflow visualization'[39m[33m,[39m () [33m=>[39m {
    [90m150| [39m  [34mit[39m([32m'should return graph visualization'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m   [35mconst[39m visualization [33m=[39m workflow[33m.[39m[34mgetGraphVisualization[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m152| [39m
    [90m153| [39m   [34mexpect[39m(visualization)[33m.[39m[34mtoContain[39m([32m'PRP Workflow Graph'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/18]⎯[22m[39m


[2m  Snapshots [22m [1m[31m1 failed[39m[22m
[2m Test Files [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (25)[39m
[2m      Tests [22m [1m[31m18 failed[39m[22m[2m | [22m[1m[32m207 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (227)[39m
[2m   Start at [22m 00:27:57
[2m   Duration [22m 7.43s[2m (transform 492ms, setup 75ms, collect 1.68s, tests 5.32s, environment 0ms, prepare 73ms)[22m

[2025-09-18T23:28:05.356Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:05.356Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:05.357Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/rag:test


> @cortex-os/rag@0.0.1 test /Users/jamiecraik/.Cortex-OS/packages/rag
> node ../../scripts/vitest-safe.mjs run -c vitest.config.ts

[2025-09-18T23:28:05.873Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:05.893Z] [VITEST-SAFE] [WARN] Low system memory: 602MB free. Consider running memory cleanup first.
[2025-09-18T23:28:05.893Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:05.931Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run -c vitest.config.ts
[2025-09-18T23:28:05.931Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/rag[39m

 [32m✓[39m src/retrieval/evidence-gate.test.ts [2m([22m[2m13 tests[22m[2m)[22m[90m 3[2mms[22m[39m
{"level":30,"time":"2025-01-01T12:00:00.000Z","pid":57164,"hostname":"Mac-Studio.local","component":"rag-mcp-tools","correlationId":"e56334a9-1a49-4a8c-b183-28ee5ae5954d","tool":"rag_ingest","msg":"rag_ingest completed"}
{"level":40,"time":"2025-01-01T12:00:00.000Z","pid":57164,"hostname":"Mac-Studio.local","component":"rag-mcp-tools","correlationId":"fda44657-37c3-4490-b770-12626feac987","tool":"rag_ingest","error":{"code":"validation_error","message":"Invalid input payload","details":["content: String must contain at least 1 character(s)"]},"msg":"rag_ingest validation failed"}
{"level":30,"time":"2025-09-18T23:28:07.639Z","pid":57164,"hostname":"Mac-Studio.local","component":"rag-mcp-tools","correlationId":"b5abee66-2bab-4a07-9090-fdadaf250da5","tool":"rag_query","queryLength":23,"topK":7,"msg":"rag_query completed"}
{"level":30,"time":"2025-09-18T23:28:07.670Z","pid":57164,"hostname":"Mac-Studio.local","component":"rag-mcp-tools","correlationId":"8873728a-ab9d-48b7-884a-a6a6b6ee570f","tool":"rag_query","queryLength":20,"topK":5,"msg":"rag_query completed"}
 [31m❯[39m test/mcp.tools.spec.ts [2m([22m[2m7 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 996[2mms[22m[39m
[31m   [31m×[31m document ingestion tool[2m > [22mreturns structured ingestion metadata for valid content[33m 925[2mms[22m[31m[39m
[31m     → expected { success: true, result: { …(5) } } to match object { status: 'ingested', …(3) }
(7 matching properties omitted from actual)[39m
[31m   [31m×[31m document ingestion tool[2m > [22mrejects payloads that fail schema validation[90m 15[2mms[22m[31m[39m
[31m     → promise resolved "{ content: [ { …(2) } ], …(2) }" instead of rejecting[39m
[90mstderr[2m | __tests__/archon-mcp.integration.test.ts[2m > [22m[2mRAG MCP integration[2m > [22m[2mcalls rag embedding tool through MCP client
[22m[39m[Archon RAG] Remote embedding failed: Error: Invalid embedding response from Archon
    at ArchonEmbedder.embed [90m(/Users/jamiecraik/.Cortex-OS/packages/rag/[39msrc/integrations/archon-mcp.ts:102:10[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90m/Users/jamiecraik/.Cortex-OS/packages/rag/[39m__tests__/archon-mcp.integration.test.ts:41:19
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:533:5
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1056:11)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1205:15)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1205:15)
    at runFiles (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1262:5)
    at startTests (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1271:3)
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/vitest@2.1.9_@types+node@22.18.1_jsdom@26.1.0_less@4.4.1_lightningcss@1.30.1_sass-embed_e00e4fc45eb193510ee25088fbda10dd/node_modules/[4mvitest[24m/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 [31m❯[39m __tests__/archon-mcp.integration.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[90m 3[2mms[22m[39m
[31m   [31m×[31m RAG MCP integration[2m > [22mcalls rag embedding tool through MCP client[90m 1[2mms[22m[31m[39m
[31m     → Invalid embedding response from Archon[39m
[31m   [31m×[31m RAG MCP integration[2m > [22mcombines local and remote search results within requested topK[90m 1[2mms[22m[31m[39m
[31m     → expected [] to have a length of 2 but got +0[39m
[31m   [31m×[31m RAG MCP integration[2m > [22mfalls back to local store when remote retrieval errors[90m 0[2mms[22m[31m[39m
[31m     → expected [] to have a length of 1 but got +0[39m
[31m   [31m×[31m RAG MCP integration[2m > [22mapplies auth config while orchestrating ingestion jobs[90m 1[2mms[22m[31m[39m
[31m     → expected 'task-mock' to be 'task-42' // Object.is equality[39m
 [32m✓[39m src/retrieval/freshness-router.test.ts [2m([22m[2m10 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m src/mcp/tools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m src/rag-pipeline.test.ts [2m([22m[2m6 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m✓[39m src/lib/citation-bundler.test.ts [2m([22m[2m6 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m test/qwen3-embedder.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 8[2mms[22m[39m
 [32m✓[39m test/batch-ingest.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32m✓[39m test/multi-model.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m test/enhanced-helpers.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/mime-policy.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [31m❯[39m __tests__/archon-enhanced-store.topk.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[90m 1[2mms[22m[39m
[31m   [31m×[31m ArchonEnhancedStore topK handling[2m > [22mapplies topK limit when combining local + remote results[90m 0[2mms[22m[31m[39m
[31m     → expected 3 to be 2 // Object.is equality[39m
[90mstderr[2m | __tests__/archon-enhanced-store.topk.test.ts[2m > [22m[2mArchonEnhancedStore topK handling[2m > [22m[2mapplies topK limit when combining local + remote results
[22m[39m[ArchonEnhancedStore] vectorToQuery using heuristic fallback – upgrade recommended.

 [32m✓[39m test/security.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [31m❯[39m test/a2a-bus.spec.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[90m 1[2mms[22m[39m
[31m   [31m×[31m RAG A2A bus[2m > [22mdelivers query events to subscribers[90m 0[2mms[22m[31m[39m
[31m     → Cannot read properties of undefined (reading 'QueryExecuted')[39m
[31m   [31m×[31m RAG A2A bus[2m > [22mthrows when publishing invalid payloads[90m 0[2mms[22m[31m[39m
[31m     → Cannot read properties of undefined (reading 'IngestCompleted')[39m
 [32m✓[39m test/freshness-router.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m __tests__/archon-embedder.fallback.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
[90mstderr[2m | __tests__/archon-embedder.fallback.test.ts[2m > [22m[2mArchonEmbedder fallback embedding[2m > [22m[2mreturns fallback embeddings when remote fails (documented expected future behavior)
[22m[39m[Archon RAG] Remote embedding failed: Error: remote down
    at AgentMCPClient.embedder.mcpClient.callTool [90m(/Users/jamiecraik/.Cortex-OS/packages/rag/[39m__tests__/archon-embedder.fallback.test.ts:27:10[90m)[39m
    at ArchonEmbedder.embed [90m(/Users/jamiecraik/.Cortex-OS/packages/rag/[39msrc/integrations/archon-mcp.ts:95:41[90m)[39m
    at [90m/Users/jamiecraik/.Cortex-OS/packages/rag/[39m__tests__/archon-embedder.fallback.test.ts:29:34
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:146:14
    at file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:533:11
    at runWithTimeout (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:39:7)
    at runTest (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1056:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1205:15)
    at runSuite (file:///Users/jamiecraik/.Cortex-OS/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest/runner[24m/dist/index.js:1205:15)
[Archon RAG] Falling back to local embedder

 [32m✓[39m test/dispatch-timeout.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 102[2mms[22m[39m
 [32m✓[39m test/file-discovery.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [32m✓[39m test/rerank_fusion.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m test/pipeline.e2e.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 1[2mms[22m[39m
 [32m✓[39m test/rag-pipeline.citations.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/chunker-determinism.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/ingest.freshness.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 1[2mms[22m[39m
 [2m[90m↓[39m[22m test/qwen3-reranker.integration.spec.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m
 [32m✓[39m test/ingest-embedding-mismatch.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/reranker-batch.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [2m[90m↓[39m[22m test/multi-model.integration.spec.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m
 [2m[90m↓[39m[22m test/qwen3-embedder.integration.spec.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m
Sourcemap for "/Users/jamiecraik/.Cortex-OS/libs/python/exec.js" points to missing source files
 [32m✓[39m test/mlx.integration.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 60[2mms[22m[39m
 [2m[90m↓[39m[22m test/qwen3-reranker.spec.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m
 [32m✓[39m test/citation-bundler.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m
 [32m✓[39m test/handle-rag.spec.ts [2m([22m[2m1 test[22m[2m)[22m[90m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 9 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/archon-enhanced-store.topk.test.ts[2m > [22mArchonEnhancedStore topK handling[2m > [22mapplies topK limit when combining local + remote results
[31m[1mAssertionError[22m: expected 3 to be 2 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 3[39m

[36m [2m❯[22m __tests__/archon-enhanced-store.topk.test.ts:[2m44:26[22m[39m
    [90m 42| [39m   topK[33m:[39m [34m2[39m[33m,[39m
    [90m 43| [39m  } [35mas[39m any)[33m;[39m
    [90m 44| [39m  [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m [90m// Expect trimmed to topK[39m
    [90m   | [39m                         [31m^[39m
    [90m 45| [39m })[33m;[39m
    [90m 46| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/archon-mcp.integration.test.ts[2m > [22mRAG MCP integration[2m > [22mcalls rag embedding tool through MCP client
[31m[1mError[22m: Invalid embedding response from Archon[39m
[36m [2m❯[22m ArchonEmbedder.embed src/integrations/archon-mcp.ts:[2m102:10[22m[39m
    [90m100| [39m   [35mif[39m ([33mArray[39m[33m.[39m[34misArray[39m(result[33m.[39membeddings)) [35mreturn[39m result[33m.[39membeddings[33m;[39m
    [90m101| [39m
    [90m102| [39m   [35mthrow[39m [35mnew[39m [33mError[39m([32m'Invalid embedding response from Archon'[39m)[33m;[39m
    [90m   | [39m         [31m^[39m
    [90m103| [39m  } [35mcatch[39m (error) {
    [90m104| [39m   console[33m.[39m[34merror[39m([32m'[Archon RAG] Remote embedding failed:'[39m[33m,[39m error)[33m;[39m
[90m [2m❯[22m __tests__/archon-mcp.integration.test.ts:[2m41:19[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/archon-mcp.integration.test.ts[2m > [22mRAG MCP integration[2m > [22mcombines local and remote search results within requested topK
[31m[1mAssertionError[22m: expected [] to have a length of 2 but got +0[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 0[39m

[36m [2m❯[22m __tests__/archon-mcp.integration.test.ts:[2m112:19[22m[39m
    [90m110| [39m  warnSpy[33m.[39m[34mmockRestore[39m()[33m;[39m
    [90m111| [39m
    [90m112| [39m  [34mexpect[39m(results)[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m113| [39m  [34mexpect[39m([34mmethods[39m(mockCallLog))[33m.[39m[34mtoEqual[39m([[32m'mcp_initialize'[39m[33m,[39m [32m'mcp_search_[39m…
    [90m114| [39m  [34mexpect[39m(mockCallLog[[34m1[39m][33m.[39mparams)[33m.[39m[34mtoMatchObject[39m({

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/archon-mcp.integration.test.ts[2m > [22mRAG MCP integration[2m > [22mfalls back to local store when remote retrieval errors
[31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 1[39m
[31m+ 0[39m

[36m [2m❯[22m __tests__/archon-mcp.integration.test.ts:[2m155:23[22m[39m
    [90m153| [39m  [34mexpect[39m(results[33m.[39m[34mmap[39m((r) [33m=>[39m r[33m.[39mid))[33m.[39m[34mtoEqual[39m([[32m'local-only'[39m])[33m;[39m
    [90m154| [39m  [35mconst[39m remoteCalls [33m=[39m mockCallLog[33m.[39m[34mfilter[39m((entry) [33m=>[39m entry[33m.[39mmethod [33m===[39m [32m'[39m…
    [90m155| [39m  [34mexpect[39m(remoteCalls)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m156| [39m })[33m;[39m
    [90m157| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/archon-mcp.integration.test.ts[2m > [22mRAG MCP integration[2m > [22mapplies auth config while orchestrating ingestion jobs
[31m[1mAssertionError[22m: expected 'task-mock' to be 'task-42' // Object.is equality[39m

Expected: [32m"task-[7m42[27m"[39m
Received: [31m"task-[7mmock[27m"[39m

[36m [2m❯[22m __tests__/archon-mcp.integration.test.ts:[2m186:22[22m[39m
    [90m184| [39m  errorSpy[33m.[39m[34mmockRestore[39m()[33m;[39m
    [90m185| [39m
    [90m186| [39m  [34mexpect[39m(job[33m.[39mtaskId)[33m.[39m[34mtoBe[39m([32m'task-42'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m187| [39m  [34mexpect[39m([34mmethods[39m(mockCallLog))[33m.[39m[34mtoEqual[39m([
    [90m188| [39m   [32m'mcp_initialize'[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m test/a2a-bus.spec.ts[2m > [22mRAG A2A bus[2m > [22mdelivers query events to subscribers
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'QueryExecuted')[39m
[36m [2m❯[22m test/a2a-bus.spec.ts:[2m12:25[22m[39m
    [90m 10| [39m  [35mconst[39m unsubscribe [33m=[39m [35mawait[39m bus[33m.[39m[34mbind[39m([
    [90m 11| [39m   {
    [90m 12| [39m    type[33m:[39m [33mRAGEventTypes[39m[33m.[39m[33mQueryExecuted[39m[33m,[39m
    [90m   | [39m                        [31m^[39m
    [90m 13| [39m    handle[33m:[39m [35masync[39m (event) [33m=>[39m {
    [90m 14| [39m     received[33m.[39m[34mpush[39m(event)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m test/a2a-bus.spec.ts[2m > [22mRAG A2A bus[2m > [22mthrows when publishing invalid payloads
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'IngestCompleted')[39m
[36m [2m❯[22m test/a2a-bus.spec.ts:[2m38:30[22m[39m
    [90m 36| [39m
    [90m 37| [39m  [35mawait[39m [34mexpect[39m(
    [90m 38| [39m   bus[33m.[39m[34mpublish[39m([33mRAGEventTypes[39m[33m.[39m[33mIngestCompleted[39m[33m,[39m {
    [90m   | [39m                             [31m^[39m
    [90m 39| [39m    ingestId[33m:[39m [32m'ingest-1'[39m[33m,[39m
    [90m 40| [39m    success[33m:[39m [35mtrue[39m[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m test/mcp.tools.spec.ts[2m > [22mdocument ingestion tool[2m > [22mreturns structured ingestion metadata for valid content
[31m[1mAssertionError[22m: expected { success: true, result: { …(5) } } to match object { status: 'ingested', …(3) }
(7 matching properties omitted from actual)[39m

[32m- Expected[39m
[31m+ Received[39m

[2m  Object {[22m
[31m+   "result": Object {[39m
[2m      "contentLength": 23,[22m
[2m      "metadata": Object {[22m
[2m        "tags": Array [[22m
[2m          "science",[22m
[2m        ],[22m
[2m      },[22m
[2m      "source": "doc-42",[22m
[2m      "status": "ingested",[22m
[31m+     "timestamp": "2025-01-01T12:00:00.000Z",[39m
[31m+   },[39m
[31m+   "success": true,[39m
[2m  }[22m

[36m [2m❯[22m test/mcp.tools.spec.ts:[2m32:19[22m[39m
    [90m 30| [39m  [34mexpect[39m(response[33m.[39mcontent)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m
    [90m 31| [39m  [35mconst[39m payload [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(response[33m.[39mcontent[[34m0[39m][33m?.[39mtext [33m??[39m [32m'{}'[39m)[33m;[39m
    [90m 32| [39m  [34mexpect[39m(payload)[33m.[39m[34mtoMatchObject[39m({
    [90m   | [39m                  [31m^[39m
    [90m 33| [39m   status[33m:[39m [32m'ingested'[39m[33m,[39m
    [90m 34| [39m   contentLength[33m:[39m content[33m.[39mlength[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/9]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m test/mcp.tools.spec.ts[2m > [22mdocument ingestion tool[2m > [22mrejects payloads that fail schema validation
[31m[1mAssertionError[22m: promise resolved "{ content: [ { …(2) } ], …(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- [Error: rejected promise][39m
[31m+ Object {[39m
[31m+   "content": Array [[39m
[31m+     Object {[39m
[31m+       "text": "{\"success\":false,\"error\":{\"code\":\"validation_error\",\"message\":\"Invalid input payload\",\"details\":[\"content: String must contain at least 1 character(s)\"]},\"correlationId\":\"fda44657-37c3-4490-b770-12626feac987\"}",[39m
[31m+       "type": "text",[39m
[31m+     },[39m
[31m+   ],[39m
[31m+   "isError": true,[39m
[31m+   "metadata": Object {[39m
[31m+     "correlationId": "fda44657-37c3-4490-b770-12626feac987",[39m
[31m+     "timestamp": "2025-01-01T12:00:00.000Z",[39m
[31m+     "tool": "rag_ingest",[39m
[31m+   },[39m
[31m+ }[39m

[36m [2m❯[22m test/mcp.tools.spec.ts:[2m43:54[22m[39m
    [90m 41| [39m [34mit[39m([32m'rejects payloads that fail schema validation'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m 42| [39m  [35mconst[39m { ragIngestTool } [33m=[39m [35mawait[39m [35mimport[39m([32m'../src/mcp/tools'[39m)[33m;[39m
    [90m 43| [39m  [35mawait[39m [34mexpect[39m(ragIngestTool[33m.[39m[34mhandler[39m({ content[33m:[39m [32m''[39m }))[33m.[39mrejects[33m.[39m[34mtoThrow[39m…
    [90m   | [39m                                                     [31m^[39m
    [90m 44| [39m })[33m;[39m
    [90m 45| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/9]⎯[22m[39m

[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m25 passed[39m[22m[2m | [22m[33m4 skipped[39m[90m (33)[39m
[2m      Tests [22m [1m[31m9 failed[39m[22m[2m | [22m[1m[32m89 passed[39m[22m[2m | [22m[33m4 skipped[39m[90m (102)[39m
[2m   Start at [22m 00:28:06
[2m   Duration [22m 1.84s[2m (transform 492ms, setup 0ms, collect 439ms, tests 1.19s, environment 0ms, prepare 34ms)[22m

[2025-09-18T23:28:08.332Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:08.332Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:08.332Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/a2a-common:test


> @cortex-os/a2a-common@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/a2a-services/common
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:08.645Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:08.653Z] [VITEST-SAFE] [WARN] Low system memory: 431MB free. Consider running memory cleanup first.
[2025-09-18T23:28:08.653Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:08.673Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:08.673Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/a2a-services/common[39m

 [31m❯[39m tests/quota.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 3[2mms[22m[39m
[31m   [31m×[31m quota[2m > [22menforces a global quota[39m[32m 3[2mms[22m[39m
[31m     → expected "spy" to be called 2 times, but got 0 times[39m
 [32m✓[39m tests/quotaStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m✓[39m tests/burstSmoother.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m✓[39m tests/redisRateLimiter.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m✓[39m tests/perAgentQuota.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/mcp.tools.edge.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/rateLimiter.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/mcp.tools.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/registryClient.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/schemaCache.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 1 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m tests/quota.test.ts[2m > [22mquota[2m > [22menforces a global quota
[31m[1mAssertionError[22m: expected "spy" to be called 2 times, but got 0 times[39m
[36m [2m❯[22m tests/quota.test.ts:[2m43:16[22m[39m
    [90m 41| [39m  [34mquota[39m(req[33m,[39m res3[33m,[39m next)[33m;[39m
    [90m 42| [39m
    [90m 43| [39m  [34mexpect[39m(next)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m2[39m)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 44| [39m  [34mexpect[39m(res3[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m429[39m)[33m;[39m
    [90m 45| [39m  [34mexpect[39m(res3[33m.[39msendCalled)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[90m (10)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m27 passed[39m[22m[90m (28)[39m
[2m   Start at [22m 00:28:09
[2m   Duration [22m 476ms[2m (transform 55ms, setup 0ms, collect 263ms, tests 74ms, environment 0ms, prepare 31ms)[22m

[2025-09-18T23:28:09.690Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:09.690Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:09.690Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/mvp-core:test


> @cortex-os/mvp-core@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-core
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:10.005Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:10.012Z] [VITEST-SAFE] [WARN] Low system memory: 418MB free. Consider running memory cleanup first.
[2025-09-18T23:28:10.012Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:10.030Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:10.030Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-core[39m

 [32m✓[39m tests/result.property.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m✓[39m tests/secure-executor.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m✓[39m tests/a2a.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m tests/validation.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/cloudevents.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/outbox.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/env.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 0[2mms[22m[39m
 [32m✓[39m tests/result.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m

[2m Test Files [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m      Tests [22m [1m[32m20 passed[39m[22m[90m (20)[39m
[2m   Start at [22m 00:28:10
[2m   Duration [22m 301ms[2m (transform 42ms, setup 0ms, collect 134ms, tests 21ms, environment 0ms, prepare 41ms)[22m

[2025-09-18T23:28:10.910Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:10.910Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:28:10.910Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run cortex-os:test


> nx run github:test

> cargo test

    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.48s
     Running unittests src/lib.rs (/Users/jamiecraik/.Cortex-OS/target/debug/deps/cortex_github-8ae1b9f487f0d81d)

running 25 tests
test error::tests::test_error_retryability ... ok
test auth::tests::test_create_auth_from_env ... ok
test error::tests::test_status_codes ... ok
test events::tests::test_event_type_conversion ... ok
test actions::tests::test_workflow_template_generation ... ok
test error::tests::test_a2a_error_conversion ... ok
test pull_requests::tests::test_issue_label_check ... ok
test pull_requests::tests::test_pr_merge_status ... ok
test events::tests::test_webhook_signature_verification ... ok
test events::tests::test_activity_stats ... ok
test repository::tests::test_clone_url_selection ... ok
test repository::tests::test_repository_features ... ok
test rate_limiter::tests::test_backoff_calculation ... ok
test repository::tests::decode_base64_content_strips_newlines ... ok
test repository::tests::build_file_update_payload_includes_options ... ok
test a2a_integration::tests::test_a2a_event_creation ... ok
test rate_limiter::tests::test_rate_limiter_creation ... ok
test a2a_integration::tests::test_null_event_publisher ... ok
test actions::tests::test_workflow_event_types ... ok
test auth::tests::test_token_expiration ... ok
test a2a_integration::tests::test_a2a_config_from_env ... ok
test client::tests::test_url_building ... ok
test client::tests::test_client_builder ... ok
test client::tests::test_link_header_parsing ... ok
test a2a_integration::tests::test_publish_repository_event_sends_cloudevent ... ok

test result: ok. 25 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

   Doc-tests cortex_github

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


> nx run cortex-webui:test


> cortex-webui@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-webui
> vitest -c vitest.config.ts


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/apps/cortex-webui[39m

 [32m✓[39m __tests__/chat-gateway.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m✓[39m __tests__/tool-store.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 31[2mms[22m[39m
 [32m✓[39m backend/__tests__/rateLimiter.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m backend/__tests__/config.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m __tests__/models-route.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 55[2mms[22m[39m
 [32m✓[39m __tests__/observability.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m✓[39m __tests__/tools-route.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 141[2mms[22m[39m
 [32m✓[39m __tests__/sse-route.contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 144[2mms[22m[39m
 [32m✓[39m __tests__/environment.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 161[2mms[22m[39m
 [31m❯[39m backend/__tests__/authService.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 155[2mms[22m[39m
[31m   [31m×[31m AuthService configuration[2m > [22mgenerateToken throws when JWT_SECRET is missing[39m[32m 149[2mms[22m[39m
[31m     → Could not locate the bindings file. Tried:
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/default/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/compiled/24.8.0/darwin/arm64/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/release/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/debug/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/default/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/lib/binding/node-v137-darwin-arm64/node_sqlite3.node[39m
[31m   [31m×[31m AuthService configuration[2m > [22mgenerateToken returns token when config is present[39m[32m 6[2mms[22m[39m
[31m     → Could not locate the bindings file. Tried:
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/default/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/compiled/24.8.0/darwin/arm64/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/release/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/debug/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/default/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/lib/binding/node-v137-darwin-arm64/node_sqlite3.node[39m
 [32m✓[39m __tests__/mvp-chat.a11y.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 248[2mms[22m[39m
 [32m✓[39m __tests__/components/chat/Chat.a11y.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 59[2mms[22m[39m
 [31m❯[39m __tests__/components/chat/Chat.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1030[2mms[22m[39m
   [32m✓[39m Chat Component[2m > [22mrenders without crashing[32m 18[2mms[22m[39m
   [32m✓[39m Chat Component[2m > [22mdisplays model selector[32m 5[2mms[22m[39m
[31m   [31m×[31m Chat Component[2m > [22mallows sending a message[39m[33m 1006[2mms[22m[39m
[31m     → Unable to find a label with the text of: Model

Ignored nodes: comments, script, style
[36m<body[31m
  [33mstyle[31m=[32m"overflow: unset;"[31m
[36m>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"flex flex-col h-full"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"p-4 border-b flex justify-between items-center"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex items-center space-x-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-xl font-bold"[31m
          [36m>[31m
            [0mChat[0m
          [36m</h1>[31m
          [36m<label[31m
            [33mclass[31m=[32m"text-sm text-gray-700"[31m
            [33mfor[31m=[32m"model-select-0"[31m
          [36m>[31m
            [0mModel:[0m
          [36m</label>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex flex-col w-full items-start"[31m
          [36m/>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex space-x-2"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-label[31m=[32m"Chat settings"[31m
            [33mclass[31m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[31m
            [33mtype[31m=[32m"button"[31m
          [36m>[31m
            [36m<svg[31m
              [33mfill[31m=[32m"none"[31m
              [33mheight[31m=[32m"20"[31m
              [33mstroke[31m=[32m"currentColor"[31m
              [33mstroke-linecap[31m=[32m"round"[31m
              [33mstroke-linejoin[31m=[32m"round"[31m
              [33mstroke-width[31m=[32m"2"[31m
              [33mviewBox[31m=[32m"0 0 20 20"[31m
              [33mwidth[31m=[32m"20"[31m
            [36m>[31m
              [36m<title>[31m
                [0mOpen settings[0m
              [36m</title>[31m
              [36m<circle[31m
                [33mcx[31m=[32m"10"[31m
                [33mcy[31m=[32m"10"[31m
                [33mr[31m=[32m"8"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"10"[31m
                [33mx2[31m=[32m"10"[31m
                [33my1[31m=[32m"6"[31m
                [33my2[31m=[32m"10"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"10"[31m
                [33mx2[31m=[32m"10"[31m
                [33my1[31m=[32m"14"[31m
                [33my2[31m=[32m"14"[31m
              [36m/>[31m
            [36m</svg>[31m
          [36m</button>[31m
          [36m<button[31m
            [33maria-label[31m=[32m"Clear chat"[31m
            [33mclass[31m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[31m
            [33mtype[31m=[32m"button"[31m
          [36m>[31m
            [36m<svg[31m
              [33mfill[31m=[32m"none"[31m
              [33mheight[31m=[32m"20"[31m
              [33mstroke[31m=[32m"currentColor"[31m
              [33mstroke-linecap[31m=[32m"round"[31m
              [33mstroke-linejoin[31m=[32m"round"[31m
              [33mstroke-width[31m=[32m"2"[31m
              [33mviewBox[31m=[32m"0 0 20 20"[31m
              [33mwidth[31m=[32m"20"[31m
            [36m>[31m
              [36m<title>[31m
                [0mClear chat[0m
              [36m</title>[31m
              [36m<rect[31m
                [33mheight[31m=[32m"12"[31m
                [33mrx[31m=[32m"2"[31m
                [33mwidth[31m=[32m"12"[31m
                [33mx[31m=[32m"4"[31m
                [33my[31m=[32m"4"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"8"[31m
                [33mx2[31m=[32m"12"[31m
                [33my1[31m=[32m"8"[31m
                [33my2[31m=[32m"12"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"12"[31m
                [33mx2[31m=[32m"8"[31m
                [33my1[31m=[32m"8"[31m
                [33my2[31m=[32m"12"[31m
              [36m/>[31m
            [36m</svg>[31m
          [36m</button>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"flex-1 overflow-y-auto p-4"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-live[31m=[32m"polite"[31m
          [33maria-relevant[31m=[32m"additions"[31m
          [33mclass[31m=[32m"space-y-4"[31m
          [33mrole[31m=[32m"log"[31m
        [36m/>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"p-4 border-t border-white/40 dark:border-gray-700"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex flex-col gap-2"[31m
        [36m>[31m
          [36m<form[31m
            [33mclass[31m=[32m"flex gap-2 items-end"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex-1 relative"[31m
            [36m>[31m
              [36m<textarea[31m
                [33mclass[31m=[32m"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 pr-12 resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 min-h-[44px]"[31m
                [33mplaceholder[31m=[32m"Type a message..."[31m
                [33mrows[31m=[32m"1"[31m
                [33mstyle[31m=[32m"height: 0px;"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"absolute bottom-1 right-1 text-xs text-gray-400 dark:text-gray-500 pointer-events-none opacity-0 focus-within:opacity-100 transition-opacity"[31m
              [36m>[31m
                [0m⏎ Send • ⇧⏎ New line[0m
              [36m</div>[31m
            [36m</div>[31m
            [36m<button[31m
              [33mclass[31m=[32m"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg px-4 py-2 h-11 transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"[31m
              [33mdisabled[31m=[32m""[31m
              [33mtitle[31m=[32m"Send message (Enter)"[31m
              [33mtype[31m=[32m"submit"[31m
            [36m>[31m
              [36m<svg[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"20"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 24 24"[31m
                [33mwidth[31m=[32m"20"[31m
              [36m>[31m
                [36m<line[31m
                  [33mx1[31m=[32m"22"[31m
                  [33mx2[31m=[32m"11"[31m
                  [33my1[31m=[32m"2"[31m
                  [33my2[31m=[32m"13"[31m
                [36m/>[31m
                [36m<polygon[31m
                  [33mpoints[31m=[32m"22,2 15,22 11,13 2,9"[31m
                [36m/>[31m
              [36m</svg>[31m
            [36m</button>[31m
          [36m</form>[31m
          [36m<div[31m
            [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 space-x-4"[31m
          [36m>[31m
            [36m<span>[31m
              [36m<kbd[31m
                [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
              [36m>[31m
                [0mCtrl+L[0m
              [36m</kbd>[31m
              [0m [0m
              [0mClear[0m
            [36m</span>[31m
            [36m<span>[31m
              [36m<kbd[31m
                [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
              [36m>[31m
                [0mCtrl+R[0m
              [36m</kbd>[31m
              [0m [0m
              [0mRecall last[0m
            [36m</span>[31m
            [36m<span>[31m
              [36m<kbd[31m
                [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
              [36m>[31m
                [0m↑↓[0m
              [36m</kbd>[31m
              [0m History[0m
            [36m</span>[31m
            [36m<span>[31m
              [36m<kbd[31m
                [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
              [36m>[31m
                [0mEsc[0m
              [36m</kbd>[31m
              [0m [0m
              [0mUnfocus[0m
            [36m</span>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body[31m
    [33mstyle[31m=[32m"overflow: unset;"[31m
  [36m>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"flex flex-col h-full"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-4 border-b flex justify-between items-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center space-x-4"[31m
          [36m>[31m
            [36m<h1[31m
              [33mclass[31m=[32m"text-xl font-bold"[31m
            [36m>[31m
              [0mChat[0m
            [36m</h1>[31m
            [36m<label[31m
              [33mclass[31m=[32m"text-sm text-gray-700"[31m
              [33mfor[31m=[32m"model-select-0"[31m
            [36m>[31m
              [0mModel:[0m
            [36m</label>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex flex-col w-full items-start"[31m
            [36m/>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex space-x-2"[31m
          [36m>[31m
            [36m<button[31m
              [33maria-label[31m=[32m"Chat settings"[31m
              [33mclass[31m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[31m
              [33mtype[31m=[32m"button"[31m
            [36m>[31m
              [36m<svg[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"20"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 20 20"[31m
                [33mwidth[31m=[32m"20"[31m
              [36m>[31m
                [36m<title>[31m
                  [0mOpen settings[0m
                [36m</title>[31m
                [36m<circle[31m
                  [33mcx[31m=[32m"10"[31m
                  [33mcy[31m=[32m"10"[31m
                  [33mr[31m=[32m"8"[31m
                [36m/>[31m
                [36m<line[31m
                  [33mx1[31m=[32m"10"[31m
                  [33mx2[31m=[32m"10"[31m
                  [33my1[31m=[32m"6"[31m
                  [33my2[31m=[32m"10"[31m
                [36m/>[31m
                [36m<line[31m
                  [33mx1[31m=[32m"10"[31m
                  [33mx2[31m=[32m"10"[31m
                  [33my1[31m=[32m"14"[31m
                  [33my2[31m=[32m"14"[31m
                [36m/>[31m
              [36m</svg>[31m
            [36m</button>[31m
            [36m<button[31m
              [33maria-label[31m=[32m"Clear chat"[31m
              [33mclass[31m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[31m
              [33mtype[31m=[32m"button"[31m
            [36m>[31m
              [36m<svg[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"20"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 20 20"[31m
                [33mwidth[31m=[32m"20"[31m
              [36m>[31m
                [36m<title>[31m
                  [0mClear chat[0m
                [36m</title>[31m
                [36m<rect[31m
                  [33mheight[31m=[32m"12"[31m
                  [33mrx[31m=[32m"2"[31m
                  [33mwidth[31m=[32m"12"[31m
                  [33mx[31m=[32m"4"[31m
                  [33my[31m=[32m"4"[31m
                [36m/>[31m
                [36m<line[31m
                  [33mx1[31m=[32m"8"[31m
                  [33mx2[31m=[32m"12"[31m
                  [33my1[31m=[32m"8"[31m
                  [33my2[31m=[32m"12"[31m
                [36m/>[31m
                [36m<line[31m
                  [33mx1[31m=[32m"12"[31m
                  [33mx2[31m=[32m"8"[31m
                  [33my1[31m=[32m"8"[31m
                  [33my2[31m=[32m"12"[31m
                [36m/>[31m
              [36m</svg>[31m
            [36m</button>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex-1 overflow-y-auto p-4"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-live[31m=[32m"polite"[31m
            [33maria-relevant[31m=[32m"additions"[31m
            [33mclass[31m=[32m"space-y-4"[31m
            [33mrole[31m=[32m"log"[31m
          [36m/>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-4 border-t border-white/40 dark:border-gray-700"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex flex-col gap-2"[31m
          [36m>[31m
            [36m<form[31m
              [33mclass[31m=[32m"flex gap-2 items-end"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex-1 relative"[31m
              [36m>[31m
                [36m<textarea[31m
                  [33mclass[31m=[32m"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 pr-12 resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 min-h-[44px]"[31m
                  [33mplaceholder[31m=[32m"Type a message..."[31m
                  [33mrows[31m=[32m"1"[31m
                  [33mstyle[31m=[32m"height: 0px;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"absolute bottom-1 right-1 text-xs text-gray-400 dark:text-gray-500 pointer-events-none opacity-0 focus-within:opacity-100 transition-opacity"[31m
                [36m>[31m
                  [0m⏎ Send • ⇧⏎ New line[0m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg px-4 py-2 h-11 transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"[31m
                [33mdisabled[31m=[32m""[31m
                [33mtitle[31m=[32m"Send message (Enter)"[31m
                [33mtype[31m=[32m"submit"[31m
              [36m>[31m
                [36m<svg[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"20"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"20"[31m
                [36m>[31m
                  [36m<line[31m
                    [33mx1[31m=[32m"22"[31m
                    [33mx2[31m=[32m"11"[31m
                    [33my1[31m=[32m"2"[31m
                    [33my2[31m=[32m"13"[31m
                  [36m/>[31m
                  [36m<polygon[31m
                    [33mpoints[31m=[32m"22,2 15,22 11,13 2,9"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</button>[31m
            [36m</form>[31m
            [36m<div[31m
              [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 space-x-4"[31m
            [36m>[31m
              [36m<span>[31m
                [36m<kbd[31m
                  [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
                [36m>[31m
                  [0mCtrl+L[0m
                [36m</kbd>[31m
                [0m [0m
                [0mClear[0m
              [36m</span>[31m
              [36m<span>[31m
                [36m<kbd[31m
                  [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
                [36m>[31m
                  [0mCtrl+R[0m
                [36m</kbd>[31m
                [0m [0m
                [0mRecall last[0m
              [36m</span>[31m
              [36m<span>[31m
                [36m<kbd[31m
                  [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
                [36m>[31m
                  [0m↑↓[0m
                [36m</kbd>[31m
                [0m History[0m
              [36m</span>[31m
              [36m<span>[31m
                [36m<kbd[31m
                  [33mclass[31m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[31m
                [36m>[31m
                  [0mEsc[0m
                [36m</kbd>[31m
                [0m [0m
                [0mUnfocus[0m
              [36m</span>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 3 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m backend/__tests__/authService.test.ts[2m > [22mAuthService configuration[2m > [22mgenerateToken throws when JWT_SECRET is missing
[41m[1m FAIL [22m[49m backend/__tests__/authService.test.ts[2m > [22mAuthService configuration[2m > [22mgenerateToken returns token when config is present
[31m[1mError[22m: Could not locate the bindings file. Tried:
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Debug/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/out/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/Release/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/build/default/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/compiled/24.8.0/darwin/arm64/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/release/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/debug/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/addon-build/default/install-root/node_sqlite3.node
 → /Users/jamiecraik/.Cortex-OS/node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/lib/binding/node-v137-darwin-arm64/node_sqlite3.node[39m
[90m [2m❯[22m bindings ../../node_modules/.pnpm/bindings@1.5.0/node_modules/bindings/bindings.js:[2m126:9[22m[39m
[90m [2m❯[22m Object.<anonymous> ../../node_modules/.pnpm/sqlite3@5.1.7/node_modules/sqlite3/lib/sqlite3-binding.js:[2m1:37[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯[22m[39m

[41m[1m FAIL [22m[49m __tests__/components/chat/Chat.test.tsx[2m > [22mChat Component[2m > [22mallows sending a message
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: Model

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m"overflow: unset;"[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b flex justify-between items-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center space-x-4"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-bold"[39m
          [36m>[39m
            [0mChat[0m
          [36m</h1>[39m
          [36m<label[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [33mfor[39m=[32m"model-select-0"[39m
          [36m>[39m
            [0mModel:[0m
          [36m</label>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col w-full items-start"[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex space-x-2"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Chat settings"[39m
            [33mclass[39m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [36m<svg[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"20"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 20 20"[39m
              [33mwidth[39m=[32m"20"[39m
            [36m>[39m
              [36m<title>[39m
                [0mOpen settings[0m
              [36m</title>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"10"[39m
                [33mcy[39m=[32m"10"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
              [36m<line[39m
                [33mx1[39m=[32m"10"[39m
                [33mx2[39m=[32m"10"[39m
                [33my1[39m=[32m"6"[39m
                [33my2[39m=[32m"10"[39m
              [36m/>[39m
              [36m<line[39m
                [33mx1[39m=[32m"10"[39m
                [33mx2[39m=[32m"10"[39m
                [33my1[39m=[32m"14"[39m
                [33my2[39m=[32m"14"[39m
              [36m/>[39m
            [36m</svg>[39m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Clear chat"[39m
            [33mclass[39m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [36m<svg[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"20"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 20 20"[39m
              [33mwidth[39m=[32m"20"[39m
            [36m>[39m
              [36m<title>[39m
                [0mClear chat[0m
              [36m</title>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"12"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"12"[39m
                [33mx[39m=[32m"4"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
              [36m<line[39m
                [33mx1[39m=[32m"8"[39m
                [33mx2[39m=[32m"12"[39m
                [33my1[39m=[32m"8"[39m
                [33my2[39m=[32m"12"[39m
              [36m/>[39m
              [36m<line[39m
                [33mx1[39m=[32m"12"[39m
                [33mx2[39m=[32m"8"[39m
                [33my1[39m=[32m"8"[39m
                [33my2[39m=[32m"12"[39m
              [36m/>[39m
            [36m</svg>[39m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 overflow-y-auto p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33maria-live[39m=[32m"polite"[39m
          [33maria-relevant[39m=[32m"additions"[39m
          [33mclass[39m=[32m"space-y-4"[39m
          [33mrole[39m=[32m"log"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-t border-white/40 dark:border-gray-700"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2"[39m
        [36m>[39m
          [36m<form[39m
            [33mclass[39m=[32m"flex gap-2 items-end"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex-1 relative"[39m
            [36m>[39m
              [36m<textarea[39m
                [33mclass[39m=[32m"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 pr-12 resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 min-h-[44px]"[39m
                [33mplaceholder[39m=[32m"Type a message..."[39m
                [33mrows[39m=[32m"1"[39m
                [33mstyle[39m=[32m"height: 0px;"[39m
              [36m/>[39m
              [36m<div[39m
                [33mclass[39m=[32m"absolute bottom-1 right-1 text-xs text-gray-400 dark:text-gray-500 pointer-events-none opacity-0 focus-within:opacity-100 transition-opacity"[39m
              [36m>[39m
                [0m⏎ Send • ⇧⏎ New line[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg px-4 py-2 h-11 transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"[39m
              [33mdisabled[39m=[32m""[39m
              [33mtitle[39m=[32m"Send message (Enter)"[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [36m<svg[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"20"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"20"[39m
              [36m>[39m
                [36m<line[39m
                  [33mx1[39m=[32m"22"[39m
                  [33mx2[39m=[32m"11"[39m
                  [33my1[39m=[32m"2"[39m
                  [33my2[39m=[32m"13"[39m
                [36m/>[39m
                [36m<polygon[39m
                  [33mpoints[39m=[32m"22,2 15,22 11,13 2,9"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</form>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-xs text-gray-500 dark:text-gray-400 space-x-4"[39m
          [36m>[39m
            [36m<span>[39m
              [36m<kbd[39m
                [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
              [36m>[39m
                [0mCtrl+L[0m
              [36m</kbd>[39m
              [0m [0m
              [0mClear[0m
            [36m</span>[39m
            [36m<span>[39m
              [36m<kbd[39m
                [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
              [36m>[39m
                [0mCtrl+R[0m
              [36m</kbd>[39m
              [0m [0m
              [0mRecall last[0m
            [36m</span>[39m
            [36m<span>[39m
              [36m<kbd[39m
                [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
              [36m>[39m
                [0m↑↓[0m
              [36m</kbd>[39m
              [0m History[0m
            [36m</span>[39m
            [36m<span>[39m
              [36m<kbd[39m
                [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
              [36m>[39m
                [0mEsc[0m
              [36m</kbd>[39m
              [0m [0m
              [0mUnfocus[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mstyle[39m=[32m"overflow: unset;"[39m
  [36m>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col h-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-b flex justify-between items-center"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center space-x-4"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-xl font-bold"[39m
            [36m>[39m
              [0mChat[0m
            [36m</h1>[39m
            [36m<label[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
              [33mfor[39m=[32m"model-select-0"[39m
            [36m>[39m
              [0mModel:[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col w-full items-start"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex space-x-2"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Chat settings"[39m
              [33mclass[39m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"20"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 20 20"[39m
                [33mwidth[39m=[32m"20"[39m
              [36m>[39m
                [36m<title>[39m
                  [0mOpen settings[0m
                [36m</title>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"10"[39m
                  [33mcy[39m=[32m"10"[39m
                  [33mr[39m=[32m"8"[39m
                [36m/>[39m
                [36m<line[39m
                  [33mx1[39m=[32m"10"[39m
                  [33mx2[39m=[32m"10"[39m
                  [33my1[39m=[32m"6"[39m
                  [33my2[39m=[32m"10"[39m
                [36m/>[39m
                [36m<line[39m
                  [33mx1[39m=[32m"10"[39m
                  [33mx2[39m=[32m"10"[39m
                  [33my1[39m=[32m"14"[39m
                  [33my2[39m=[32m"14"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Clear chat"[39m
              [33mclass[39m=[32m"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"20"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 20 20"[39m
                [33mwidth[39m=[32m"20"[39m
              [36m>[39m
                [36m<title>[39m
                  [0mClear chat[0m
                [36m</title>[39m
                [36m<rect[39m
                  [33mheight[39m=[32m"12"[39m
                  [33mrx[39m=[32m"2"[39m
                  [33mwidth[39m=[32m"12"[39m
                  [33mx[39m=[32m"4"[39m
                  [33my[39m=[32m"4"[39m
                [36m/>[39m
                [36m<line[39m
                  [33mx1[39m=[32m"8"[39m
                  [33mx2[39m=[32m"12"[39m
                  [33my1[39m=[32m"8"[39m
                  [33my2[39m=[32m"12"[39m
                [36m/>[39m
                [36m<line[39m
                  [33mx1[39m=[32m"12"[39m
                  [33mx2[39m=[32m"8"[39m
                  [33my1[39m=[32m"8"[39m
                  [33my2[39m=[32m"12"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 overflow-y-auto p-4"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-live[39m=[32m"polite"[39m
            [33maria-relevant[39m=[32m"additions"[39m
            [33mclass[39m=[32m"space-y-4"[39m
            [33mrole[39m=[32m"log"[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-white/40 dark:border-gray-700"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col gap-2"[39m
          [36m>[39m
            [36m<form[39m
              [33mclass[39m=[32m"flex gap-2 items-end"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex-1 relative"[39m
              [36m>[39m
                [36m<textarea[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 pr-12 resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 min-h-[44px]"[39m
                  [33mplaceholder[39m=[32m"Type a message..."[39m
                  [33mrows[39m=[32m"1"[39m
                  [33mstyle[39m=[32m"height: 0px;"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute bottom-1 right-1 text-xs text-gray-400 dark:text-gray-500 pointer-events-none opacity-0 focus-within:opacity-100 transition-opacity"[39m
                [36m>[39m
                  [0m⏎ Send • ⇧⏎ New line[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<button[39m
                [33mclass[39m=[32m"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg px-4 py-2 h-11 transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"[39m
                [33mdisabled[39m=[32m""[39m
                [33mtitle[39m=[32m"Send message (Enter)"[39m
                [33mtype[39m=[32m"submit"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"20"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"20"[39m
                [36m>[39m
                  [36m<line[39m
                    [33mx1[39m=[32m"22"[39m
                    [33mx2[39m=[32m"11"[39m
                    [33my1[39m=[32m"2"[39m
                    [33my2[39m=[32m"13"[39m
                  [36m/>[39m
                  [36m<polygon[39m
                    [33mpoints[39m=[32m"22,2 15,22 11,13 2,9"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
            [36m</form>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 dark:text-gray-400 space-x-4"[39m
            [36m>[39m
              [36m<span>[39m
                [36m<kbd[39m
                  [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
                [36m>[39m
                  [0mCtrl+L[0m
                [36m</kbd>[39m
                [0m [0m
                [0mClear[0m
              [36m</span>[39m
              [36m<span>[39m
                [36m<kbd[39m
                  [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
                [36m>[39m
                  [0mCtrl+R[0m
                [36m</kbd>[39m
                [0m [0m
                [0mRecall last[0m
              [36m</span>[39m
              [36m<span>[39m
                [36m<kbd[39m
                  [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
                [36m>[39m
                  [0m↑↓[0m
                [36m</kbd>[39m
                [0m History[0m
              [36m</span>[39m
              [36m<span>[39m
                [36m<kbd[39m
                  [33mclass[39m=[32m"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded"[39m
                [36m>[39m
                  [0mEsc[0m
                [36m</kbd>[39m
                [0m [0m
                [0mUnfocus[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
[90m [2m❯[22m Proxy.waitForWrapper ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m❯[22m __tests__/components/chat/Chat.test.tsx:[2m62:9[22m[39m
    [90m 60| [39m
    [90m 61| [39m  [90m// Wait for models to load and check the select element[39m
    [90m 62| [39m  [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m        [31m^[39m
    [90m 63| [39m   [35mconst[39m selectElement [33m=[39m screen[33m.[39m[34mgetByLabelText[39m([32m'Model'[39m)[33m;[39m
    [90m 64| [39m   [34mexpect[39m(selectElement)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (13)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m28 passed[39m[22m[90m (31)[39m
[2m   Start at [22m 00:28:17
[2m   Duration [22m 2.15s[2m (transform 512ms, setup 1.23s, collect 1.11s, tests 2.04s, environment 5.53s, prepare 789ms)[22m

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/a2a-schema-registry:test

Sourcemap for "/Users/jamiecraik/.Cortex-OS/packages/a2a/a2a-core/dist/chunk-4L4G4DGO.js" points to missing source files

> nx run security:test


> nx run @cortex-os/evals:test


> @cortex-os/evals@0.0.1 test /Users/jamiecraik/.Cortex-OS/packages/evals
> vitest -c vitest.config.ts


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/evals[39m

 [32m✓[39m src/router.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m✓[39m src/rag.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m src/gate.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m

[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 00:28:22
[2m   Duration [22m 393ms[2m (transform 134ms, setup 0ms, collect 283ms, tests 18ms, environment 0ms, prepare 205ms)[22m


> nx run cortex-os-docs:test


> cortex-os-docs@1.0.0 test /Users/jamiecraik/.Cortex-OS/website
> vitest run --passWithNoTests


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/website[39m

[90mstderr[2m | __tests__/sanitizer.test.ts
[22m[39m[docs-sync] 🚀 Starting Cortex-OS documentation sync...

 [32m✓[39m [30m[45m website-docs [49m[39m __tests__/sanitizer.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstderr[2m | __tests__/references.test.ts
[22m[39m[docs-sync] 🚀 Starting Cortex-OS documentation sync...

 [32m✓[39m [30m[45m website-docs [49m[39m __tests__/references.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstderr[2m | __tests__/sanitizer-integration.test.ts
[22m[39m[docs-sync] 🚀 Starting Cortex-OS documentation sync...

[90mstdout[2m | __tests__/sanitizer-integration.test.ts[2m > [22m[2mSanitizer Integration Tests[2m > [22m[2mshould handle curated corpus with expected repair counts
[22m[39mIntegration test repair summary: { genericsEscaped: [33m1[39m, pseudoJsxEscaped: [33m1[39m }

[90mstdout[2m | __tests__/sanitizer-integration.test.ts[2m > [22m[2mSanitizer Integration Tests[2m > [22m[2mshould handle content that needs escaping
[22m[39mOriginal: Some Promise<string> types and <Fragment> components.
Sanitized result: Some `Promise<string>` types and &lt;Fragment&gt; components.

 [32m✓[39m [30m[45m website-docs [49m[39m __tests__/sanitizer-integration.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstderr[2m | __tests__/signatures.test.ts
[22m[39m[docs-sync] 🚀 Starting Cortex-OS documentation sync...

 [32m✓[39m [30m[45m website-docs [49m[39m __tests__/signatures.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 0[2mms[22m[39m
[90mstderr[2m | __tests__/collision-skip.test.ts
[22m[39m[docs-sync] 🚀 Starting Cortex-OS documentation sync...

 [32m✓[39m [30m[45m website-docs [49m[39m __tests__/collision-skip.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 0[2mms[22m[39m

[2m Test Files [22m [1m[32m5 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[32m50 passed[39m[22m[90m (50)[39m
[2m   Start at [22m 00:28:23
[2m   Duration [22m 178ms[2m (transform 43ms, setup 0ms, collect 55ms, tests 15ms, environment 0ms, prepare 30ms)[22m


> nx run @cortex-os/utils:test


> @cortex-os/utils@1.0.0 test /Users/jamiecraik/.Cortex-OS/libs/typescript/utils
> vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/libs/typescript/utils[39m

 [32m✓[39m tests/env.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m✓[39m src/__tests__/type-guards.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 3[2mms[22m[39m
[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould fallback to second provider when first fails
[22m[39mProvider primary failed: Primary failed

[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould try all providers in order
[22m[39mProvider first failed: First failed

[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould try all providers in order
[22m[39mProvider second failed: Second failed

[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould throw error when all providers fail
[22m[39mProvider primary failed: Primary failed

[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould throw error when all providers fail
[22m[39mProvider fallback failed: Fallback failed

[90mstderr[2m | tests/with-fallback.test.ts[2m > [22m[2mwithFallback[2m > [22m[2mshould use custom error message when provided
[22m[39mProvider test failed: Test error

 [32m✓[39m tests/with-fallback.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/safe-fetch.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m✓[39m tests/vector.property.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m

[2m Test Files [22m [1m[32m5 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[32m55 passed[39m[22m[90m (55)[39m
[2m   Start at [22m 00:28:24
[2m   Duration [22m 326ms[2m (transform 92ms, setup 0ms, collect 239ms, tests 21ms, environment 0ms, prepare 227ms)[22m


> nx run mvp:test


> nx run a2a-events:test


> nx run @cortex-os/mvp-server:test


> @cortex-os/mvp-server@0.1.1 test /Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-server
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:26.280Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:26.287Z] [VITEST-SAFE] [WARN] Low system memory: 321MB free. Consider running memory cleanup first.
[2025-09-18T23:28:26.287Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:26.306Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:26.306Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-server[39m

 [32m✓[39m tests/auth.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m✓[39m tests/GenerateGuide.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m✓[39m tests/server.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/rate-limit.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m✓[39m tests/McpConnection.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 1[2mms[22m[39m

[2m Test Files [22m [1m[32m5 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[32m35 passed[39m[22m[90m (35)[39m
[2m   Start at [22m 00:28:26
[2m   Duration [22m 422ms[2m (transform 52ms, setup 14ms, collect 186ms, tests 27ms, environment 0ms, prepare 26ms)[22m

[2025-09-18T23:28:27.475Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:27.475Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 0
[2025-09-18T23:28:27.475Z] [VITEST-SAFE] [INFO] Terminating Vitest process

> nx run @cortex-os/marketplace-api:test


> @cortex-os/marketplace-api@0.1.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-marketplace
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:27.732Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:27.743Z] [VITEST-SAFE] [WARN] Low system memory: 328MB free. Consider running memory cleanup first.
[2025-09-18T23:28:27.743Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:27.762Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:27.762Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/apps/cortex-marketplace[39m

 [31m❯[39m src/api.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[32m 35[2mms[22m[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mHealth Check[2m > [22mshould respond to health check[39m[32m 11[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Search[2m > [22mshould search servers with query[39m[32m 2[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Search[2m > [22mshould validate search parameters[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Search[2m > [22mshould support category filtering[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Search[2m > [22mshould support risk level filtering[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Search[2m > [22mshould handle empty search results[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Details[2m > [22mshould get server by ID[39m[32m 2[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Details[2m > [22mshould return 404 for unknown server[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mServer Details[2m > [22mshould validate server ID format[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mRegistry Management[2m > [22mshould list available registries[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mRegistry Management[2m > [22mshould get registry status[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mCategories[2m > [22mshould list server categories[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mStatistics[2m > [22mshould provide marketplace stats[39m[32m 2[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mError Handling[2m > [22mshould handle invalid JSON gracefully[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mError Handling[2m > [22mshould handle method not allowed[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
   [32m✓[39m Marketplace API Server[2m > [22mError Handling[2m > [22mshould handle internal server errors[32m 1[2mms[22m[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mRate Limiting[2m > [22mshould enforce rate limits[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mCORS[2m > [22mshould include CORS headers[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mSwagger Documentation[2m > [22mshould serve API documentation[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m Marketplace API Server[2m > [22mSwagger Documentation[2m > [22mshould provide OpenAPI spec[39m[32m 1[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
 [31m❯[39m integration.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 10[2mms[22m[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould complete full server discovery workflow[39m[32m 0[2mms[22m[39m
[31m     → fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle complex search scenarios[39m[32m 5[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould provide comprehensive statistics[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle registry management operations[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle client-specific installation instructions[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mError Handling Integration[2m > [22mshould handle various error scenarios gracefully[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 400 // Object.is equality[39m
   [32m✓[39m MCP Marketplace Integration Tests[2m > [22mError Handling Integration[2m > [22mshould provide consistent error response format[32m 0[2mms[22m[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould enforce rate limiting[39m[32m 1[2mms[22m[39m
[31m     → expected 0 to be greater than 0[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould include security headers[39m[32m 0[2mms[22m[39m
[31m     → expected { …(4) } to have property "x-frame-options"[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould handle CORS properly[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 204 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mCache Integration[2m > [22mshould cache registry data effectively[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mCache Integration[2m > [22mshould refresh cache on demand[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
[31m   [31m×[31m MCP Marketplace Integration Tests[2m > [22mAPI Documentation Integration[2m > [22mshould serve OpenAPI documentation[39m[32m 0[2mms[22m[39m
[31m     → expected 404 to be 200 // Object.is equality[39m
 [31m❯[39m src/mcp/integration.test.ts [2m([22m[2m12 tests[22m[2m | [22m[33m10 skipped[39m[2m)[22m[32m 2[2mms[22m[39m
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tools API[2m > [22mshould list available MCP tools
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tools API[2m > [22mshould provide tool details including aliases
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tools API[2m > [22mshould return tool schema information
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tools API[2m > [22mshould return 404 for unknown tool schema
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould execute marketplace.get_stats tool
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould execute marketplace.list_categories tool
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould validate tool parameters
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould return 400 for invalid tool name
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould handle unknown tool execution
   [2m[90m↓[39m[22m MCP Integration Tests[2m > [22mMCP Tool Execution[2m > [22mshould work with tool aliases
   [32m✓[39m MCP Tool Contract Validation[2m > [22mshould validate search_servers input schema[32m 1[2mms[22m[39m
   [32m✓[39m MCP Tool Contract Validation[2m > [22mshould validate get_server input schema[32m 0[2mms[22m[39m
 [32m✓[39m src/services/registry-service.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 116[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Suites 1 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m src/mcp/integration.test.ts[2m > [22mMCP Integration Tests
[31m[1mFastifyError[22m: fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[90m [2m❯[22m Object.checkVersion ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginUtils.js:[2m125:11[22m[39m
[90m [2m❯[22m Object.registerPlugin ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginUtils.js:[2m148:16[22m[39m
[90m [2m❯[22m Boot.override ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginOverride.js:[2m28:57[22m[39m
[90m [2m❯[22m Boot._loadPlugin ../../node_modules/.pnpm/avvio@8.4.0/node_modules/avvio/boot.js:[2m425:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/32]⎯[22m[39m


[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 31 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould complete full server discovery workflow
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mHealth Check[2m > [22mshould respond to health check
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Search[2m > [22mshould search servers with query
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Search[2m > [22mshould validate search parameters
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Search[2m > [22mshould support category filtering
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Search[2m > [22mshould support risk level filtering
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Search[2m > [22mshould handle empty search results
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Details[2m > [22mshould get server by ID
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Details[2m > [22mshould return 404 for unknown server
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mServer Details[2m > [22mshould validate server ID format
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mRegistry Management[2m > [22mshould list available registries
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mRegistry Management[2m > [22mshould get registry status
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mCategories[2m > [22mshould list server categories
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mStatistics[2m > [22mshould provide marketplace stats
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mError Handling[2m > [22mshould handle invalid JSON gracefully
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mError Handling[2m > [22mshould handle method not allowed
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mRate Limiting[2m > [22mshould enforce rate limits
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mCORS[2m > [22mshould include CORS headers
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mSwagger Documentation[2m > [22mshould serve API documentation
[41m[1m FAIL [22m[49m src/api.test.ts[2m > [22mMarketplace API Server[2m > [22mSwagger Documentation[2m > [22mshould provide OpenAPI spec
[31m[1mFastifyError[22m: fastify-plugin: @fastify/helmet - expected '5.x' fastify version, '4.29.1' is installed[39m
[90m [2m❯[22m Object.checkVersion ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginUtils.js:[2m125:11[22m[39m
[90m [2m❯[22m Object.registerPlugin ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginUtils.js:[2m148:16[22m[39m
[90m [2m❯[22m Boot.override ../../node_modules/.pnpm/fastify@4.29.1/node_modules/fastify/lib/pluginOverride.js:[2m28:57[22m[39m
[90m [2m❯[22m Boot._loadPlugin ../../node_modules/.pnpm/avvio@8.4.0/node_modules/avvio/boot.js:[2m425:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle complex search scenarios
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m179:40[22m[39m
    [90m177| [39m    url[33m:[39m [32m'/api/v1/servers/search?category=development&limit=5'[39m[33m,[39m
    [90m178| [39m   })[33m;[39m
    [90m179| [39m   [34mexpect[39m(categoryResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m180| [39m   [35mconst[39m categoryResult [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(categoryResponse[33m.[39mbody)[33m;[39m
    [90m181| [39m   [34mexpect[39m(categoryResult[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould provide comprehensive statistics
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m229:37[22m[39m
    [90m227| [39m    url[33m:[39m [32m'/api/v1/stats'[39m[33m,[39m
    [90m228| [39m   })[33m;[39m
    [90m229| [39m   [34mexpect[39m(statsResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m230| [39m   [35mconst[39m stats [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(statsResponse[33m.[39mbody)[33m;[39m
    [90m231| [39m   [34mexpect[39m(stats[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle registry management operations
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m279:38[22m[39m
    [90m277| [39m    url[33m:[39m [32m'/api/v1/registries/test/status'[39m[33m,[39m
    [90m278| [39m   })[33m;[39m
    [90m279| [39m   [34mexpect[39m(statusResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m280| [39m   [35mconst[39m status [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(statusResponse[33m.[39mbody)[33m;[39m
    [90m281| [39m   [34mexpect[39m(status[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mFull Workflow Integration[2m > [22mshould handle client-specific installation instructions
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m312:33[22m[39m
    [90m310| [39m     url[33m:[39m [32m`/api/v1/servers/test-filesystem/install?client=[39m[36m${[39mclient[36m}[39m[32m`[39m[33m,[39m
    [90m311| [39m    })[33m;[39m
    [90m312| [39m    [34mexpect[39m(response[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m313| [39m    [35mconst[39m install [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(response[33m.[39mbody)[33m;[39m
    [90m314| [39m    [34mexpect[39m(install[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mError Handling Integration[2m > [22mshould handle various error scenarios gracefully
[31m[1mAssertionError[22m: expected 404 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m353:41[22m[39m
    [90m351| [39m    url[33m:[39m [32m'/api/v1/servers/invalid..id'[39m[33m,[39m
    [90m352| [39m   })[33m;[39m
    [90m353| [39m   [34mexpect[39m(invalidIdResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m
    [90m355| [39m   [90m// Invalid search parameters[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould enforce rate limiting
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2m❯[22m integration.test.ts:[2m417:23[22m[39m
    [90m415| [39m   [90m// Should have at least some successful requests[39m
    [90m416| [39m   const successful = responses.filter((r) => r.statusCode === 200).le…
    [90m417| [39m   [34mexpect[39m(successful)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m418| [39m
    [90m419| [39m   [90m// May have some rate limited (429) responses[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould include security headers
[31m[1mAssertionError[22m: expected { …(4) } to have property "x-frame-options"[39m
[36m [2m❯[22m integration.test.ts:[2m431:29[22m[39m
    [90m429| [39m
    [90m430| [39m   [90m// Check for security headers (added by Helmet)[39m
    [90m431| [39m   [34mexpect[39m(response[33m.[39mheaders)[33m.[39m[34mtoHaveProperty[39m([32m'x-frame-options'[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m432| [39m   [34mexpect[39m(response[33m.[39mheaders)[33m.[39m[34mtoHaveProperty[39m([32m'x-content-type-options'[39m)[33m;[39m
    [90m433| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mSecurity and Performance Integration[2m > [22mshould handle CORS properly
[31m[1mAssertionError[22m: expected 404 to be 204 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 204[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m445:32[22m[39m
    [90m443| [39m   })[33m;[39m
    [90m444| [39m
    [90m445| [39m   [34mexpect[39m(response[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m204[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m446| [39m   expect(response.headers['access-control-allow-origin']).toBeDefined…
    [90m447| [39m   expect(response.headers['access-control-allow-methods']).toBeDefine…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mCache Integration[2m > [22mshould cache registry data effectively
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m460:33[22m[39m
    [90m458| [39m   })[33m;[39m
    [90m459| [39m   [35mconst[39m duration1 [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m() [33m-[39m start1[33m;[39m
    [90m460| [39m   [34mexpect[39m(response1[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m461| [39m
    [90m462| [39m   [90m// Second request - should use cache (faster)[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mCache Integration[2m > [22mshould refresh cache on demand
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m491:39[22m[39m
    [90m489| [39m    url[33m:[39m [32m'/api/v1/registries/test/refresh'[39m[33m,[39m
    [90m490| [39m   })[33m;[39m
    [90m491| [39m   [34mexpect[39m(refreshResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                      [31m^[39m
    [90m492| [39m
    [90m493| [39m   [90m// Subsequent request should still work[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/32]⎯[22m[39m

[41m[1m FAIL [22m[49m integration.test.ts[2m > [22mMCP Marketplace Integration Tests[2m > [22mAPI Documentation Integration[2m > [22mshould serve OpenAPI documentation
[31m[1mAssertionError[22m: expected 404 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

[36m [2m❯[22m integration.test.ts:[2m509:36[22m[39m
    [90m507| [39m    url[33m:[39m [32m'/documentation'[39m[33m,[39m
    [90m508| [39m   })[33m;[39m
    [90m509| [39m   [34mexpect[39m(docsResponse[33m.[39mstatusCode)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                                   [31m^[39m
    [90m510| [39m   [34mexpect[39m(docsResponse[33m.[39mheaders[[32m'content-type'[39m])[33m.[39m[34mtoContain[39m([32m'text/html'[39m)[33m;[39m
    [90m511| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/32]⎯[22m[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[2m      Tests [22m [1m[31m31 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[2m | [22m[33m10 skipped[39m[90m (48)[39m
[2m   Start at [22m 00:28:28
[2m   Duration [22m 445ms[2m (transform 69ms, setup 0ms, collect 157ms, tests 164ms, environment 0ms, prepare 28ms)[22m

[2025-09-18T23:28:28.834Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:28.834Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:28.834Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run cortex-webui-frontend:test


> cortex-webui-frontend@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-webui/frontend
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:29.093Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:29.101Z] [VITEST-SAFE] [WARN] Low system memory: 305MB free. Consider running memory cleanup first.
[2025-09-18T23:28:29.101Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:29.118Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:29.118Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/jamiecraik/.Cortex-OS/apps/cortex-webui/frontend[39m

[31mNo test files found, exiting with code 1
[39m
[2minclude: [22m[33m**/*.{test,spec}.?(c|m)[jt]s?(x)[39m
[2mexclude:  [22m[33m**/node_modules/**[2m, [22m**/dist/**[2m, [22m**/cypress/**[2m, [22m**/.{idea,git,cache,output,temp}/**[2m, [22m**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*[39m

[2025-09-18T23:28:29.834Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:29.834Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:29.834Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/tdd-coach:test


> @cortex-os/tdd-coach@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/tdd-coach
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:30.140Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:30.147Z] [VITEST-SAFE] [WARN] Low system memory: 323MB free. Consider running memory cleanup first.
[2025-09-18T23:28:30.147Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:30.164Z] [VITEST-SAFE] [INFO] Spawning Vitest with args: --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run
[2025-09-18T23:28:30.164Z] [VITEST-SAFE] [INFO] Memory constraints: --max-old-space-size=1536 --heapsnapshot-near-heap-limit=1 --expose-gc --max-semi-space-size=64
npm warn Unknown env config "recursive". This will stop working in the next major version of npm.
npm warn Unknown env config "dir". This will stop working in the next major version of npm.
npm warn Unknown env config "verify-deps-before-run". This will stop working in the next major version of npm.
npm warn Unknown env config "workspace-root". This will stop working in the next major version of npm.

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/Users/jamiecraik/.Cortex-OS/packages/tdd-coach[39m

[90mstderr[2m | __tests__/integration.test.ts[2m > [22m[2mTDD Coach Integration[2m > [22m[2mshould handle empty changes gracefully
[22m[39mGo test execution failed: Error: spawn go ENOENT
[90m    at Process.ChildProcess._handle.onexit (node:internal/child_process:286:19)[39m
[90m    at onErrorNT (node:internal/child_process:484:16)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:90:21)[39m {
  errno: [33m-2[39m,
  code: [32m'ENOENT'[39m,
  syscall: [32m'spawn go'[39m,
  path: [32m'go'[39m,
  spawnargs: [ [32m'test'[39m, [32m'-json'[39m, [32m'./...'[39m ]
}

 [31m❯[39m __tests__/integration.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 5208[2mms[22m[39m
[31m   [31m×[31m TDD Coach Integration[2m > [22mshould provide coaching for implementation changes[33m 5001[2mms[22m[31m[39m
[31m     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
 [31m❯[39m __tests__/cli.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[90m 2[2mms[22m[39m
[31m   [31m×[31m TDD Coach CLI[2m > [22mshould show help when run without arguments[90m 1[2mms[22m[31m[39m
[31m     → cliPath is not defined[39m
[31m   [31m×[31m TDD Coach CLI[2m > [22mshould show version when --version flag is used[90m 0[2mms[22m[31m[39m
[31m     → cliPath is not defined[39m
[31m   [31m×[31m TDD Coach CLI[2m > [22mshould show help for validate command[90m 0[2mms[22m[31m[39m
[31m     → cliPath is not defined[39m
[31m   [31m×[31m TDD Coach CLI[2m > [22mshould show help for status command[90m 0[2mms[22m[31m[39m
[31m     → cliPath is not defined[39m
[31m   [31m×[31m TDD Coach CLI[2m > [22mshould show help for run-tests command[90m 0[2mms[22m[31m[39m
[31m     → cliPath is not defined[39m
 [32m✓[39m __tests__/a2a-bus.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 3[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 6 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/cli.test.ts[2m > [22mTDD Coach CLI[2m > [22mshould show help when run without arguments
[31m[1mReferenceError[22m: cliPath is not defined[39m
[36m [2m❯[22m __tests__/cli.test.ts:[2m44:37[22m[39m
    [90m 42| [39m[35mfunction[39m [34mrunCLI[39m(args[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m{ stdout[33m:[39m string[33m;[39m stderr[33m:[39m str…
    [90m 43| [39m [35mreturn[39m [35mnew[39m [33mPromise[39m((resolve[33m,[39m reject) [33m=>[39m {
    [90m 44| [39m  [35mconst[39m cliProcess [33m=[39m [34mspawn[39m([32m'node'[39m[33m,[39m [cliPath[33m,[39m [33m...[39margs][33m,[39m {
    [90m   | [39m                                    [31m^[39m
    [90m 45| [39m   cwd[33m:[39m process[33m.[39m[34mcwd[39m()[33m,[39m
    [90m 46| [39m   env[33m:[39m process[33m.[39menv[33m,[39m
[90m [2m❯[22m runCLI __tests__/cli.test.ts:[2m43:9[22m[39m
[90m [2m❯[22m __tests__/cli.test.ts:[2m9:36[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/6]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/cli.test.ts[2m > [22mTDD Coach CLI[2m > [22mshould show version when --version flag is used
[31m[1mReferenceError[22m: cliPath is not defined[39m
[36m [2m❯[22m __tests__/cli.test.ts:[2m44:37[22m[39m
    [90m 42| [39m[35mfunction[39m [34mrunCLI[39m(args[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m{ stdout[33m:[39m string[33m;[39m stderr[33m:[39m str…
    [90m 43| [39m [35mreturn[39m [35mnew[39m [33mPromise[39m((resolve[33m,[39m reject) [33m=>[39m {
    [90m 44| [39m  [35mconst[39m cliProcess [33m=[39m [34mspawn[39m([32m'node'[39m[33m,[39m [cliPath[33m,[39m [33m...[39margs][33m,[39m {
    [90m   | [39m                                    [31m^[39m
    [90m 45| [39m   cwd[33m:[39m process[33m.[39m[34mcwd[39m()[33m,[39m
    [90m 46| [39m   env[33m:[39m process[33m.[39menv[33m,[39m
[90m [2m❯[22m runCLI __tests__/cli.test.ts:[2m43:9[22m[39m
[90m [2m❯[22m __tests__/cli.test.ts:[2m15:36[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/6]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/cli.test.ts[2m > [22mTDD Coach CLI[2m > [22mshould show help for validate command
[31m[1mReferenceError[22m: cliPath is not defined[39m
[36m [2m❯[22m __tests__/cli.test.ts:[2m44:37[22m[39m
    [90m 42| [39m[35mfunction[39m [34mrunCLI[39m(args[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m{ stdout[33m:[39m string[33m;[39m stderr[33m:[39m str…
    [90m 43| [39m [35mreturn[39m [35mnew[39m [33mPromise[39m((resolve[33m,[39m reject) [33m=>[39m {
    [90m 44| [39m  [35mconst[39m cliProcess [33m=[39m [34mspawn[39m([32m'node'[39m[33m,[39m [cliPath[33m,[39m [33m...[39margs][33m,[39m {
    [90m   | [39m                                    [31m^[39m
    [90m 45| [39m   cwd[33m:[39m process[33m.[39m[34mcwd[39m()[33m,[39m
    [90m 46| [39m   env[33m:[39m process[33m.[39menv[33m,[39m
[90m [2m❯[22m runCLI __tests__/cli.test.ts:[2m43:9[22m[39m
[90m [2m❯[22m __tests__/cli.test.ts:[2m21:36[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/6]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/cli.test.ts[2m > [22mTDD Coach CLI[2m > [22mshould show help for status command
[31m[1mReferenceError[22m: cliPath is not defined[39m
[36m [2m❯[22m __tests__/cli.test.ts:[2m44:37[22m[39m
    [90m 42| [39m[35mfunction[39m [34mrunCLI[39m(args[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m{ stdout[33m:[39m string[33m;[39m stderr[33m:[39m str…
    [90m 43| [39m [35mreturn[39m [35mnew[39m [33mPromise[39m((resolve[33m,[39m reject) [33m=>[39m {
    [90m 44| [39m  [35mconst[39m cliProcess [33m=[39m [34mspawn[39m([32m'node'[39m[33m,[39m [cliPath[33m,[39m [33m...[39margs][33m,[39m {
    [90m   | [39m                                    [31m^[39m
    [90m 45| [39m   cwd[33m:[39m process[33m.[39m[34mcwd[39m()[33m,[39m
    [90m 46| [39m   env[33m:[39m process[33m.[39menv[33m,[39m
[90m [2m❯[22m runCLI __tests__/cli.test.ts:[2m43:9[22m[39m
[90m [2m❯[22m __tests__/cli.test.ts:[2m28:36[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/6]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/cli.test.ts[2m > [22mTDD Coach CLI[2m > [22mshould show help for run-tests command
[31m[1mReferenceError[22m: cliPath is not defined[39m
[36m [2m❯[22m __tests__/cli.test.ts:[2m44:37[22m[39m
    [90m 42| [39m[35mfunction[39m [34mrunCLI[39m(args[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m{ stdout[33m:[39m string[33m;[39m stderr[33m:[39m str…
    [90m 43| [39m [35mreturn[39m [35mnew[39m [33mPromise[39m((resolve[33m,[39m reject) [33m=>[39m {
    [90m 44| [39m  [35mconst[39m cliProcess [33m=[39m [34mspawn[39m([32m'node'[39m[33m,[39m [cliPath[33m,[39m [33m...[39margs][33m,[39m {
    [90m   | [39m                                    [31m^[39m
    [90m 45| [39m   cwd[33m:[39m process[33m.[39m[34mcwd[39m()[33m,[39m
    [90m 46| [39m   env[33m:[39m process[33m.[39menv[33m,[39m
[90m [2m❯[22m runCLI __tests__/cli.test.ts:[2m43:9[22m[39m
[90m [2m❯[22m __tests__/cli.test.ts:[2m35:36[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/6]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m __tests__/integration.test.ts[2m > [22mTDD Coach Integration[2m > [22mshould provide coaching for implementation changes
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/6]⎯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (13)[39m
[2m   Start at [22m 00:28:30
[2m   Duration [22m 5.50s[2m (transform 90ms, setup 0ms, collect 158ms, tests 5.21s, environment 0ms, prepare 30ms)[22m

[2025-09-18T23:28:36.204Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[2025-09-18T23:28:36.204Z] [VITEST-SAFE] [INFO] Vitest completed with exit code: 1
[2025-09-18T23:28:36.204Z] [VITEST-SAFE] [INFO] Terminating Vitest process
[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/cortex-semgrep-github:test


> @cortex-os/cortex-semgrep-github@1.1.0 test /Users/jamiecraik/.Cortex-OS/packages/cortex-semgrep-github
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:36.709Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:36.724Z] [VITEST-SAFE] [WARN] Low system memory: 13MB free. Consider running memory cleanup first.
[2025-09-18T23:28:36.724Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:36.747Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:36.747Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
59229  46880 node ../../scripts/vitest-safe.mjs run
59260  90304 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
59483  46608 node ../../scripts/vitest-safe.mjs run
59524  90464 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
59730  46272 node ../../scripts/vitest-safe.mjs run
59787  90912 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60061  46512 node ../../scripts/vitest-safe.mjs run
60134  90064 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  46640 node ../../scripts/vitest-safe.mjs run
60523  91312 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  46928 node ../../scripts/vitest-safe.mjs run
61015  91648 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
61464  46752 node ../../scripts/vitest-safe.mjs run
61628  92112 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run cortex-webui-backend:test


> cortex-webui-backend@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-webui/backend
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:37.121Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:37.130Z] [VITEST-SAFE] [WARN] Low system memory: 11MB free. Consider running memory cleanup first.
[2025-09-18T23:28:37.130Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:37.156Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:37.156Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
59483  46800 node ../../scripts/vitest-safe.mjs run
59524  90464 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
59730  46272 node ../../scripts/vitest-safe.mjs run
59787  90912 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60061  46512 node ../../scripts/vitest-safe.mjs run
60134  90064 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  46640 node ../../scripts/vitest-safe.mjs run
60523  91312 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  46928 node ../../scripts/vitest-safe.mjs run
61015  91648 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
61464  46752 node ../../scripts/vitest-safe.mjs run
61628  92112 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
62359  46096 (node)

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/service-model-gateway:test


> @cortex-os/service-model-gateway@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/services/model-gateway
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:37.517Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:37.532Z] [VITEST-SAFE] [WARN] Low system memory: 14MB free. Consider running memory cleanup first.
[2025-09-18T23:28:37.532Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:37.564Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:37.564Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
59483  42352 node ../../scripts/vitest-safe.mjs run
59524  88624 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
59730  43488 node ../../scripts/vitest-safe.mjs run
59787  78160 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60061  44176 node ../../scripts/vitest-safe.mjs run
60134  76000 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  40160 node ../../scripts/vitest-safe.mjs run
60523  81680 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  46928 node ../../scripts/vitest-safe.mjs run
61015  91648 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
61464  46752 node ../../scripts/vitest-safe.mjs run
61628  92112 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
62832  46608 node ../../scripts/vitest-safe.mjs run
62977  87888 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/mcp-bridge:test


> @cortex-os/mcp-bridge@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/mcp-bridge
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:37.944Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:37.952Z] [VITEST-SAFE] [WARN] Low system memory: 15MB free. Consider running memory cleanup first.
[2025-09-18T23:28:37.952Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:37.973Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:37.973Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
59483  42352 (node)
59524  88656 (node)
59730  38384 node ../../scripts/vitest-safe.mjs run
59787  48528 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60061  35984 node ../../scripts/vitest-safe.mjs run
60134  57984 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  35312 node ../../scripts/vitest-safe.mjs run
60523  52752 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  46928 node ../../scripts/vitest-safe.mjs run
61015  91648 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
61464  46752 node ../../scripts/vitest-safe.mjs run
61628  92112 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
62832  46608 node ../../scripts/vitest-safe.mjs run
62977  91920 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/cortex-ai-github:test


> @cortex-os/cortex-ai-github@1.1.0 test /Users/jamiecraik/.Cortex-OS/packages/cortex-ai-github
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:38.340Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:38.356Z] [VITEST-SAFE] [WARN] Low system memory: 19MB free. Consider running memory cleanup first.
[2025-09-18T23:28:38.356Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:38.377Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:38.377Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
59730  38384 node ../../scripts/vitest-safe.mjs run
59787  48624 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60061  35984 node ../../scripts/vitest-safe.mjs run
60134  57984 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  35312 node ../../scripts/vitest-safe.mjs run
60523  52752 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  40288 node ../../scripts/vitest-safe.mjs run
61015  89264 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
61464  46752 node ../../scripts/vitest-safe.mjs run
61628  92112 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
62832  46608 node ../../scripts/vitest-safe.mjs run
62977  91920 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/logging:test


> @cortex-os/logging@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/cortex-logging
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:38.734Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:38.742Z] [VITEST-SAFE] [WARN] Low system memory: 183MB free. Consider running memory cleanup first.
[2025-09-18T23:28:38.742Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:38.761Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:38.761Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60061  39136 node ../../scripts/vitest-safe.mjs run
60134  58032 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  35312 node ../../scripts/vitest-safe.mjs run
60523  52752 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  39872 node ../../scripts/vitest-safe.mjs run
61015  72880 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/mcp-marketplace:test


> @cortex-os/mcp-marketplace@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-marketplace-api
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:39.128Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:39.136Z] [VITEST-SAFE] [WARN] Low system memory: 133MB free. Consider running memory cleanup first.
[2025-09-18T23:28:39.136Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:39.156Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:39.156Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60061  39136 node ../../scripts/vitest-safe.mjs run
60134  58032 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60425  35312 node ../../scripts/vitest-safe.mjs run
60523  52752 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  39872 node ../../scripts/vitest-safe.mjs run
61015  72880 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65797  28368 node (vitest)       

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/evidence:test


> @cortex-os/evidence@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-os/packages/evidence
> node ../../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:39.504Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:39.511Z] [VITEST-SAFE] [WARN] Low system memory: 122MB free. Consider running memory cleanup first.
[2025-09-18T23:28:39.511Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:39.532Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:39.532Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60425  38896 node ../../scripts/vitest-safe.mjs run
60523  52752 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  39872 node ../../scripts/vitest-safe.mjs run
61015  72880 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/ingest:test


> @cortex-os/ingest@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-os/packages/ingest
> node ../../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:39.862Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:39.869Z] [VITEST-SAFE] [WARN] Low system memory: 54MB free. Consider running memory cleanup first.
[2025-09-18T23:28:39.869Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:39.890Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:39.890Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60425  38896 node ../../scripts/vitest-safe.mjs run
60523  52784 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  39872 node ../../scripts/vitest-safe.mjs run
61015  72880 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
66595  46368 node ../../scripts/vitest-safe.mjs run
66757  50800 npm        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/planner:test


> @cortex-os/planner@1.0.0 test /Users/jamiecraik/.Cortex-OS/apps/cortex-os/packages/planner
> node ../../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:40.243Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:40.253Z] [VITEST-SAFE] [WARN] Low system memory: 4MB free. Consider running memory cleanup first.
[2025-09-18T23:28:40.253Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:40.286Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:40.286Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60425  38896 node ../../scripts/vitest-safe.mjs run
60523  52784 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
60910  39872 node ../../scripts/vitest-safe.mjs run
61015  57280 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
66595  46368 node ../../scripts/vitest-safe.mjs run
66757  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
67208  46000 node ../../scripts/vitest-safe.mjs run

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/service-orchestration:test


> @cortex-os/service-orchestration@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/services/orchestration
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:40.643Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:40.651Z] [VITEST-SAFE] [WARN] Low system memory: 38MB free. Consider running memory cleanup first.
[2025-09-18T23:28:40.651Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:40.672Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:40.672Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60910  41344 node ../../scripts/vitest-safe.mjs run
61015  57328 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
66595  46368 node ../../scripts/vitest-safe.mjs run
66757  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/mvp-group:test


> @cortex-os/mvp-group@0.1.0 test /Users/jamiecraik/.Cortex-OS/packages/mvp/mvp-group
> node ../../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:41.037Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:41.047Z] [VITEST-SAFE] [WARN] Low system memory: 13MB free. Consider running memory cleanup first.
[2025-09-18T23:28:41.047Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:41.072Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:41.072Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60910  41344 node ../../scripts/vitest-safe.mjs run
61015  57328 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
66595  46368 node ../../scripts/vitest-safe.mjs run
66757  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
67731  46816 node ../../scripts/vitest-safe.mjs run
67906  91280 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
68125  55536 node (vitest)       

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/cortex-structure-github:test


> @cortex-os/cortex-structure-github@1.1.0 test /Users/jamiecraik/.Cortex-OS/packages/cortex-structure-github
> node ../../scripts/vitest-safe.mjs run

[2025-09-18T23:28:41.423Z] [VITEST-SAFE] [INFO] Starting memory-safe Vitest execution
[2025-09-18T23:28:41.430Z] [VITEST-SAFE] [WARN] Low system memory: 13MB free. Consider running memory cleanup first.
[2025-09-18T23:28:41.430Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean:gentle
[2025-09-18T23:28:41.452Z] [VITEST-SAFE] [ERROR] Other Vitest processes detected! This could cause memory exhaustion.
[2025-09-18T23:28:41.452Z] [VITEST-SAFE] [INFO] Run: pnpm memory:clean to cleanup existing processes
Running Vitest processes:
  PID    RSS COMMAND
60910  41344 node ../../scripts/vitest-safe.mjs run
61015  57328 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
65489  46800 node ../../scripts/vitest-safe.mjs run
65617  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
66595  46368 node ../../scripts/vitest-safe.mjs run
66757  92368 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        
67731  46816 node ../../scripts/vitest-safe.mjs run
67906  91280 npm exec vitest --pool=forks --no-file-parallelism --max-workers=1 --pool-options.forks.singleFork=true --pool-options.forks.maxForks=1 run        

[41m[30m ELIFECYCLE [39m[49m [31mTest failed. See above for more details.[39m

> nx run @cortex-os/a2a-handlers:test


> nx run @cortex-os/a2a-observability:test


> nx run cortex-code:test

> pnpm codex:test


> cortex-os@0.0.1 codex:test /Users/jamiecraik/.Cortex-OS
> cd apps/cortex-codex && cargo test --workspace

sh: line 0: cd: apps/cortex-codex: No such file or directory
[41m[30m ELIFECYCLE [39m[49m [31mCommand failed with exit code 1.[39m
> pnpm codex:test


> cortex-os@0.0.1 codex:test /Users/jamiecraik/.Cortex-OS
> cd apps/cortex-codex && cargo test --workspace

sh: line 0: cd: apps/cortex-codex: No such file or directory
[41m[30m ELIFECYCLE [39m[49m [31mCommand failed with exit code 1.[39m
Warning: command "pnpm codex:test" exited with non-zero status code


 NX   Running target test for 56 projects and 24 tasks they depend on failed

Tasks not run because their dependencies failed or --nx-bail=true:

- @cortex-os/gateway:test
- @cortex-os/agents:test

Failed tasks:

- @cortex-os/agent-toolkit:build
- @cortex-os/rag:build
- @cortex-os/simlab:build
- @cortex-os/a2a-contracts:test
- @cortex-os/a2a-core:test
- @cortex-os/observability:test
- a2a:test
- @cortex-os/policy:test
- @cortex-os/kernel:test
- asbr:test
- @cortex-os/agui:test
- @cortex-os/agent-toolkit:test
- @cortex-os/registry:test
- @cortex-os/model-gateway:test
- @cortex-os/prp-runner:test
- @cortex-os/rag:test
- @cortex-os/a2a-common:test
- cortex-webui:test
- @cortex-os/a2a-schema-registry:test
- @cortex-os/marketplace-api:test
- cortex-webui-frontend:test
- @cortex-os/tdd-coach:test
- @cortex-os/cortex-semgrep-github:test
- cortex-webui-backend:test
- @cortex-os/service-model-gateway:test
- @cortex-os/mcp-bridge:test
- @cortex-os/cortex-ai-github:test
- @cortex-os/logging:test
- @cortex-os/mcp-marketplace:test
- @cortex-os/evidence:test
- @cortex-os/ingest:test
- @cortex-os/planner:test
- @cortex-os/service-orchestration:test
- @cortex-os/mvp-group:test
- @cortex-os/cortex-structure-github:test
- cortex-code:test

