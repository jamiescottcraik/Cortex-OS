{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cortex-os.dev/schemas/policy.repo.json",
  "title": "Repository Structure Policy",
  "type": "object",
  "required": ["version", "allowedPaths", "fileTypes", "sizeLimits"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "allowedPaths": {
      "type": "object",
      "properties": {
        "apps": {"type": "array", "items": {"type": "string"}},
        "packages": {"type": "array", "items": {"type": "string"}},
        "services": {"type": "array", "items": {"type": "string"}},
        "libs": {"type": "array", "items": {"type": "string"}},
        "tools": {"type": "array", "items": {"type": "string"}}
      }
    },
    "fileTypes": {
      "type": "object",
      "properties": {
        "allowed": {"type": "array", "items": {"type": "string"}},
        "blocked": {"type": "array", "items": {"type": "string"}}
      }
    },
    "sizeLimits": {
      "type": "object",
      "properties": {
        "maxFileSize": {"type": "string"},
        "maxTotalSize": {"type": "string"}
      }
    }
  }
}
