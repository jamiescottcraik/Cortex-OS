# Cortex-OS Development Environment Configuration
# This file is used by direnv to automatically set environment variables when entering the project directory

# Docker/OrbStack configuration
export DOCKER_BUILDKIT=1
export BUILDKIT_PROGRESS=plain
export COMPOSE_DOCKER_CLI_BUILD=1

# Ensure OrbStack context is active
if command -v docker &> /dev/null && docker context list 2>/dev/null | grep -q "orbstack.*\*"; then
    echo "âœ“ OrbStack context is active"
elif command -v docker &> /dev/null && docker context list 2>/dev/null | grep -q "orbstack"; then
    echo "â†’ Switching to OrbStack context"
    docker context use orbstack
fi

# Python configuration
export UV_CACHE_DIR="$PWD/.uv-cache"
export PYTHONPATH="$PWD/python:$PYTHONPATH"

# Node.js/pnpm configuration  
export PNPM_HOME="$HOME/.local/share/pnpm"
export PATH="$PNPM_HOME:$PATH"

# Rust configuration
export CARGO_TARGET_DIR="$PWD/target"

# Development mode indicators
export NODE_ENV=development
export RUST_LOG=debug
export PYTHON_ENV=development

echo "ðŸš€ Cortex-OS development environment loaded"
echo "   Docker BuildKit: enabled"
echo "   Context: $(docker context show 2>/dev/null || echo 'unknown')"
echo "   OrbStack: $(orbctl status 2>/dev/null || echo 'unknown')"
